require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["facebook/authutils","google/authutils","ta/Core/TA.FireEvent","utils/urlDecoder","ta/Core/TA.Event","ta/util/Error","common/Radio","lib/jquery-amd","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder","ta/Core/TA.Record","ta/util/CommonMessagingUtil","api-mod","ta/Core/TA.LocalStorage","ta/Core/TA.Store","ta/Browser","ta/util/SessionStorage","ta/util/ajaxPreserves","babel/babel-helpers","common/page-filters","utils/nodePreserve","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","utils/responsive","utils/resize-invalidated-cache","hotels/SpecialMessageUtil","ta/util/Element","ta/util/Cookie","common/trackingStreams","overlays/loading-spinner","ajax-request","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","utils/classnameUtils","hotels/HRContentBlockUtils","overlays/widgetoverlays","members/memberOverlay","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","overlays/options/disablePageScroll","overlays/uiOverlay","overlays/styles/default","overlays/position/conditional","overlays/position/fullscreen","overlays/position/center","utils/ajax","actions/openRespPhotoViewer","overlays/ajaxUtil","sponsoredlisting/utils","widget/saves","tab_bar/TabBar","tab_bar/ScrollPastBottom","tab_bar/MoreTab","tab_bar/HighlightActiveTab","tab_bar/StickyBar","tab_bar/CorrectLazyLoadOffset","utils/ScrollInContainer","mobile/lite/image-loader","utils/VisibilityChecker","photoviewer/loader","cpm/BannerResizeHandler"],["ta","page-model","ta","ta","ta","page-model","page-model","ta","page-model","page-model"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/apg-Attraction_Review","files":{"js3_secure":{"ssl":{"ta":{"Core":{"TA.Record":1}}}},"js-amd":{"lib":{"babel":{"babel-helpers":1}},"src":{"cpm":{"BannerResizeHandler":1},"tab_bar":{"TabBar":1,"StickyBar":1,"ScrollPastBottom":1,"HighlightActiveTab":1,"CorrectLazyLoadOffset":1,"MoreTab":1},"widget":{"saves":1},"facebook":{"authutils":1},"mobile":{"lite":{"image-loader":1}},"google":{"authutils":1},"ajax-request":1,"common":{"trackingStreams":1},"hotels":{"HRContentBlockUtils":1},"utils":{"throttle":1,"ScrollInContainer":1,"urlDecoder":1,"asdf-encoder":1,"VisibilityChecker":1,"responsive":1,"classnameUtils":1,"ResponsiveEvents":1,"ajax":1,"nodePreserve":1},"api-mod":1,"members":{"memberOverlay":1},"overlays":{"ajaxUtil":1,"uiOverlay":1,"options":{"autoReposition":1,"closeOnEscape":1,"disablePageScroll":1,"ajax":1,"closeOnDocClick":1},"widgetoverlays":1,"styles":{"default":1,"windowshade":1,"modal":1},"position":{"conditional":1,"fullscreen":1,"center":1},"loading-spinner":1},"actions":{"openRespPhotoViewer":1},"sponsoredlisting":{"utils":1}}},"js3":{"lib":{"jquery-amd":1},"build":{"es6":{"src":{"cpm":{"ResponsiveBannerResizeHandler":1},"widget":{"components":1},"common":{"Radio":1,"page-filters":1},"hotels":{"SpecialMessageUtil":1},"utils":{"resize-invalidated-cache":1},"overlays":{"Overlay":1},"photoviewer":{"loader":1}}}},"src":{"pages":{"inappropriate_vote_stub":1},"ta":{"util":{"Cookie":1,"GeeTest":1,"CommonMessagingUtil":1,"Element":1,"Error":1,"SessionStorage":1,"ReCaptcha":1,"ajaxPreserves":1},"registration":{"RegEvents":1},"Browser":1,"Core":{"TA.FireEvent":1,"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1}}}}},"_":{"baseUrl":"/"}});
define("utils/AjaxData",["ta","mixins/Events","lib/jquery-amd"],function(t,e,n){"use strict";function i(){}function a(t){function a(){return null!==s||null!==l}function r(){var t=a(),e=d,n=l;if(d=null,s=null,l=null,null!==n)try{n.abort()}catch(t){}return null!==e&&clearTimeout(e),t}function o(){var t=s;if(s=null,t){var e;t.success=function(n){l==e&&(l=null,v&&(y=n),f.data=n,f.error=void 0,f.dataVersion=++p,h(f,e,t.data),u.emit("update"))},t.error=function(n,i,a){l==e&&(l=null,f.data=y,f.dataVersion=++p,f.error={type:i,error:a,status:n.status,responseText:n.responseText},h(f,e,t.data),u.emit("update"))},e=c(t),l=e,u.emit("update")}}t=t||{};var u=new e("update"),d=null,s=null,l=null,f=this,p=0,c=t.ajaxFunc||n.ajax,h=t.transformer||i,m=t.dataType||"html",v=!!t.holdData,y=void 0;this.dataVersion=0,this.on=u.on.bind(u),this.off=u.off.bind(u),this.removeListener=u.removeListener.bind(u),this.isDone=function(){return!a()},this.isBusy=function(){return a()},this.clear=function(){var t=a()||"undefined"!=typeof this.data||"undefined"!=typeof this.error;r(),y=void 0,f.data=void 0,f.error=void 0,f.dataVersion=0,h(f),t&&u.emit("update")},this.refresh=function(t,e,n,i,a){r(),(!i||i<0)&&(i=0),s={type:t,url:e,data:n,dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof a&&(s.timeout=a),d=setTimeout(o,i),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")},this.postJson=function(t,e,n,i){r(),n=n||0,n<0&&(n=0),s={beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e),dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof i&&(s.timeout=i),d=setTimeout(o,n),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")}}return a});
require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["mixins/Events","utils/browserutils","api-mod","utils/MouseAway","utils/resourceLoader","overlays/Overlay","overlays/utils","overlays/ajaxUtil","overlays/options/closeOnDocClick","overlays/options/delayedCloseOnDocClick","overlays/options/closeOnChildClick","overlays/options/closeOnSourceClick","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnMouseOut","overlays/options/closeOnMouseAway","overlays/options/closeOnScroll","overlays/options/closeOnEscape","overlays/options/closeOnEvent","overlays/options/closeOnTaEvent","overlays/options/closeOnTargetEvent","overlays/options/closeOnLegacyOverlay","overlays/options/fireEventOnWindowshadeClick","overlays/options/hoverDelay","overlays/options/storeOverlayOnElement","overlays/options/fadeInOut","overlays/options/highlightElement","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/autoReposition","overlays/options/autosizePage","overlays/options/keepInDom","overlays/options/matchWidth","overlays/options/maxWidth","overlays/options/minWidth","overlays/options/ajax","overlays/options/centerArrowOnSrcElement","overlays/options/closeOnTargetChildClick","overlays/options/stickyClick","overlays/position","overlays/styles/modal","overlays/styles/popover","overlays/styles/tooltip","overlays/styles/windowshade","overlays/styles/dropdown","overlays/styles/notification","overlays/uiOverlay"],["ta","ta"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/uiOverlays","files":{"js-amd":{"src":{"mixins":{"Events":1},"utils":{"browserutils":1,"resourceLoader":1,"MouseAway":1},"api-mod":1,"overlays":{"ajaxUtil":1,"uiOverlay":1,"utils":1,"options":{"closeOnTargetChildClick":1,"keepInDom":1,"autoReposition":1,"closeOnTaEvent":1,"ajax":1,"closeOnDocClick":1,"closeOnMouseOut":1,"closeOnSourceClick":1,"centerArrowOnSrcElement":1,"fadeInOut":1,"highlightElement":1,"storeOverlayOnElement":1,"autosizePage":1,"closeOnScroll":1,"stickyClick":1,"maxWidth":1,"closeOnWindowshadeClick":1,"closeOnEscape":1,"closeOnMouseAway":1,"minWidth":1,"closeOnLegacyOverlay":1,"closeOnChildClick":1,"closeOnTargetEvent":1,"matchWidth":1,"repositionOnEvent":1,"fireEventOnWindowshadeClick":1,"closeOnEvent":1,"repositionOnTaEvent":1,"delayedCloseOnDocClick":1,"hoverDelay":1},"styles":{"notification":1,"popover":1,"tooltip":1,"windowshade":1,"dropdown":1,"modal":1},"position":1}}},"js3":{"build":{"es6":{"src":{"overlays":{"Overlay":1}}}}}},"_":{"baseUrl":"/"}});
define("utils/MouseAway",["vanillajs","api-mod","ta","mixins/mixin","mixins/Events","utils/throttle"],function(t,o,e,r,n,i){"use strict";function l(t,o){var e=t.right<=o.left,r=t.left>=o.right,n=t.top>=o.bottom,i=t.bottom<=o.top;if(e||r){var l=e?"left":"right",u=e?"right":"left";return[[t[l],t.top],[o[l],o.top],[o[u],o.top],[o[u],o.bottom],[o[l],o.bottom],[t[l],t.bottom]]}if(n||i){var a=n?"bottom":"top",f=n?"top":"bottom";return[[t.right,t[a]],[o.right,o[a]],[o.right,o[f]],[o.left,o[f]],[o.left,o[a]],[t.left,t[a]]]}return null}function u(t,o){if(!o)return!1;for(var e=t[0],r=t[1],n=!1,i=0,l=o.length-1;i<o.length;l=i++){var u=o[i][0],a=o[i][1],f=o[l][0],s=o[l][1],m=a>r!=s>r&&e<(f-u)*(r-a)/(s-a)+u;m&&(n=!n)}return n}function a(t,e,r){var n=r.relatedTarget||r.target;if(!t||!e)return!1;if(o.containsElement(t,n)||o.containsElement(e,n))return!0;var i=l(o.getCoords(t),o.getCoords(e)),a=u([r.clientX+o.scrollLeft(),r.clientY+o.scrollTop()],i);return a}function f(t,e){r(this,new n("mouseAway")),o.addEvent(window,"mousemove",i(function(o){var r=a(t,e,o);r||this.emit("mouseAway")}).bind(this),300)}return f});
define("overlays/ajaxUtil",["vanillajs","ta","utils/object/shallow-copy","utils/AjaxData","mixins/Events","overlays/loading-spinner","utils/resourceLoader","amdloaders"],function(e,t,a,r,n,i,o,s){"use strict";function d(e,t){var a,r=[];for(a in t)t[a]&&r.push(a);r.sort();for(var n=e,i=n.indexOf("?")>=0?"&":"?",o=0;o<r.length;++o)a=r[o],n+=i+encodeURIComponent(a)+"="+encodeURIComponent(String(t[a])),i="&";return n}function u(){for(var e=0,t={},a=[],r=p.length-1;r>=0;--r){var n=p[r],i=g[n];i&&!t[n]&&(i.hasClients()||++e<=h)&&(t[n]=i,a.push(n))}return a.reverse(),g=t,p=a,m=p.length+h,p}function l(e,i){function d(){if(T){T=!1,u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.needsTravelInfo&&t.invalidate()}}}function l(){u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.invalidateOnPricingModeUpdate&&t.invalidate()}}function c(e,a,r,n,i,s,u){if(n=n&&t.page&&t.page.usingUnifiedDates){T=!0;var c=t.page.datesToQueryString("STAYDATES");!c&&i&&(c=t.page.defaultDatesToQueryString("STAYDATES")),c&&(a+="&"+c),y||(y=!0,t.page.on("dateSelected",d),t.page.on("guestsSelected",d),require(["trjs!common/Radio"],function(e){v||(v=e("web-component-pricingMode"),v.on("update",function(){l()}))}))}if(s>1){if(s>20)return;a+="&reqNum="+s,u>=0||(u=2e3)}else u=0;r?e.refresh("POST",a,r,u):e.refresh("GET",a,void 0,u),o.load(A,function(){S=!0,h()})}function h(){if(b.isBusy()||!S)return L&&clearTimeout(L),void(L=void 0);if(!b.data)return void(0!==b.dataVersion?E.error&&E.error===b.error||(E.error=b.error||"no content",L=L||setTimeout(m,0)):0!==j&&(V=q,j=b.dataVersion,U=[],P.hasListeners("update")&&(L=L||setTimeout(m,0))));if(j!==b.dataVersion){try{var e=document.createElement("div");e.innerHTML=b.data;var t=x,a=document.head||document.getElementsByTagName("head")[0];U=[],i.noScript||Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){if(t){var r=document.createElement("script");r.setAttribute("type","text/javascript"),e.src&&(r.src=e.src),e.text&&(r.text=e.text),r.setAttribute("data-rup",e.getAttribute("data-rup")),a.appendChild(r),e.src||a.removeChild(r)}e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){t?a.appendChild(e):e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("[data-targetEvent]"),function(e){U.push(e),e.parentNode.removeChild(e)}),t&&(x=!1,f[i.inlineResourceId]=!0),V=e.innerHTML,j=b.dataVersion,b.data=void 0}catch(e){E.error="invalid HTML"}L=L||setTimeout(m,0)}}function m(){var t,a=!P.hasListeners("update");for(L=void 0,E.data=V,E.dataVersion=j,P.emit("update");t=U.shift();){var r=t.getAttribute("data-targetEvent");if("repoll-required"===r){if(a)return U=[],E.data=V=q,void(E.dataVersion=j=0);++M>1||(M=2);var n=Number(t.getAttribute("data-delay"));c(b,e,i.reqParams,I,D,M,n)}else P.emit("data-targetEvent",r,t)}}var A,S,E=this,b=new r({dataType:"html",ajaxFunc:i.ajaxFunc}),P=new n("update","data-targetEvent"),q=i.loadingContent||C,x=!1,I=!!i.sendTravelInfo,R=!!i.invalidateOnPricingModeUpdate,D=I&&i.sendDefaultDates,L=void 0,V=q,j=b.dataVersion,U=[],M=0;this.error=void 0,this.loadingData=q,this.data=V,this.dataVersion=j,this.needsTravelInfo=I,this.invalidateOnPricingModeUpdate=R,this.on=P.on.bind(P),this.off=P.off.bind(P),this.removeListener=P.removeListener.bind(P),this.init=function(){b.on("update",h.bind(this))},this.isBusy=function(){return b.isBusy()||L},this.isDone=function(){return!b.isBusy()&&!L},this.invalidate=function(){b.clear(),M=0,this.hasClients()?c(b,e,i.reqParams,I,D,0,0):(E.data=V=q,E.dataVersion=j=0)},this.hasClients=function(){return P.hasListeners("update")},this.load=function(){if(!b.isBusy()){if(0!==b.dataVersion)return void setTimeout(function(){P.emit("update")},1);var t=i.reqParams,r=!i.isWidget||!i.inlineResourceId||!f[i.inlineResourceId];if(r){var n=s.getLoadedFilesParams();x=!0,t=t?a(t):{},t.haveJses=n.haveJses,t.haveCsses=n.haveCsses,i.isWidget&&(t.Action="install")}A=i.resources,M=0,c(b,e,t,I,D,0,0)}}}function c(e,t){var a=d(e,t.reqParams);a.length<128&&(e=a,t.reqParams=void 0);var r=g[a];return r||(r=new l(e,t),r.init(),t.noCache||(g[a]=r)),t.noCache||(p.push(a),p.length>m&&u()),r}var v,f={},h=10,p=[],g={},m=h,y=!1,T=!1,C=i();return{loadData:function(e,t){!t&&(t={});var a=c(e,t);return a.load(),a},loadOverlayWidget:function(e,t,r){var n="/OverlayWidgetAjax?Mode="+e;r?n+="&metaReferer="+encodeURIComponent(r):"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),t=t?a(t):{},t.inlineResourceId=e,t.isWidget=!0;var i=c(n,t);return i.load(),i},cleanCache:u}});
define("overlays/options/delayedCloseOnDocClick",["api-mod"],function(t){"use strict";function e(e){if(!(this.sourceElement&&t.containsElement(this.sourceElement,e.target)||t.containsElement(this.container,e.target)||e.target&&("option"===e.target.tagName||t.hasClass(e.target,"ui_dropdown")||t.getParent(e.target,"ui_dropdown"))||t.checkBrowser("ie")&&e.target&&"select"==e.target.tagName&&t.containsEvent(e.target,e)&&t.select(this.container,"input").indexOf(e.target)))if(i&&i>0){var n=this;setTimeout(function(){n.hide("doc-click")},i)}else this.hide("doc-click")}function n(n){return function(o){return function(){var c=t.bind(e,this);i=o,this.on("show",function(){setTimeout(function(){this.isOpen()&&(t.addEvent(document,"click",c),n&&t.addEvent(document,"touchstart",c))}.bind(this),1)}).on("hide",function(){t.removeEvent(document,"click",c),n&&t.removeEvent(document,"touchstart",c)})}}}var i=0,o=n(!0);return o.withoutTouchEvents=n(!1),o});
define("overlays/options/closeOnChildClick",["vanillajs","api-mod"],function(t,n){"use strict";function i(t){n.containsElement(this.container,t.target)&&this.hide("child-click")}function e(t){return function(){var e=n.bind(i,this);this.on("show",function(){n.addEvent(this.domParent,"click",e),t&&n.addEvent(this.domParent,"touchstart",e)}).on("hide",function(){n.removeEvent(this.domParent,"click",e),t&&n.removeEvent(this.domParent,"touchstart",e)})}}var o=e(!0);return o.withoutTouchEvents=e(!1),o});
define("overlays/options/closeOnSourceClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){e.containsElement(this.sourceElement,t.target)&&(this.hide("source-click"),t.stopPropagation(),t.preventDefault())}function i(t){return function(){var i=n.bind(this),o=function(t){setTimeout(t.bind(this),1)}.bind(this);this.on("show",o.bind(void 0,function(){e.addEvent(this.sourceElement,"click",i),t&&e.addEvent(this.sourceElement,"touchstart",i)})).on("hide",o.bind(void 0,function(){e.removeEvent(this.sourceElement,"click",i),t&&e.removeEvent(this.sourceElement,"touchstart",i)}))}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/closeOnWindowshadeClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(){var i=this;n.addEvent(this.shade,"click",function(){i.hide("windowshade")})}});
define("overlays/options/closeOnMouseOut",["vanillajs","api-mod"],function(e,t){"use strict";function n(e){t.containsElement(this.sourceElement,e.relatedTarget)||t.containsElement(this.container,e.relatedTarget)||this.hide()}var o=function(){var e=t.bind(n,this);this.on("show",function(){t.addEvent(this.sourceElement,"mouseout",e),t.addEvent(this.container,"mouseout",e)}).on("hide",function(){t.removeEvent(this.sourceElement,"mouseout",e),t.removeEvent(this.container,"mouseout",e)})};return o});
define("overlays/options/closeOnMouseAway",["vanillajs","utils/MouseAway"],function(n,e){"use strict";var o=function(n){return function(){var o,t=new e(this.sourceElement,this.container),i=this.hide,u=i;n&&(u=function(){o=setTimeout(i,n)}),this.on("show",function(){t.on("mouseAway",u)}).on("hide",function(){t.off("mouseAway"),clearTimeout(o)})}},t=o(null);return t.withDelay=function(n){return o(n)},t});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){var n=this,i=function(){n.hide()};this.on("show",function(){o.addEvent(window,"scroll",i)}).on("hide",function(){o.removeEvent(window,"scroll",i)})};return i});
define("overlays/options/closeOnEscape",["vanillajs","api-mod"],function(e,n){"use strict";function t(e){27===e.keyCode&&(e.preventDefault(),this.hide("escape"))}var o=function(){var e=n.bind(t,this);this.on("show",function(){n.addEvent(document,"keyup",e)}).on("hide",function(){n.removeEvent(document,"keyup",e)})};return o});
define("overlays/options/closeOnEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n){return function(){var e=t.bind(i,this);this.on("show",function(){t.addEvent(this.domParent,n,e)}).on("hide",function(){t.removeEvent(this.domParent,n,e)})}}});
define("overlays/options/closeOnTargetEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(this);this.on("show",function(){e.forEach(function(i){t.addEvent(n,i,c)})}).on("hide",function(){e.forEach(function(i){t.removeEvent(n,i,c)})})}}});
define("overlays/options/closeOnLegacyOverlay",["vanillajs","ta/Core/TA.Event"],function(n,e){"use strict";return function(){e.on("onOverlayShow",this.hide.bind(this))}});
define("overlays/options/fireEventOnWindowshadeClick",["vanillajs","api-mod"],function(n,i){"use strict";var e=function(n){return function(){i.addEvent(this.shade,"click",function(){i.fireEvent(document,n,{})})}};return e});
define("overlays/options/hoverDelay",["vanillajs","api-mod"],function(e,t){"use strict";var i=function(e,i){return function(){var n=t.bind(function(){this.hoverTimer=setTimeout(this.show,e)},this),o=t.bind(function(){clearTimeout(this.hoverTimer)},this);t.addEvent(this.sourceElement,"mouseover",n),t.addEvent(this.sourceElement,"mouseout",o),i&&n()}};return i});
define("overlays/options/fadeInOut",["api-mod","utils/bindAll"],function(i,t){"use strict";var n={"fade_none":0,"fade_short":250,"fade_normal":500,"fade_long":1e3},e="fade_in";return function(s,o){return function(){if(s&&s in n){i.addClass(this.container,s);var a=n[s],d=i.bind(this.show,this),h=i.bind(this.hide,this),u=null;this.show=function(){d&&d(),setTimeout(function(){i.addClass(this.container,e)}.bind(this),0),clearTimeout(u),o&&(u=setTimeout(i.bind(this.hide,this),a+o))},this.hide=function(){i.removeClass(this.container,e),clearTimeout(u),u=setTimeout(function(){h&&h()},a)},t(this,"show","hide")}}}});
define("overlays/options/highlightElement",["api-mod"],function(i){"use strict";var n=function(n){function t(n){this.on("show",function(){i.addClass(n,"highlight")}).on("hide",function(){i.removeClass(n,"highlight")})}return arguments.length?function(){t.call(this,n)}:void t.call(this,this.sourceElement)};return n});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/autosizePage",["lib/jquery-amd","api-mod"],function(o,t){"use strict";return function(i,n){return function(){function n(){var n=t.getCoords(this.container),s=t.getSize(window);this._scrollTop||(this._scrollTop=t.scrollTop()),o(document.body).css("overflow","hidden"),n.height+2*i>s.y&&o(this.container).css({top:i,marginTop:0}),window.scrollTo(0,0)}this.domParent=o("<div></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto"})[0],this.on("append",function(){o(document.body).append(this.domParent)}),this.on("show",n),this.on("positionDirty",n),this.on("hide",function(){o(document.body).css("overflow","auto"),o(this.domParent).remove(),window.scrollTo(0,this._scrollTop),delete this._scrollTop})}}});
define("overlays/options/keepInDom",["vanillajs","api-mod"],function(n,i){var t="";return function(){this.isOpen=function(){return!!i.inDocument(this.container)&&!i.hasClass(this.container,"hidden")},this.show=function(){return i.inDocument(this.container)?(this.container.style.display=t,i.removeClass(this.container,"hidden")):this.domParent.appendChild(this.container),this.emit("show"),this},this.hide=function(n){return i.inDocument(this.container)&&"none"!=this.container.style.display&&("none"!=this.container.style.display&&(t=this.container.style.display||"",this.container.style.display="none"),i.hasClass(this.container,"hidden")||i.addClass(this.container,"hidden"),this.emit("hide",{trigger:n})),this}}});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/maxWidth",["vanillajs"],function(i){"use strict";var t=function(i){function t(){this.container.style.maxWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",t.bind(this))}};return t});
define("overlays/options/minWidth",["vanillajs"],function(i){"use strict";var n=function(i){function n(){this.container.style.minWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",n.bind(this))}};return n});
define("overlays/options/ajax",["vanillajs","overlays/ajaxUtil"],function(t,e){"use strict";function i(t){return t&&t.match(/^((https?:)?(\/\/)?([\da-z\.\-\u00a1-\uffff]+)\.([a-z\.\u00a1-\uffff]{2,6}))?(\/[\w]+)*(\?[\/\w\.+%=\-#&\/!\u00a1-\uffff]+)?$/)}function n(t,n){function a(){if(this.sourceElement&&(t=t||this.sourceElement.getAttribute("data-url"),void 0===n.noCache&&(n.noCache=this.sourceElement.getAttribute("data-ajaxNoCache")),n.resources||(n.resources=this.sourceElement.getAttribute("data-resources"),n.resources&&(n.resources=n.resources.replace(/[\[\]]/g,"").split(/[ ,]+/))),n.invalidateOnPricingModeUpdate||(n.invalidateOnPricingModeUpdate=this.sourceElement.getAttribute("data-invalidateOnPricingModeUpdate"))),t){var a,s,r=0,o=function(){a.dataVersion!==r&&(this.contentElement.innerHTML=a.data,this.emit("contentsUpdated"),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement)),this.reposition(),setTimeout(this.reposition.bind(this),1),this.emit("contentLoaded",a.error)}.bind(this),d=function(i){return s==t?(this.reposition(),void this.emit("contentsUnchanged")):(n.skipInvalidate||a&&a.invalidate(),s=t,a=e.loadData(t,n),i||(this.contentElement.innerHTML=a.data),this.emit("contentsUpdated"),this.reposition(),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement),a.on("update",o),void a.on("data-targetEvent",u))}.bind(this),u=this.emit.bind(this,"data-targetEvent");this.on("show",d),this.on("hide",function(){a&&(a.off("update",o),a.off("data-targetEvent",u),a=void 0)});var h=this.updateContent;this.updateContent=function(e,n){return e?i(e)?(t=e,this.isOpen()&&d(n),this):(t="",h.apply(this,arguments)):(t="",e=this.sourceElement.getAttribute("data-url"),e?this.updateContent(e):h.apply(this,arguments))}}}return n||(n={}),a}return n});
define("overlays/options/closeOnTargetChildClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(i){return function(){var t,c=n.bind(function(){this.hide("target-child-click")},this);this.on("show",function(){t=n.select(i),t&&n.addEvent(t,"click",c)}).on("hide",function(){t&&n.removeEvent(t,"click",c)})}}});
define("overlays/options/stickyClick",["vanillajs","api-mod","utils/MouseAway"],function(i,n,t){"use strict";var o=!1;return function(){var i=new t(this.sourceElement,this.container);n.addEvent(this.sourceElement,"click",function(){o=!0}),this.on("hide",function(){o=!1,i.off("mouseAway")}),this.on("show",function(){var n=this.hide.bind(this);i.on("mouseAway",function(){o||n("stickyClick")})})}});
define("overlays/styles/tooltip",["vanillajs","api-mod","overlays/utils"],function(t,e,i){"use strict";function n(t,n,r){this.container=e.createElement(r||"span",{"class":"ui_overlay ui_tooltip arrow_"+i.getArrowDir(t,this.sourceElement,this.domParent)+" "+n}),this.arrow=e.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.inner=e.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner}var r=function(t,e,i,r,a){return t&&(i=i||t.getAttribute("data-tooltip"),a=a||t.getAttribute("data-elementtype")),function(){n.call(this,e,i,a),this.updateContent(r)}};return r});
define("overlays/styles/dropdown",["vanillajs","api-mod"],function(t,n){"use strict";function e(t,e,i,o){this.container=n.createElement(o||"span",{"class":"ui_overlay ui_dropdown "+e,"style":i}),this.contentElement=this.container}var i=function(t,n,i,o,r,a){i=i||t.getAttribute("data-dropdown")||"";var s=r||t.getAttribute("style")||"";return function(){e.call(this,n,i,s,a),this.updateContent(o)}};return i});
define("overlays/styles/notification",["vanillajs","api-mod"],function(n,e){"use strict";function i(n,i){this.container=e.createElement("div",{"class":"ui_overlay ui_notification "+n}),this.icon=e.createElement("span",{"class":"ui_icon main_icon "+i}),this.container.appendChild(this.icon),this.close=e.createElement("span",{"class":"ui_icon times close"}),this.container.appendChild(this.close),this.inner=e.createElement("div",{"class":"message"}),this.container.appendChild(this.inner),this.contentElement=this.inner}function t(n){var i=e.find("."+u);i||(i=document.createElement("div"),i.className=u,document.body.appendChild(i)),n.domParent=i,i.appendChild(n.container),o(n),s(n)}function a(n){r(n),o(n),e.addEvent(n.container,"mouseleave",function i(){e.removeEvent(n.container,"mouseleave",i),s(n)}),n.emit("hover")}function o(n){e.removeClass(n.container,"hidden"),n.container.clientHeight,e.removeClass(n.container,"transparent")}function c(n){e.addClass(n.container,"transparent"),r(n),n.__hideTimer=setTimeout(e.bind(l,null,n),m)}function s(n){r(n),n.__transitionOutTimer=setTimeout(c.bind(null,n),h)}function r(n){n.__transitionOutTimer&&clearTimeout(n.__transitionOutTimer),n.__hideTimer&&clearTimeout(n.__hideTimer)}function l(n,e){n.hide(e)}function d(n){n.on("show",e.bind(t,null,n)),e.addEvent(n.container,"click",e.bind(l,null,n,"click")),e.addEvent(n.container,"mouseenter",e.bind(a,null,n))}var u="ui_notification_container",m=2e3,h=1e4,_=function(n,e,t,a){return e=e||n&&n.getAttribute("data-modal")||"",a=a||n&&n.getAttribute("data-icon")||"",function(){i.call(this,e,a),this.updateContent(t),d(this)}};return _});
define("overlays/uiOverlay",["vanillajs","api-mod","utils/responsive"],function(t,e,a){"use strict";function o(t){var e=a[t.getAttribute("data-breakpoint")];return!("function"==typeof e&&!e())}var r={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},i={},s=function(t,a){if(t=t||window.event,a=a||t.target||t.srcElement,o(a)){var s=t&&t.type;s&&e.removePropertyEvent(a,s,"uiOverlay"),t&&e.stopEvent(t);var n,l=(a.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),u=l.shift(),d=["overlays/Overlay","overlays/position"];for(var v in r)if(a.hasAttribute("data-"+v)){u=u||r[v].defaultPosition,d.push("overlays/styles/"+v),n=!0;break}var c=a.getAttribute("data-options")||"";if(!n&&require.defined("ta/util/Error")){var p="uiOverlay: no style. class="+a.className+", id="+a.id;return[].forEach.call(a.attributes,function(t){/^data-/.test(t.name)&&(p+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,p)}d.push(a.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var h=!1;a.hasAttribute("data-defer")&&(h=parseInt(a.getAttribute("data-defer"))),d.push(h?"overlays/options/hoverDelay":null),d.push(a.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),d.push(a.getAttribute("data-url")?"overlays/options/ajax":null),d.push(a.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),d.push(a.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),d.push(a.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),d.push(a.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var f=a.hasAttribute("data-move-padding")||a.hasAttribute("data-move-source");d.push(f?"overlays/options/moveIntoView":null),d.push(a.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),d.push("overlays/options/storeOverlayOnElement"),c&&(d=d.concat(c.split(" ").map(function(t){return"overlays/options/"+t}))),a.hasAttribute("data-tooltip")?"click"===s?d.push("overlays/options/closeOnDocClick"):"mouseover"===s&&c.indexOf("closeOnMouseAway")<0&&d.push("overlays/options/closeOnMouseOut"):a.hasAttribute("data-dropdown")&&("click"===s?(d.push("overlays/options/closeOnDocClick"),d.push("overlays/options/closeOnSourceClick")):"mouseover"===s&&d.push("overlays/options/closeOnMouseAway")),d.push(a.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var y;if(!(a.hasAttribute("data-unique")&&(y=a.getAttribute("data-unique"),y&&y in i))){var b;return a.hasAttribute("data-group")&&(b=a.getAttribute("data-group")),require(d,function(t,n,d,c,p,f,A,g,m,w,O,E){var k=[d(a,u),u&&n[u](l,r[v].defaultFixed),c&&c(a.getAttribute("data-windowshade")),p&&p(h,!0),f&&f(r[v].defaultFade),A&&A(),g&&g(a.getAttribute("data-close-event")),m&&m(a.getAttribute("data-close-ta-event")),w&&w(a.getAttribute("data-maxWidth")),O&&O(a.getAttribute("data-close-child")),E&&E(a.getAttribute("data-move-source"),parseInt(a.getAttribute("data-move-padding"),10))],x=Array.prototype.slice.call(arguments,11),I=new t(a,k.concat(x)),q=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=I&&t.overlay.hide()}),b&&(i[b]||[]).forEach(function(t){t!=I&&t.hide()}),I.show()};if(b){var C=i[b]||[];C.push(I),i[b]=C}if(s&&!h){var F=function(t){o(a)&&(q(),e.stopEvent(t))};e.addEvent(a,s,F),I.on("destroy",function(){e.removeEvent(a,s,F)})}if(y&&(i[y]=I,I.on("destroy",function(){delete i[y]})),!h&&q(),a.hasAttribute("data-callback")){var P=e.fn(a.getAttribute("data-callback"));P&&P(I)}}),!1}var A=i[y];if(A.sourceElement=a,A.updateContent(),!h&&A.show(),a.hasAttribute("data-callback")){var g=e.fn(a.getAttribute("data-callback"));g&&g(A)}}};return s}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
define("Logging",[],function(){var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1;"boolean"==typeof __SERVER__&&__SERVER__&&(e=4);for(var n={},o=["error","warn","dir","info","debug"],r=0;r<o.length;r++){var l=o[r];n[l]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,Array.prototype.slice.call(arguments))}}(l,r)}return n.setLevel=function(n){e=n},n});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error","ta/registration/RegEvents"],function(e,t,n,o,i,s,a,r,u){"use strict";var c=6e5,d="fbAutoLoginTime",f=new i,l=!1,g=function(e,t){if(l)return null;var n=t||"v1.0";return FB.init({appId:e,version:n,status:!0,cookie:!0}),l=!0,f.resolve()},p=function(e){f.promise().success(e)},m=function(){a.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},v=function(e){window.__REDUX_STORE__&&e&&__REDUX_STORE__.dispatch({type:"SET_AUTH_STATE",loggedInUserId:e})},h=function(){var e=new i;return S()?(FB.getLoginStatus(function(n){if("connected"===n.status&&n.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),n.authResponse.userID);var i=new XMLHttpRequest;i.open("POST","/FacebookConnectAjax",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("a=autologin&signedRequest="+encodeURIComponent(n.authResponse.signedRequest)),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return e.reject();if(e.resolve(),i.responseText){var n=t("<div>"+i.responseText+"</div>").find("#fbcajax_data");if(n.length){var o=n.data("fbAutologinTaUserId");o&&v(o)}}u.emit("success")}}}}),e.promise()):e.reject()},R=function(e,t){e!==""+t&&(r.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),m())},w=function(){S()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},b=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},S=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(d);return null==t?(sessionStorage.setItem(d,e),!0):(t=parseInt(t),e-t<c?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(d,e),!0))}catch(e){r.record(null,"Error storing FB autologin attempt: "+e)}return!0},k=function(e,t,n){var o=window.fbAsyncInit;window.fbAsyncInit=function(){g(t,n),o&&o()},function(t,n,o){var i,s=t.getElementsByTagName(n)[0];t.getElementById(o)||(i=t.createElement(n),i.id=o,i.src=e,s.parentNode.insertBefore(i,s))}(document,"script","facebook-jssdk")};return{init:g,autoLogin:h,queueForInit:p,refreshToken:w,submitEmailRegistration:b,loadSdkAndInit:k}});
define("google/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Error","page-model"],function(e,o,t,r,n,i,a,s){"use strict";var c=6e5,l=40185,u="googleOneTapTime",g="hideGoogleOneTap",d=new n,p=s.session.pageServlet.toLowerCase().replace("mobile",""),_=function(){return d.resolve()},f=function(e){d.promise().success(e)},m=function(e,o,t,r){var i=new n;if(!v())return i.reject();if(r)return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_control","control_"+p)}),i.reject();var s=e.hint({supportedAuthMethods:[o],supportedIdTokenProviders:[{uri:o,clientId:t}],context:"signIn"});return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_requested","requested_"+p,l)}),null==s?i.reject():(s.then(function(e){require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_selected","selected_"+p,l)});var o=window.location.pathname,t="/RegistrationController?flow=GOOGLE_ONETAP&pid="+l+"&requireSecure=true&forceDesktop=false&fullscreen=true&returnTo="+o;e.idToken&&(t=t+"&google_id_token="+e.idToken),window.location=t,i.resolve()})["catch"](function(e){switch(e.type){case"userCanceled":return document.cookie=g+"=1;domain="+cookieDomain,void require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_closed","closed_"+p,l)});case"noCredentialsAvailable":return;case"requestFailed":case"operationCanceled":case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_unknown_error","unknown_error_"+p,l)}),void a.record(null,"Unknown error processing Google onetap hint request - type, message: "+e.type+", "+e.message,null,{},"WARN")}}),i.promise())},v=function(){if(i.canUseSessionStore())try{var e=(new Date).getTime(),o=sessionStorage.getItem(u);return null==o?(sessionStorage.setItem(u,e),!0):(o=parseInt(o),e-o<c?(t.info("Skipping Google onetap, tried too recently"),!1):(sessionStorage.setItem(u,e),!0))}catch(e){a.record(null,"Error storing Google onetap attempt: "+e)}return!0};return{init:_,sendHintRequest:m,queueForInit:f}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(e,n,i){"use strict";function r(n){var i=document.getElementById(e.id);i&&(i.innerHTML=n.innerHTML)}function t(e,n){i.goToLink(e,n)}function o(e,n){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,n)}return n.on("update-"+e.name,r),{goToLink:t,onClick:o}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"facebook_autologin","handlers",["handlers"]);e(["placement","ta/Core/TA.Event","ta/util/Error","facebook/authutils","common/Radio"],function(t,e,o,a,n){"use strict";function r(){var t=document.querySelector("#fb_autologin_data");if(!t)return void o.record(null,"Could not find Facebook autologin data");var e=t.getAttribute("data-load-fb-js"),n=t.getAttribute("data-facebook-js-url"),r=t.getAttribute("data-facebook-connect-app-id"),i=t.getAttribute("data-facebook-api-version"),u=t.getAttribute("data-fb-auto-login"),c=t.getAttribute("data-fb-fetch-access-token");try{e&&a.loadSdkAndInit(n,r,i),u&&a.queueForInit(function(){a.autoLogin()}),c&&a.queueForInit(function(){a.refreshToken()})}catch(t){o.record(t,"Error setting up Facebook autologin JS")}}var i=document.querySelector("#fb_autologin_data");if(i){var u=i.getAttribute("data-defer-auto-login");u?n("TimeToInteractive").on("TimeToInteractive",r):e.queueForAfterLoad(r,"placement: facebook_autologin")}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder"],function(e,o,n,t,a,r,i){"use strict";function s(){var e=o(window).scrollTop();if(b.length&&w.is(":visible")){var n=v.height()-e;e<=0&&b.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?b.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&b.css({"position":"absolute","top":"auto","bottom":0}))}}function l(){var e=o(".second-view",v),n=o(window).scrollTop();b.length&&(y.css({"display":"block"}),e.length&&w.is(":visible")&&(n=h.height()-y.height(),window.scroll(0,n),b.css({"position":"absolute","top":"auto","bottom":0})))}function c(){var e=o(".global-nav-persistent",v);e.length&&e.toggleClass("fixed",o(window).scrollTop()>v.offset().top)}function d(e,o){e.preventDefault();var n=o.getAttribute("data-ahref")?i.asdf(o.getAttribute("data-ahref")).replace(/&amp;/g,"&"):"/";window.open(n,"_self")}var u="TopNav",v=o("#"+e.id),f=n("global-nav"),g=null,p=null,h=o(".persistent-icons",v),b=o(".global-nav-icons",h),y=o(".global-nav-logo",h),m=o(".global-nav-logo-2018",v),w=o('[data-placement-name="global_nav_geopill"]',v),j=n("candy-bar-quick-links"),k=o(".global-nav-bottom",v),C=n("tripsearch-scroll-geo-pill");f.on("run-my-trips-test-3",function(){T(!1,!0)}),C.on("hide-on-header",function(e){m&&m.toggleClass("is-hidden-mobile",!e)});var _=function(t){window.userLoggedIn=!0;var a=0==v.find("[data-non-components]").length;if(a){var i=v.find(".components-nav-legacy-actions"),s=o("<div>").html(t).find(".components-nav-legacy-actions").html();i.html(s)}else{var l=document.querySelector("#"+e.id),c=document.createElement("div");c.innerHTML=t,[].forEach.call(c.querySelectorAll(".react-container"),function(e){var o=l.querySelector('[data-component="'+e.getAttribute("data-component")+'"]');o&&e.parentNode.replaceChild(o,e)});var d=l.querySelector(".global-nav"),u=c.querySelector(".global-nav");d.parentNode.replaceChild(u,d),g&&g.hide("replace-el")}v[0]&&(r.initComponentWidgets(v[0],"@ta/trips.trip-link"),r.initComponentWidgets(v[0],"@ta/brand.global-nav-action-content-collect")),n("inbox").trigger("setup_handler")}.bind(v),O=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(_,null,O())}),v.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();g&&g.hide("new-overlay");var a=v.find(n.data("element")).clone();if(a.length){var r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(r,function(r,i,s,l,c){var d=o(".ppr_priv_global_nav_component").offset(),u=!!o(".skyExpanded").length,f=u&&d?1-d.top:1,p=new r(n[0],new i(a[0],"global-nav-flyout global-nav-menu"),s,l.bottomRight([0,f]),c);p.domParent=v.find(".global-nav-overlays-container")[0],p.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),p.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),g=p})}}),v.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),v.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,o,r,i){var s=new e(n[0],new o(t[0]),r,i);s.domParent=a[0],t.css("display","block"),s.show()})}}),v.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);g&&g.hide("new-overlay");var t=v.find(".global-nav-links-container li"),a=t.filter(":hidden"),r=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),i=o().add(a).add(r).clone(),s=v.find(".global-nav-links-menu-more").clone();s.prepend(i);var l=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(l,function(e,t,a,r,i){var l=o(".ppr_priv_global_nav_component").offset(),c=!!o(".skyExpanded").length,d=c&&l?1-l.top:1,u=new e(n[0],new t(s[0],"global-nav-flyout global-nav-menu"),a,r.bottomRight([0,d]),i);u.domParent=v.find(".global-nav-overlays-container")[0],u.show(),n.find(".ui_tab").addClass("hovering"),u.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),g=u})}),v.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,r,i,s){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),r,i("/uvpages/helpCenterOverlay.html")]);l.show(),f.emit("overlay-show")})}),v.on("click",".masthead-saves",function(e){p?(g&&g.hide("new-overlay"),p&&p.destroy()&&(p=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(T(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var T=function(e,n,t){g&&g.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,r,i,s,l,c,d){var u=o(".masthead-saves"),f=new a(u[0],new r("","global-nav-flyout global-nav-utility trips-flyout-container"),i.withoutTouchEvents,u.data("nav-2018-enabled")?s.bottomLeft([u.width()/2-34,9]):s.bottomLeft([-20,-3]),l,c);f.domParent=v.find(".global-nav-overlays-container")[0],f.show(),v.find(".trips-flyout-container").addClass("hide-arrow"),g=f,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,r,i){setTimeout(function(){p=new window.MastheadSavesApp,p.start({inCreateTripFlow:e,runTest3:n}),f.on("hide",function(e){p&&p.destroy()&&(p=null),d.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),v.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(v);v.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=v.find(n.data("element")).clone();if(t.length){if(g){if(g.sourceElement==this)return void(g.isOpen()?g.hide("close"):g.show());g.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,r,i,s,l){var c=new a(n[0],new r(t[0],"global-nav-flyout global-nav-utility"),i,n.data("nav-2018-enabled")?s.bottomLeft([n.outerWidth()/2-34,12]):s.bottomLeft([-20,-3]),l);c.domParent=v.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),g=c})}}),v.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),v.on("click","a.login-button.mobile",function(e){var n=o(".join-button").data("flowName")||"CORE_COMBINED",t=o(".join-button").data("pid")||40422,a=(o(".join-button").data("tracking"),"login");o(this).hasClass("join-button")&&(a="join");var r={flow:n,pid:t,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){}},i={extraQueryParams:{flowOrigin:a}};r=o.extend(r,i),require(["trjs!ta/registration/RegOverlay"],function(o){o.showForMobile(e,e.target,r)}),e.preventDefault()}),l();var q=a(c,100);return o(window).scroll(function(){s(),q()}),j.on("border-top",function(e){k.toggleClass("home_ui_tabs",e)}),v.on("click","a.global-nav-link[data-tracking-label]",function(e){var n=o(e.target).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(o){"HelpDesk"===n||"_blank"==e.target.target?o.trackEventOnPage(u,"click",n):o.setEvtCookie(u,"click",n,0,e.target.href)})}),{checkForPersistentIcons:s,checkForPersistentGlobalNav:c,clickLogoLink:d}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
define("ta/util/CommonMessagingUtil",["lib/jquery-amd","ta/Core/TA.LocalStorage","ta/support/Qualtrics","ta/util/SessionStorage","common/Radio"],function(e,t,n,a,i){"use strict";function r(e){if(t.enabled){var n=t.get(e+v);return n?parseInt(n):0}return null}function s(e){if(t.enabled&&e){var n=e+v;t.set(n,r(e)+1)}}function o(e){if(t.enabled){var n=t.get(e+y);return n?parseInt(n):0}return 0}function u(e){if(t.enabled&&e){var n=e+y;t.set(n,o(e)+1)}}function c(e){if(t.enabled){var n=t.get(e+p);return!!n}return!1}function l(e){t.enabled&&e&&t.set(e+p,"true")}function d(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+_;t.set(a,n.toString())}}function f(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+_,i=t.get(a);return!!i&&i===n.toString()}return!1}function m(e){var n=(new Date).getDate();t.enabled&&t.set(e,n.toString())}function g(e){var n=(new Date).getDate();if(t.enabled){var a=t.get(e);return!!a&&a===n.toString()}}function b(e,t,i){e&&"function"==typeof e&&e()&&(n.seenThisPageView()||n.canDisplaySmart()||n.canDisplay())||t&&"function"==typeof t&&t()||i&&"function"==typeof i&&(document.getElementById("FIXED_AD")?a.canUseSessionStore()&&a.getObject("ads.fixed.close")?i():S.once("ad_closed",function(){i()}):i())}function D(e){return e.toLowerCase().replace("mobile","")}var v="_view_count",p="_is_disabled",y="_times_dismissed",_="_disabled_for_day",S=i("cpm_mw_adhesion");return{getCurrentPageViews:r,incrementPageViews:s,getNumberOfTimesDismissed:o,incrementNumberOfTimesDismissed:u,isPlacementDisabled:c,disablePlacement:l,setPlacementDisabledForToday:d,isPlacementDisabledForToday:f,setPlacementGroupKey:m,checkPlacementGroupKey:g,parseServletName:D,displayPlacementIfNoSurveyNorAdIsPresent:b}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_action_inbox","handlers",["handlers"]);n(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record","ta/util/CommonMessagingUtil"],function(e,n,o,i,t,a){function s(e){if(e.receivedCallback&&e.receivedCallback(),o(".inbox-flyout-container").length&&g)g.destroy();else{var n=e.el,i=e.bottomLeftOffset;l(void 0,n,i)}}function r(e){l(e,o(".masthead-inbox-icon")[0])}function l(n,i,a){var s=o("#"+e.id),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(r,function(e,r,l,c,d,v,_,b,f){var w=o(".inbox-nav-contents",s).clone()[0];if(w.classList.remove("hidden"),o(".login-cta",w).length){var p=o(".login-cta span",w);p.click(function(){n&&m&&(h=!0,t.trackEventOnPage("reg_trigger","mgp_click_login","Inbox Jewel Notification Log In Click | Nav | mgp_drs_mem",u)),g.destroy(),_.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40472,userRequestedForce:!0,onSuccess:function(){o(".login-cta",s).remove(),o(".inbox-nav-dropdown",s).removeClass("with-login-cta")}.bind(this)})})}else for(var x,j=o(".js-inbox-lander-thread-list-item.loading",w),y=o(".inbox-masthead-wrapper",w),C=0;C<10;++C)x=j.clone(),x.removeClass("hidden"),y.append(x);var k=a;k||(k=o(i).data("nav-2018-enabled")?[o(i).width()/2-34,7]:[-20,-3]),g=new e(i,new r(w,"inbox-flyout-container"),l.withoutTouchEvents,c.bottomLeft(k),d,v),g.show(),n&&!n.hasClass("hidden")&&g.on("hide",function(){h||t.trackEventOnPage("reg_trigger","mgp_close","Inbox Jewel Notification | Nav | mgp_drs_mem",u),h=!1,m=!1}),o(".login-cta",s).length||b.loadMastheadDropdown()})}function c(e,n){if(n)if(n.hasClass("is-control"))t.trackEventOnPage("reg_trigger","mgp_view_control","Inbox Jewel Notification Control| Nav | mgp_drs_mem");else{var i=a.getCurrentPageViews(_);i>=b&&a.disablePlacement(_),a.isPlacementDisabledForToday(_)||a.isPlacementDisabled(_)||!n.hasClass("valid-for-test")||(o(".inbox-jewel-test",e).removeClass("hidden"),t.trackEventOnPage("reg_trigger","mgp_view","Inbox Jewel Notification | Nav | mgp_drs_mem",u))}}function d(){var n=o("#"+e.id),s=o(".inbox-jewel-test",n);c(n,s),o(".masthead-inbox-icon, .ui_jewel",n).click(function(e){e.stopPropagation(),s&&!s.hasClass("hidden")?(t.trackEventOnPage("reg_trigger","mgp_click","Inbox Jewel Notification | Nav | mgp_drs_mem",u),a.setPlacementDisabledForToday(_),a.incrementPageViews(_),m=!0,t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v)):o(".ui_jewel",n).length&&o(".ui_jewel",n).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v):o(".ui_jewel",n).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",v),o(".masthead-inbox-icon",n).attr("data-on-inbox")?window.location="/Inbox":o(".inbox-flyout-container").length&&g?g.destroy():r(s)}),i("inbox").on("thread_clicked",function(e){g&&g.destroy()}),i("inbox").on("has_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).removeClass("hidden")})}),i("inbox").on("no_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).addClass("hidden")})}),i("inbox").on("setup_handler",function(){d()})}var g,v=40186,u=40405,_="Membership_Inbox_Jewel_Test",b=3,m=!1,h=!1;return i("global-nav-inbox").on("open",function(e,n){s(e,n)}),d(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function n(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),n=t(".button_container").data("pageProperty3"),r=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||n&&""!==n||r&&""!==r)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,n,r)}function r(e){if(c.hasClass("core-login-button")){var t=c.data("isControl"),a=c.data("trackingPid"),n=c.data("joinAttr"),r="reg_trigger",o="mgp_";t&&n&&"view"===e&&(o="mgp_view_control",require("ta/Core/TA.Record").trackEventOnPage(r,o,n)),!t&&n&&a&&require("ta/Core/TA.Record").trackEventOnPage(r,o+e,n,a)}}var o=t("#"+e.id),i=null,c=t(".join-copy-tracking");r("view"),o.on("click","a.login-button",function(e){i&&i.hide("replace-el");var a=t(".core-login-button").data("flowName"),o=t(".core-login-button").data("pid"),c=(t(".core-login-button").data("tracking"),"login");t(this).hasClass("core-login-button")&&(c="join",t(this).hasClass("join-copy-tracking")&&r("click"));var l={flow:a,pid:o,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){}},d={extraQueryParams:{flowOrigin:c}};l=t.extend(l,d),require(["trjs!ta/registration/RegOverlay"],function(t){t.show(e,e.target,l)}),e.preventDefault(),n()});var l=function(e,a){var n=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",n):t.setEvtCookie(a,"click",n,0,e.href)})};o.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){l(this,"UtilityNav")}),o.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_dropdowns","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(e,n){"use strict";var a=n("#taplc_global_nav_0"),t=null;a.on("mouseenter",".global-nav-links-container [data-element]",function(e){var s=n(this),r=s.find("a").first();t&&t.hide("new-overlay");var o=a.find(s.data("element")).clone();if(o.length){var i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(i,function(i,l,v,u,d){var c=new i(s[0],new l(o[0],"global-nav-flyout global-nav-menu"),v,u.bottomRight([0,1]),d);c.domParent=a.find(".global-nav-overlays-container")[0],c.show(),r.attr("data-active-menu-trigger",!0),n(e.currentTarget).find(".ui_tab").addClass("hovering"),c.on("hide",function(){r.removeAttr("data-active-menu-trigger"),n(e.currentTarget).find(".ui_tab").removeClass("hovering")}),t=c})}}),a.on("mouseenter",".subItemDust",function(e){n(this).siblings(".expandSubItemDust").removeClass("activeL2")}),a.on("mouseenter",".expandSubItemDust.secondLevelSubNav",function(e){var a=n(this);if(!a.hasClass("activeL2")){a.addClass("activeL2"),a.siblings(".expandSubItemDust").removeClass("activeL2");var t=a.find(".secondSubNav.secondLevelSubNav").clone(),s=a.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,n,r,o){r=function(){};var i=a.parent().parent().parent(),l=i.find("ul.secondSubNav.secondLevelSubNav:visible");0!==l.length&&l!==a&&l.parent().remove();var v=i.find("ul.secondSubNav.thirdLevelSubNav:visible");0!==v.length&&v.remove();var u=a.parent().parent().find("div.ui_overlay.ui_flyout");0!==u.length&&void 0===u.childNodes&&u.remove();var d=new e(a[0],new n(t[0]),r,o);d.domParent=s[0],t.css("display","block"),d.show()})}}),a.on("mouseenter",".expandSubItemDust.thirdLevelSubNav",function(e){var a=n(this);if(!a.hasClass("activeL3")){a.addClass("activeL3"),a.siblings(".expandSubItemDust.thirdLevelSubNav").removeClass("activeL3");var t=a.find(".secondSubNav.thirdLevelSubNav").clone(),s=a.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,n,r,o){r=function(){};var i=a.parent().parent().parent().parent().find("ul.secondSubNav.thirdLevelSubNav:visible");0!==i.length&&i.parent().remove();var l=new e(a[0],new n(t[0]),r,o);l.domParent=s[1],t.css("display","block"),l.show()})}})})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_links","handlers",["handlers"]);n(["utils/asdf-encoder"],function(e){function n(n,a){window.open(e.asdf(a.getAttribute("data-ahref")).replace(/&amp;/g,"&"),"_self")}return{clickAboutGeoLink:n}})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);r(["placement","ta/Core/TA.Store","common/Radio"],function(e,r,a){function n(){if(e.params&&"typeahead_to_store"in e.params){var a=e.params.typeahead_to_store;if(a)for(var n in a)a.hasOwnProperty(n)&&r.store(n,a[n])}}n();var t=r.retrieve("typeahead_dual_search_options");return e.require(["trjs!deferred/lateHandlers"],function(e){a("masthead_search").on("open",function(){e.showSearchOverlay()})}),{getOptions:function(){return t}}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
define("ta/util/ajaxPreserves",["vanillajs"],function(){function e(e,n,r){if(r&&n&&e){var a=r.querySelectorAll(".ajax_preserve");if(a.length>0){var t={},l=n.querySelectorAll(".ajax_preserve, .ajax_preserve_noreplace");Array.prototype.forEach.call(l,function(e){var n=e.getAttribute("data-ajax-preserve");n&&(t[n]=e)}),Array.prototype.forEach.call(a,function(n){var r=t[n.getAttribute("data-ajax-preserve")];r&&e(r,n)})}}}var n={};return n.copy=e.bind(null,function(e,n){n.parentNode&&n.parentNode.replaceChild(e,n)}),n.innerCopy=e.bind(null,function(e,n){n.innerHTML=e.innerHTML}),n.replaceContent=function(e,r){for(n.copy(r,e),r.innerHTML="";e.childNodes.length>0;)r.appendChild(e.childNodes[0])},n.setContentElement=function(e,r,a){n.copy(e,r),a?e.parentNode&&e.parentNode.replaceChild(r,e):(e.innerHTML="",e.appendChild(r))},n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"attraction_mobileweb_breadcrumbs","handlers",["handlers"]);t(["placement","ta/Core/TA.Record","ta/Core/TA.Event","utils/urlDecoder","ta/util/ajaxPreserves"],function(e,t,n,r,a){function o(t){var n=document.getElementById(e.id),r=n.querySelector(".update-wrapper");a.setContentElement(r,t,!0)}var i="breadcrumbs",c="click";n.on("update-"+e.id,o);var u=function(e,n,r){t.setEvtCookie(i,c,e,n,r)},d=function(e,t){return r.goToLink(e,t)};return{"track":u,"goToLink":d}})});
require(["ta/p13n/placements"],function(a){var r=a.define.bind(a,"attraction_promo_header","handlers",["handlers"]);r(["placement","ta","lib/jquery-amd"],function(a,r,e){var t=function(a){return e(".attraction_promo_header").find(".ui_modal_card").addClass("is-active"),r.trackEventOnPage("attraction_promo_click","terms","",a,!1),!1},n=function(a){return e(".attraction_promo_header").find(".ui_modal_card").removeClass("is-active"),!1};return{showPromoTermsDialog:t,hidePromoTermsDialog:n}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"attraction_review_xsell_shelf","handler",["handler"]);e(["babel/babel-helpers","placement","ta/prwidgets"],function(t,e,n){function a(t,e){var n=t&&t.querySelectorAll('[data-component="@ta/attractions.quick-view"]');n&&require(["babel/babel-helpers","@ta/platform.runtime"],function(t,a){a["default"].then(function(){Array.from(n).forEach(function(t){a.destroyRoot(t.id)}),e&&e()})})}function i(){var t=document.getElementById("AR_XSELL_AJAX_CONTENT");if(t){var i=t.getAttribute("data-geo-id"),r=t.getAttribute("data-attraction-id");i&&r&&e.requestAJAXPlacement(function(e){a(t,function(){t.innerHTML=e,n.initWidgets()})},function(){},{"data-geo-id":i,"data-attraction-id":r})}}return ta.queueForReady(i),{}})});
require(["ta/p13n/placements"],function(e){var i=e.define.bind(e,"breadcrumb_mobile","handlers",["handlers"]);i(["placement","utils/urlDecoder"],function(e,i){"use strict";function n(e,n){i.goToLink(e,n)}function r(e,i){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,i)}return{goToLink:n,onClick:r}})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"detail_filter_bar","handlers",["handlers"]);a(["placement","ta/page","ta/Core/TA.FireEvent","common/page-filters"],function(e,a,t,r){function n(e){e&&(o.innerHTML=e.innerHTML)}function i(e,a){var t=a.className;t.match(c)||(a.className=t+" loading",require(["trjs!responsive/collapsibleLayout"],function(e){a.className=t,e.toggle()}))}function l(e,a){var t=a.getAttribute("data-param"),n=a.getAttribute("data-value");return t&&n&&(r.clear(t,n),a.parentNode.removeChild(a)),!1}var o=document.querySelector("#"+e.id+" .filter_bar"),c=/ *\bloading\b/;return t.on("update-"+e.name,n),{removeFilter:l,openFilters:i}})});
define("utils/nodePreserve",["ta/util/ajaxPreserves","utils/to-array"],function(e,r){"use strict";function t(e,r){if(e)for(e.innerHTML="";r.firstChild;)e.appendChild(r.firstChild)}function a(e,r){r&&Array.prototype.forEach.call(r.querySelectorAll(".node-preserve, .ajax_preserve"),function(r){var t=r.getAttribute("data-ajax-preserve");t&&(e[t]=r,r.parentNode&&r.parentNode.removeChild(r))})}function n(e,r){var a=r.getAttribute("data-ajax-preserve"),n=e[a];n&&(r.parentNode&&r.parentNode.replaceChild(n,r),t(n,r),delete e[a])}function i(i,o,l){if(i&&o){var d={};l&&e.innerCopy(i,o),a(d,i),t(i,o),r(i.querySelectorAll("[data-ajax-preserve]")).forEach(n.bind(null,d))}}var o={};return o.nodePreserve=function(e,r){i(e,r,!1)},o.treePreserve=function(e,r){i(e,r,!0)},o});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"detail_filters","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","ta/prwidgets","utils/nodePreserve"],function(e,n,t,i){function r(n){i.treePreserve(s,n.querySelector("#"+e.id+" .collapsibleContent")),t.initWidgets(s),i.treePreserve(u,n.querySelector("#"+e.id+" .noncollapsible")),t.initWidgets(u)}function o(){require(["trjs!responsive/collapsibleLayout"],function(e){e.toggle()})}function l(){n.on("update-"+e.name,r)}function c(){l()}var s=document.querySelector("#"+e.id+" .collapsibleContent"),u=document.querySelector("#"+e.id+" .noncollapsible");return c(),{done:o}})});
define("cpm/ResponsiveBannerResizeHandler",["babel/babel-helpers","utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t,i){"use strict";function s(){l(),o||(window.addEventListener("resize",r(l,300)),o=!0)}function n(e){e&&e.classList&&e.classList.add("hidden"),e&&e.classList&&e.classList.add("inactive")}function a(e){e&&e.classList&&e.classList.remove("hidden"),e&&e.classList&&e.classList.remove("inactive")}function l(){var e=document.querySelectorAll(".ppr_priv_footer_banner_ad_billboard");if(e.length)try{for(var r=0;r<e.length;r++)for(var s=e[r],l=s.querySelectorAll(".gptAd"),o=0;o<l.length;o++){var c=l[o],d=c.getAttribute("data-breakpoint");if(d){var v=t[d];if(v){var f=v();f?a(c):n(c)}}}}catch(e){i.error(e,"Error handling responsive header/footer banners")}}var o=!1,c={};return c.init=s,c});
define("utils/ResponsiveEvents",["mixins/Events","utils/responsive","utils/throttle","vanillajs"],function(n,e,t){"use strict";function r(n,e,t){var r=n.filter(function(n){return e.indexOf(n)<0}),i=e.filter(function(e){return n.indexOf(e)<0});return t?r.reverse().concat(i.reverse()):r.concat(i)}function i(){var n=document.body.clientWidth;if(n!=o){var t=n>o,i=e.currentBreakpoints(),f=r(u,i,t);f.forEach(function(n){var e=t?"over-":"under-";c.emit(e+n)}),f.length&&c.emit("breakpoint",i[0]),u=i,o=n}}var o=document.documentElement.clientWidth,u=e.currentBreakpoints(),f=["breakpoint"];e.breakpoints.forEach(function(n){f.push("over-"+n,"under-"+n)});var c=n.create(f);return c.onOver=function(n,e){c.on("over-"+n,e)},c.onUnder=function(n,e){c.on("under-"+n,e)},c.offOver=function(n,e){c.off("over-"+n,e)},c.offUnder=function(n,e){c.off("under-"+n,e)},window.addEventListener("resize",t(i,100)),c});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"footer_banner_ad_billboard","handlers",["handlers"]);n(["babel/babel-helpers","placement","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","ta/Core/TA.Event"],function(e,n,r,o,t){function i(){clearTimeout(u),u=setTimeout(function(){t.fireEvent("responsiveAdSizeChanged")},1e3)}var u=void 0;r.init(),o.offOver("mobile",function(){return i}),o.onOver("mobile",function(){return i}),o.offUnder("mobile",function(){return i}),o.onUnder("mobile",function(){return i}),o.offOver("desktop",function(){return i}),o.onOver("desktop",function(){return i}),o.offUnder("desktop",function(){return i}),o.onUnder("desktop",function(){return i})})});
define("utils/resize-invalidated-cache",["babel/babel-helpers"],function(e){"use strict";var t="__resize-cache",n=Date.now();return window.addEventListener("resize",function(){return n=Date.now()}),function(e){var a=e[t];return(null==a||a.timestamp<n)&&(a=e[t]={timestamp:n,value:e()}),a.value}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotels_loading_box","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/responsive","utils/resize-invalidated-cache"],function(e,n,i,a){function r(e,n){var r=t.innerHTML.indexOf("smart_deals_responsive")==-1,l=a(i.mobile),o=n<2&&(r||l)&&(e.TRAVEL_INFO||e.FILTERS||e.MAIN_META||e.UNKNOWN||e.REVIEW_LIST||e.SORT_ORDER||e.PAGE_OFFSET);!o!=!s&&t&&(s=o,t.style.display=o?"block":"none")}var t=document.querySelector("#"+e.id),s=!1;return n.on("page-changes-pending",r),{}})});
define("utils/classnameUtils",["vanillajs"],function(){function s(s){return e[s]?e[s].lastIndex=0:e[s]=new RegExp("(\\s|^)"+s+"(\\s|$)","g"),e[s]}var a={},e={};return a.hasClass=function(a,e){return!!a&&(a.classList?a.classList.contains(e):s(e).test(a.className))},a.addClass=function(s,e){s&&e&&(s.classList?s.classList.add(e):a.hasClass(s,e)||(s.className+=" "+e))},a.removeClass=function(a,e){a&&e&&(a.classList?a.classList.remove(e):a.className=a.className.replace(s(e)," "))},a.toggleClass=function(s,e,n){s&&(n||void 0===n&&!a.hasClass(s,e)?a.addClass(s,e):a.removeClass(s,e))},a.getParentByClassname=function(s,e){for(var n=s&&s.parentNode;n;n=n.parentNode)if(a.hasClass(n,e))return n;return null},a});
define("hotels/SpecialMessageUtil",["babel/babel-helpers","ta/util/SessionStorage","utils/responsive","utils/classnameUtils"],function(e,s,t,a){function r(e,s){var t=o();return!!t[e]&&(!s||!!t[e][s])}function i(e,s){a.removeClass(e,d),"BRAND_MESSAGING_DEFAULT"!==s&&"BRAND_MESSAGING_MULTIPLE_SITES"!==s||!t.mobile()||l(s)}function n(e,s,t,r){a.addClass(e,d),t&&!r||l(s,r)}function c(e){var s=e.querySelector("["+S+"]");return s?s.getAttribute(S):""}function u(e){var s=e.querySelector("["+b+"]");return!(!s||!s.getAttribute(b))}function l(e,t){var a=o();a[e]=a[e]||{},t&&(a[e][t]=!0);try{s.setObject(g,a)}catch(e){}}function o(){try{return s.getObject(g)||{}}catch(e){}return{}}var g="dismissedMessages",d="collapsed",S="data-messageType",b="data-persist-once-per-geo";return{displayMessage:i,dismissMessage:n,wasMessageDismissed:r,getMessageType:c,isMessagePersistableOncePerGeo:u}});
require(["ta/p13n/placements"],function(e){var s=e.define.bind(e,"hsx_special_messaging","handlers",["handlers"]);s(["placement","page-model","ta/Core/TA.FireEvent","ta/prwidgets","utils/nodePreserve","hotels/SpecialMessageUtil","common/Radio"],function(e,s,a,t,i,n,r){function l(e){if(e&&!n.wasMessageDismissed(e,p&&g)){var s=m.querySelector(".hsx_special_messaging > .collapsed");n.displayMessage(s,e)}}function c(e){var s=n.getMessageType(e);s&&s!==o&&!n.wasMessageDismissed(s,p&&g)&&(o=s,e&&e.getAttribute("data-targetEvent")!=d&&(e=e.querySelector('[data-targetEvent="'+d+'"]')),e&&m&&(i.treePreserve(m,e),t.initWidgets(m),l(o)))}var d="update-"+e.name,g=s.GEO_ID,m=document.getElementById(e.id),o=n.getMessageType(m),p=n.isMessagePersistableOncePerGeo(m);a.on(d,c),l(o);var u=/ *\bhidden\b/;return r("hsx_special_message").on("temporaryHide",function(e){e?m.className.match(u)||(m.className=m.className+" hidden"):m.className=m.className.replace(u,"")}),{}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"location_detail_contact_card","handlers",["handlers"]);e(["babel/babel-helpers","placement","lib/jquery-amd","common/Radio","ta/Core/TA.Record","utils/urlDecoder"],function(t,e,n,i,a,o){function c(){var t=document.getElementsByClassName("attraction_waypoint")[0];void 0!==t&&void 0!==e.params.waypointId&&(t.removeEventListener("click",m),t.addEventListener("click",function(){m(e.params.waypointId,t.getAttribute("href"))}))}function r(){g.trigger("open-trigger-clicked")}function d(t,e,n){if(k&&(p("WEBSITE"),n)){var i=o.decodeUrl(n);window.open(i,"_blank")}}function l(t,e,n){k&&(p("PHONE"),n&&(window.location=n))}function u(t,e,n){if(k&&(p("EMAIL"),n)){var i=o.decodeUrl(n);window.location="mailto:"+i}}function p(t){a.trackEventOnPage(v,t,s,0,!1)}function m(t,e){a.setEvtCookie("Attraction_Review_Page","Outer_POI_Click","Waypoint_Link",t,e)}var f=document.getElementById(e.id),k=f.querySelector(".contactInfo"),s=k&&k.getAttribute("data-locid"),v=k&&k.getAttribute("data-context"),b="10023"===(k&&k.getAttribute("data-placetypeid")),g=void 0;return g=i(b?"ar-map":"hr-map"),c(),{openMap:r,trackWebsiteClick:d,trackCallClick:l,trackEmailClick:u}})});
define("lib/jquery/jquery.hoverIntent",["lib/jquery-amd"],function(e){"use strict";var t,n,i={interval:100,sensitivity:6,timeout:0},o=0,r=function(e){t=e.pageX,n=e.pageY},u=function(e,i,o,v){return Math.sqrt((o.pX-t)*(o.pX-t)+(o.pY-n)*(o.pY-n))<v.sensitivity?(i.off(o.event,r),delete o.timeoutId,o.isActive=!0,e.pageX=t,e.pageY=n,delete o.pX,delete o.pY,v.over.apply(i[0],[e])):(o.pX=t,o.pY=n,o.timeoutId=setTimeout(function(){u(e,i,o,v)},v.interval),void 0)},v=function(e,t,n,i){return delete t.data("hoverIntent")[n.id],i.apply(t[0],[e])};return function(t,n,a){var s=o++,d=e.extend({},i);e.isPlainObject(t)?(d=e.extend(d,t),e.isFunction(d.out)||(d.out=d.over)):d=e.isFunction(n)?e.extend(d,{over:t,out:n,selector:a}):e.extend(d,{over:t,out:t,selector:n});var p=function(t){var n=e.extend({},t),i=e(this),o=i.data("hoverIntent");o||i.data("hoverIntent",o={});var a=o[s];a||(o[s]=a={id:s}),a.timeoutId&&(a.timeoutId=clearTimeout(a.timeoutId));var p=a.event="mousemove.hoverIntent.hoverIntent"+s;if("mouseenter"===t.type){if(a.isActive)return;a.pX=n.pageX,a.pY=n.pageY,i.off(p,r).on(p,r),a.timeoutId=setTimeout(function(){u(n,i,a,d)},d.interval)}else{if(!a.isActive)return;i.off(p,r),a.timeoutId=setTimeout(function(){v(n,i,a,d.out)},d.timeout)}};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},d.selector)}});
define("ta/util/Element",["lib/jquery-amd","utils/ajax","ta/Core/TA.Record","ns-exporter","ta/Core/TA.Event","lib/jquery/jquery.hoverIntent","utils/throttle"],function(t,e,i,n,o,r,a){function l(e,i){var n=e.style.fontSize||t(e).css("font-size"),o=n.replace(/[\d\.]/g,""),r=c(o,parseFloat(n)*i);e.style.fontSize=r+o}function s(){function e(e,i){var r=n[e],a=t(r.e);if(a.length>0){var l=r.inView;r.inView=!1,a.each(function(){return!r.inView&&void(r.inView=o.inViewport(this,i,r.persistentElmt,r.offset))}),!l&&r.inView&&(r.cb&&r.cb(r.e),r.multiple||n.splice(e,1))}}function i(){var e=t(window),i={};return i.top=e.scrollTop(),i.left=e.scrollLeft(),i.bottom=i.top+e.height(),i.right=i.left+e.width(),i}var n=[],o=this;this.add=function(i){n.push(i),e(n.length-1),n.length>0&&t(window).on("resize scroll",r)},this.inViewport=function(e,n,o,r){if(e=t(e),!e.is(":visible"))return!1;if(r=t.extend({top:0,left:0,right:0,bottom:0},r),o){var a=o.offsetHeight;a&&(0==o.offsetTop?r.bottom-=a:r.top+=a)}var l=e.offset();return n||(n=i()),n.bottom>=Math.max(l.top+r.top,0)&&n.right>=Math.max(l.left+r.left,0)&&n.top<=Math.max(l.top+e.height()+r.bottom,0)&&n.left<=Math.max(l.left+e.width()+r.right,0)};var r=a(function(){if(n.length){for(var o=i(),a=n.length-1;a>=0;a--)e(a,o);0==n.length&&t(window).off("resize scroll",r)}},300);t(window).on("load",r)}var f={};f.replaceContent=function(i,n,o,r){if(n=t(n),!n.find(".progresstab")){var a=o+(o.indexOf("?")==-1?"?":"&")+"xhr=true";n.append('<div class="progresstab"></div>'),e({url:a,success:function(t){n.html(t),window.behavior&&window.behavior.apply(n),r&&r(n.get(0))},evalScripts:!0}).get()}},f.spinner=function(e,i){t(i).parents(".spinnerReplaceable").children().each(function(t,e){e.toggle(e.hasClass("spinner"))})},f.limitLength=function(t,e,i){return!(e.value.length>=i)||(e.value=e.value.substr(0,i),!1)},f.updateValue=function(e,i){if(e=t(e),e.length>0&&e.val()!=i){e.val(i);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!1),e[0].dispatchEvent(n)}},f.keepInWindow=function(e,i){function n(t,e){var i=parseInt(t.get(0).style[e]);return i||0===i}if(e){e=t(e),i||(i={top:!0,right:!0,bottom:!0,left:!0});var o=2,r=e.offset();r.right=r.left+e.width(),r.bottom=r.top+e.height();var a=t(window),l=a.width(),s=a.height(),f=a.scrollTop(),c=a.scrollLeft();i.right&&n(e,"right")?r.left<c+o?e.css("right",l+c-e.width()-o):r.right>l-c-o&&e.css("right",o):i.left&&n(e,"left")&&(r.left<c+o?e.css("left",o):r.right>l-c-o&&e.setStyle("left",l+c-r.width-o)),i.bottom&&n(e,"bottom")?r.top<f+o?e.setStyle("bottom",s+f-r.height-o):r.bottom>s-f-o&&e.setStyle("bottom",o):i.top&&n(e,"top")&&(r.top<f+o?e.setStyle("top",o):r.bottom>s-f-o&&e.setStyle("top",s+f-r.height-o))}};var c=function(t,e){var i=e;return"px"==t?i=8:"em"==t?i=.5:"pt"==t?i=6:"%"==t&&(i=50),Math.max(e,i)};f.makeTextFit=function(e,i,n,r,a){a=a||1,r=r||8;var l=!1;if(t(e).each(function(e,o){o=t(o);var a=o.find(i);if(a){var s;if("number"==typeof n)s=n;else if(s=o.find(n).outerHeight(),void 0===s)return;var f=a.height();if(s<f){var c=a.css("font-size");if(c){var u=function(t,e){return"px"==e&&t>=r||"em"==e&&t>=.5||"pt"==e&&t>6||"%"==e&&t>=50},h=c.replace(/[\d\.]/g,""),d=parseFloat(c)*Math.sqrt(s/f);"px"==h&&(d=Math.max(parseInt(d),r)),u(d,h)&&(a.css("font-size",d+h),l=!0)}}}}),l>0&&a<4){o.fireEvent("makeTextFitResizedText");var s=this;setTimeout(function(){s.makeTextFit(e,i,n,r,a+1)},1)}},function(){function e(t){var e=!1;if(!t||t.clientWidth&&t.clientWidth<=0)return!1;for(var i=t.clientWidth,n=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),o=0;o<a&&t.scrollWidth>i;o++){var r=(i-n)/(t.scrollWidth-n);l(t,r),e=!0}return t.scrollWidth>i&&(l(t,s),e=!0),e}function i(t,e){var i=t.getAttribute("data-sizegroup"),n=parseFloat(t.style.fontSize);i&&(e[i]=Math.min(e[i]||Number.MAX_VALUE,n))}function n(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],o=[];n.forEach(function(t){o.push([t.scrollWidth,t])}),o.sort(function(t,e){return e[0]-t[0]});for(var r=0;r<o.length&&e(o[r][1]);r++);}}function r(t){var i;for(var n in t)t.hasOwnProperty(n)&&(i={},t[n].forEach(function(t){var n=t.innerHTML,o=i[n];void 0!==o?0!=o&&(t.style.fontSize=o):e(t)?i[n]=t.style.fontSize||0:i[n]=0}))}var a=4,s=.9;f.makeTextFitOneLine=function(i,n){var o=t(i);if(o.each(function(t,i){e(i)}),n){var r;o.each(function(e,i){var n=t(i).css("font-size");(!r||parseFloat(n)<parseFloat(r))&&(r=n)}),r&&o.css("font-size",r)}},f.autoResizeTextInNode=function(o){o=t(o);var a=t(".autoResize",o),l={},s={width:{},text:{}};a.filter(":visible").removeClass("autoResize").each(function(t,n){var o,r,a=n.getAttribute("data-resizeWidthGroup"),f=n.getAttribute("data-resizeTextGroup");a?(o=s.width,r=a):f&&(o=s.text,r=f),o?(o[r]||(o[r]=[]),o[r].push(n)):(e(n),i(n,l))}),n(s.width),r(s.text),a.each(function(t,e){var i=e.getAttribute("data-sizegroup");i&&(e.style.fontSize=l[i]+"px")})},o.queueForLoad(function(){require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("no-old-resize")||(o.on("refreshedDOMContent",function(t){f.autoResizeTextInNode(t)}),document.body&&f.autoResizeTextInNode(document.body))},"autoResize all targets on load")}(),f.makeSameWidth=function(e){var i=0;t(e).each(function(t,e){var n=Math.round(parseFloat(e.style.width));n&&n>i&&(i=n)}).css("width",i)},f.fitToContentsHorizontally=function(e,i,n,o){if(o=o||1,!(o<=0||i>n)){var r=function(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight};t(e).each(function(t,e){e.style.width=i;for(var a=i;a<n&&r(e);a+=o)e.style.width=a;r(e)&&(e.style.width=n)})}},f.scrollIntoView=function(e,i,n,o){if(e){e=t(e);var r=e.offset().top+(i||0);if(n){for(var a=t("html, body"),l=e.parent(),s=function(t){return("auto"===t.css("overflow-y")||"scroll"===t.css("overflow-y"))&&t[0].scrollHeight>t[0].clientHeight};l.length&&!l.is(a)&&!s(l);)l=l.parent();l.length&&!l.is(a)&&s(l)?r=l.offset().top+l.scrollTop()+(i||0):l=a,l.animate({scrollTop:r},{duration:300,complete:function(){o&&o()}})}else window.scrollTo(0,r),o&&o()}};var u=f.scrollTrackers=new s;return f.isScrolledIntoView=function(t,e,i){return u.inViewport(t,null,e,i)},f.doIfElementIsVisible=function(t,e,i,n){t&&u.add({e:t,cb:function(){return e.apply(null,i),!0},offset:n})},f.trackWhenScrolledIntoView=function(t,e,n){if(t&&e){var o=function(){i.trackEventOnPage.apply(i,e)};u.add({e:t,cb:o,multiple:n})}},f.getTotalWidth=function(e){return t(e).outerWidth(!0)||0},f.getTotalHeight=function(e){return t(e).outerHeight(!0)||0},f.hoverIntent=function(e,i){r.bind(t(e),i)()},n.exportTo(f,"ta.util.element"),f});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_detail_review_highlight","handlers",["handlers"]);t(["placement","api-mod","ta/Core/TA.Event","ta/util/Element","ta/util/Cookie"],function(e,t,n,i,a){var r=function(e){e.preventDefault();var t=this.getAttribute("data-target-tab");n.fireEvent("TabHeader_clickTab",document.getElementById(t),300)},o=function(e,n){var i=document.getElementById("review_"+e);i?t.fireEvent(i,"review:expand",[i,e]):window.location.href=n},l=function(e,t){var n=document.getElementById("review_"+e);n?i.scrollIntoView(n,-54):window.location.href=t},d=function(e){e&&e>0&&a.setPIDCookie(e)};return n.queueForReady(function(){t.addEvent("#"+e.id+" [data-target-tab]","click",r)},"initialize "+e.name),{expandReview:o,scrollIfPresent:l,warOnClick:d}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_detail_reviews_card","handlers",["handlers"]);t(["babel/babel-helpers","placement","lib/jquery-amd","ta/Core/TA.Event","ta/util/Cookie","common/page-filters","common/Radio"],function(e,t,a,n,r,i,o){function c(e){if(n.hasEventListener(p)){e.preventDefault();var t=a(this).attr("data-target-tab");u(t)}b.events[p]&&(e.preventDefault(),f(m))}function d(e){var t=a(e.target).attr("data-keyword").toLowerCase();i.clearAll("t"),i.set("t",t),n.hasEventListener(p)&&(e.preventDefault(),u("TABS_REVIEWS")),b.events[p]&&(e.preventDefault(),f(m))}function l(e){var t=a(e.target).attr("data-war-pid");v(t)}function u(e){var t=document.getElementById(e);n.fireEvent(p,t,300)}function f(e){b.trigger(p,e)}function s(){var e=a("#"+t.id);a(".reviewSnippets.defer",e).length&&t.require(["trhtml!deferred/translatedSnippets"],function(t){a(".reviewSnippets",e).replaceWith(t)})}function v(e){e&&e>0&&r.setPIDCookie(e)}var p="TabHeader_clickTab",b=o("AttractionReviewTabs"),m="REVIEWS";n.queueForReady(function(){s(),a("#"+t.id+" [data-target-tab]").on("click",c),a("#"+t.id+" [data-keyword]").on("click",d),a("#"+t.id+" [data-war-button]").on("click",l)},"initialize "+t.name)})});
require(["ta/prwidgets"],function(n){var t=n.define.bind(n,"common_north_star_pagination","handlers",["handlers"]);t(["widget","vanillajs","ta/Core/TA.Event","common/trackingStreams"],function(n,t,i,a){"use strict";function e(n,t){i.fireEvent("paginationChanged",t)}function r(n,t,i,e,r){a.trackEvent(i,"click",e,r)}return{paginate:e,trackClick:r}})});
define("ta/util/ReCaptcha",["vanillajs","ns-exporter","common/trackingStreams"],function(e,t,r){"use strict";var n=!1,a={},c={},o="",i=function(e){if(e<0)return 300;switch(e){case 0:return 0;case 1:return 250;case 2:return 500;case 3:return 1e3;default:return 2e3}},l=function(e,t){require.defined("ta/util/Error")?require("ta/util/Error").record(t+": "+e):ta.merror&&ta.merror.recordError&&"function"==typeof ta.merror.recordError&&ta.merror.recordError(t,null,null,null,e)},u=function(){r.trackEvent("captcha","recaptcha","displayed")},d=function(e,t){var r=document.getElementById(t);return r&&"INPUT"===r.tagName?void(r.value=e||""):void l(null,"The recaptcha input id was not found on the page: "+t)},p={init:function(e,t,r,a){try{if(c[r]=a,n)return;e||l(null,"No language specified for recaptcha."),t&&(o=t);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.defer=!0,i.src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+e,document.getElementsByTagName("head")[0].appendChild(i),n=!0}catch(e){l(e,"Could not inject recaptcha script on to page.")}},reset:function(e){if(!e)return void l(null,"No reset key specified.");if(a[e]||0===a[e])try{"undefined"!=typeof grecaptcha&&grecaptcha&&grecaptcha.reset&&"function"==typeof grecaptcha.reset&&grecaptcha.reset(a[e])}catch(t){l(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in a)a.hasOwnProperty(e)&&p.reset(e)},clear:function(){a={}},checkGrecaptcha:function(){return!("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)},checkCaptchaRendered:function(e){return!(!a[e]&&0!==a[e])},showSync:function(e,t,r){var n=0,a=window.setInterval(function(){return++n>=40?(window.clearInterval(a),void l(null,"Recaptcha JS was not loaded on the page.")):void("undefined"!=typeof grecaptcha&&(p.show(e,t,r),window.clearInterval(a)))},250)},showAll:function(e){for(var t in c)c.hasOwnProperty(t)&&p.show(e,t,c[t])},waitForElm:function(e,t,r){var n=0,a=function(){if(++n>=5)return window.clearInterval(c),void l(null,"Recaptcha element id was not loaded on the page."+t);var a=document.getElementById(t);a&&(window.clearInterval(c),p.show(e,t,r))},c=window.setInterval(a,250)},execute:function(){return"undefined"==typeof grecaptcha||"function"!=typeof grecaptcha.execute?void l(null,"Calling execute while captcha is not rendered"):void grecaptcha.execute()},show:function(e,t,r,n,c,f,h){try{if("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)return void l(null,"Recaptcha JS was not loaded on the page.");if(!e||!t||!r)return void l(null,"Please pass a site key, element id, and input id.");var s=document.getElementById(t);if(!s)return void p.waitForElm(e,t,r);if(a[t]&&"object"==typeof a[t])return;var g=0,w=i(g),y=document.getElementById("captchaSpinner"),m=function(){if(1==g&&null!==y&&(y.style.display="block"),++g>=5){window.clearTimeout(v),y&&(y.style.display="none"),l(null,"Couldn't load recaptcha"),"function"==typeof h&&h.call();var u=document.getElementById("captchaError");return void(null!==u&&(u.className="captchaError errorMsg warning wrap",u.innerHTML=o))}if("undefined"==typeof a[t]){var s=n?"compact":"normal";c&&(s="invisible"),a[t]=grecaptcha.render(t,{"sitekey":e,"theme":"light","type":"image","tabindex":0,"size":s,"callback":function(e){d(e,r),"function"==typeof f&&f(e,r)},"expired-callback":function(){p.reset(t)}}),w=i(g),v=window.setTimeout(m,w)}else window.clearTimeout(v),y&&(y.style.display="none")},v=window.setTimeout(m,w);u()}catch(e){l(e,"Error loading recaptcha.")}}};return t.exportTo(p,"ta.util.ReCaptcha"),p});
define("ta/util/GeeTest",["ns-exporter","common/trackingStreams"],function(e,t){"use strict";var n=!1,r="float",o={},a={},c="",i=t.error,s=function(){t.trackEvent("captcha","geetest","displayed")},u=function(e){var t=e.getElementsByClassName("gt_guide_tip");t&&t.length>0&&c&&(t[0].innerHTML=c)},l=function(){},d={init:function(e,t){try{if(n||"undefined"!=typeof Geetest&&Geetest)return;r=t?t:r,c=e;var o=Math.floor(1e4*Math.random())+Date.now(),a="geetest_"+o;window[a]=l;var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.defer=!0,s.src="https://api.geetest.com/get.php?callback="+a,document.getElementsByTagName("head")[0].appendChild(s),n=!0}catch(e){i(e,"Could not inject geetest script on to page.")}},reset:function(e){try{o[e]&&"function"==typeof o[e].refresh&&(o[e].refresh(),a[e]=null)}catch(t){i(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in o)o.hasOwnProperty(e)&&d.reset(e)},clear:function(){o={},a={}},waitForLoad:function(){return new Promise(function(e,t){var n=0,r=window.setInterval(function(){return++n>=40?(window.clearTimeout(r),i(null,"GeeTest JS was not loaded on the page."),void t()):void("undefined"!=typeof Geetest&&(window.clearTimeout(r),e()))},250)})},showSync:function(e,t,n){return d.waitForLoad().then(function(){return d.show(e,t,n)})},show:function(e,t,n){try{if("undefined"==typeof Geetest||!Geetest)return i(null,"GeeTest JS was not loaded on the page."),Promise.reject();if(!e||!t)return i(null,"Please pass a site key and element id."),Promise.reject();var c=document.getElementById(t);if(!c)return i(null,"The geetest element id was not found on the page: "+t),Promise.reject();("object"!=typeof o[t]||n)&&(o[t]=new Geetest({gt:e,product:r,https:!0}),o[t].onReady(function(){u(c)}).appendTo(c));var l=o[t];return a[t]=new Promise(function(e){l.onSuccess(function(){e({challenge:c.querySelector(".geetest_challenge").value,validate:c.querySelector(".geetest_validate").value,seccode:c.querySelector(".geetest_seccode").value})})}),s(),a[t]}catch(e){return i(e,"Error loading geetest captcha."),Promise.reject()}},checkGeeTestRendered:function(e){return!!o[e]}};return e.exportTo(d,"ta.util.GeeTest"),d});
define("overlays/styles/default",["lib/jquery-amd"],function(t){"use strict";function e(e,a,i,s){this.container=t("<"+(s||"div")+"/>").addClass("ui_overlay").addClass(e||"").get(0),a&&(this.header=t("<div/>",{"class":"header_text"}).html(a).appendTo(this.container).get(0)),i&&(this.subheader=t("<div/>").addClass("subheader_text").html(i).appendTo(this.container).get(0)),this.contentElement=t("<div/>").addClass("body_text").appendTo(this.container).get(0),this.close=t("<div/>").addClass("ui_close_x").appendTo(this.container).get(0)}var a=function(a,i,s,n,d,o){return i=(i||"")+(a&&" "+a.getAttribute("data-overlay")||""),s=s||a&&a.getAttribute("data-header")||"",n=n||a&&a.getAttribute("data-subheader")||"",function(){e.call(this,i,s,n,o),this.updateContent(d),t(this.close).on("click",function(){this.hide.apply(this,arguments.length?arguments:["close-button"])}.bind(this))}};return a});
define("overlays/position/conditional",["overlays/position/base"],function(o){"use strict";return function(i,n,t){var s=o();s.label="conditional";var f;return s.onPosition=function(){var o=i()?n:t;f&&o!==f&&f.offPosition&&f.offPosition.apply(this),(f=o).onPosition&&f.onPosition.apply(this)},s.offPosition=function(){f=null;var o=i()?n:t;o.offPosition&&o.offPosition.apply(this)},s}});
define("overlays/position/fullscreen",["lib/jquery-amd","overlays/position/base","overlays/options/disableBodyScroll"],function(o,i,t){"use strict";return function(n){function s(){e.call(this),l.call(this)}var e=i(),l=t(n);return s.onPosition=e.onPosition=function(){o(this.container).css({position:"fixed",top:0,left:0,bottom:0,right:0,height:"auto",width:"auto"}).addClass("fullscreen")},s.offPosition=e.offPosition=function(){o(this.container).removeClass("fullscreen")},s}});
define("overlays/options/closeOnBackButton",[],function(){"use strict";return function(n){if(!window.history||!window.history.pushState)return function(){};var t=function(t){return function(){location.hash!==n&&t&&t.isOpen()&&t.hide()}};return function(){var o=this,i=t(o);o.on("show",function(){history.pushState({showOverlayHash:n},"",location.href.replace(/#.*|$/,"#"+n)),window.addEventListener("popstate",i,!1)}).on("hide",function(){window.removeEventListener("popstate",i,!1),location.hash==="#"+n&&history.back()})}}});
define("pages/inappropriate_vote_stub",["ta","ta/util/Element","ta/Core/TA.Store","vanillajs","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/closeOnEscape","overlays/position/autosize","overlays/options/autoReposition","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnBackButton","overlays/styles/windowshade","overlays/options/ajax"],function(e,o,t,n,i,s,r,a,l,p,d,u,c,w,v,y,m){"use strict";function _(e){o.isScrolledIntoView(e.elmt)||o.scrollIntoView(e.elmt),window.JS_SECURITY_TOKEN=e.token||window.JS_SECURITY_TOKEN,!window.JS_SECURITY_TOKEN&&window.ta.m&&window.ta.m.secureToken&&(window.JS_SECURITY_TOKEN=window.ta.m.secureToken);var n="/ReportIAP?token="+window.JS_SECURITY_TOKEN+"&step=START&voteContentType="+e.voteContentType;n+=e.owner?"&action=explain&reason=21&reviewid="+e.reviewid+"&isGeo="+e.isGeo+"&locationid="+e.locationid:"&action=reportIAP&contentId="+e.contentId,E?(E.updateContent(n),E.sourceElement=e.elmt,require("pages/inappropriate_vote").updateContentId(e.contentId),E.show()):require(["trjs!inappropriate_vote_dlg"],function(){E=new i(e.elmt,[s(e.elmt,"iapFlyout ui_modal"),r(a.mobile,l(),p()),d,u(0),c,y("light"),w,v("ReportProblem"),m(n,{})]),E.on("contentLoaded",function(){E.sourceElement.getAttribute("data-owner")||require("pages/inappropriate_vote").initUI(E,E.sourceElement)}),E.show(),t.store("iapFlyout",E)})}var E,T={};return T.open=function(e,o,t){t.elmt=t.elmt||o;var n={flow:"CORE_COMBINED",pid:t.reg_pid||39841,userRequestedForce:!0,loggedInBypass:!0,onSuccess:_.bind(null,t)};require(["trjs!ta/registration/RegOverlay"],function(e){e.show({type:"dummy"},t.elmt,n)})},T});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"common_location_topic_resp","handlers",["handlers"]);r(["widget","overlays/loading-spinner","ta/prwidgets","ajax-request","common/trackingStreams","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","ta/Core/TA.FireEvent","utils/classnameUtils"],function(e,r,t,n,a,l,i,o,s,c){"use strict";function d(){var e=O.querySelector(".answerForm");c.removeClass(e,"hidden"),O.querySelector(".answerText").focus(),a.trackEvent(I,"click","answer")}function u(n,l,i){var o=O.querySelector(".answerList");o&&(o.innerHTML=r(),e.require(["trhtml!LOCATION_TOPIC_WIDGETS/HSX_RESP?t="+i+"&o=0&limit=20"],function(e){o.innerHTML=e.innerHTML,t.initWidgets(o),c.addClass(O.querySelector(".showAll"),"hidden"),c.removeClass(O.querySelector(".hideAll"),"hidden");var r=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(r,function(e){c.removeClass(e,"hidden")})}),a.trackEvent(I,"click","show_all_answers"))}function h(){c.addClass(O.querySelector(".hideAll"),"hidden"),c.removeClass(O.querySelector(".showAll"),"hidden");var e=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(e,function(e){c.addClass(e,"hidden")}),c.removeClass(O.querySelector(".answerList > *"),"hidden")}function v(){c.addClass(O.querySelector(".delete"),"hidden"),c.removeClass(O.querySelector(".confirmDelete"),"hidden"),c.removeClass(O.querySelector(".cancelDelete"),"hidden"),c.removeClass(O.querySelector(".confirmDeleteExplanation"),"hidden")}function f(r,t,l,i){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden"),s.fireEvent("qaQuestionDeleted");var o=function(){var r=O.parentElement;r.removeChild(O),r.querySelector("[data-prwidget-name="+e.name+"]")||s.fireEvent("qaLastQuestionDeleted")},d=function(e){a.error(I,"Failed to delete answer (location_topic_resp/handlers)",e)};n("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dt","tpcid":l,"token":i},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:l,value:0,noninteraction:!1}}).then(o,d)}function m(){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden")}function y(){var e=O.querySelector(".answerText");if(!e.value.length)return void e.focus();var r={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(r))S();else{var t={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:function(){S()}};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,r){e.showRegOverlay(null,null,r.mobile(),t)})}}),!1}function p(){c.addClass(O.querySelector(".answerForm"),"hidden")}function q(e){return e?e.value:""}function S(){var r=O.querySelector(".answerForm"),a=r.querySelector(".answerText"),o={act:"ap",psttxt:q(a),tpcid:r.topicid.value,pid:-1,altsessid:r.altsessid.value,token:r.token.value,lcid:r.lcid.value,"g-recaptcha-response":q(r.querySelector(".recaptcha_input")),geetest_challenge:q(r.geetest_challenge),geetest_validate:q(r.geetest_validate),geetest_seccode:q(r.geetest_seccode),useJson:!0},s=r.querySelector(".formSubmit");c.addClass(s,"loading");var d=function(n){l.resetAll(),i.resetAll(),w(n),c.removeClass(s,"loading"),c.addClass(r,"hidden");var o=JSON.parse(n);o.postingId&&e.require(["trhtml!LOCATION_POSTING_WIDGETS/HSX_RESP?lp="+o.postingId],function(e){var r=O.querySelector(".answerList");r.insertBefore(e,r.firstChild),t.initWidgets(r),a.value="",C()})},u=function(e){l.resetAll(),i.resetAll(),null!==e&&w(e),c.removeClass(s,"loading")};n("/AnswersAjax",{method:"POST",dataType:"html",data:o,trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_create_answer",context:o.tpcid,value:0,noninteraction:!1}}).then(d,u)}function C(){O.querySelector(".errors").innerHTML=""}function w(e){try{var r=JSON.parse(e)}catch(e){return}if(r.ALERT&&(r.errors=[r.ALERT]),r.errors&&r.errors.length>0){var t=O.querySelector(".errors",O);t.innerHTML="";for(var n=0;n<r.errors.length;n++){var a=document.createElement("li");a.innerHTML=r.errors[n],t.appendChild(a)}c.removeClass(t,"hidden")}}function _(e,r,t){o.open(e,r,{voteContentType:"LOCATION_TOPIC",contentId:t})}function g(e,r,t){a.trackEvent(I,"click","answers_faq_answer_form",t)}function A(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=O.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function E(e,r){return require(["trjs!members/memberOverlay"],function(t){t.initMemberOverlay(e,r,r.getAttribute("data-overlay-id"),"Answers","user_name_photo"),a.trackEvent(I,"click","show_reviewer_info_window")}),!1}function T(e){require(["trjs!overlays/widgetoverlays"],function(r){r.showLightbox("QA_GET_VERIFIED",{locationId:e},{})})}function k(e,r,t){require(["trjs!overlays/widgetoverlays"],function(e){e.showLightbox("QA_POSTING_GUIDELINES",{locationId:t},{})})}var O=e.element,I="faq";return{answerButtonClick:d,showAllClick:u,hideAllClick:h,deleteClick:v,confirmDeleteClick:f,cancelDeleteClick:m,clearErrors:C,submitAnswer:y,cancelAnswer:p,moveCaptchaHere:A,iapVote:_,trackAnswerFormClick:g,initMemberOverlay:E,initGetVerifiedOverlay:T,initPostingGuidelinesOverlay:k}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_location_posting_resp","handlers",["handlers"]);t(["widget","vanillajs","ta/prwidgets","common/trackingStreams","pages/inappropriate_vote_stub","ajax-request","utils/classnameUtils"],function(e,t,n,r,a,o,i){"use strict";function l(e,t,n,a,o){d(n,a,o,1),r.trackEvent(y,"click","upvote")}function s(e,t,n,a,o){d(n,a,o,-1),r.trackEvent(y,"click","downvote")}function c(e,t,n,a){var i=function(e){var t=JSON.parse(e),n=q.querySelector(".score");n&&(n.innerHTML=t.votes);var r=q.querySelector(".voteCount");r&&(r.dataset.content=t.message,r.innerHTML=t.text),require(["trjs!overlays/uiOverlay"],function(e){e(null,r)})},l=function(e){r.error(y,"Failed to vote on Q&A location_posting_resp",e)};o("/AnswersAjax",{method:"POST",dataType:"json",trackEvent:{module:"answers_faq_vote",action:"answers_faq_vote_add",context:e,value:a,noninteraction:!1},data:{altsessid:n,act:"av",pstid:e,vs:a,pid:-1,token:t,useJson:!0}}).then(i,l)}function d(e,t,n,r){require(["trjs!ta/registration/AuthCheck"],function(a){if(a.isAuthorized())c(e,t,n,r);else{var o={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:function(){c(e,t,n,r)}};require(["trjs!ta/registration/RegOverlay"],function(e){e.show(null,null,o)})}})}function u(){i.addClass(q.querySelector(".delete"),"hidden"),i.removeClass(q.querySelector(".confirmDelete"),"hidden"),i.removeClass(q.querySelector(".cancelDelete"),"hidden"),i.removeClass(q.querySelector(".confirmDeleteExplanation"),"hidden")}function v(e,t,n,a){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden");var l=function(e){q.parentElement.removeChild(q)},s=function(e){r.error(y,"Failed to delete posting from Q&A",e)};o("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dp","pstid":n,"token":a},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:n,value:0,noninteraction:!1}}).then(l,s)}function f(){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden")}function m(e,t,n){a.open(e,t,{voteContentType:"LOCATION_POSTING",contentId:n}),r.trackEvent(y,"click","flag")}function p(){var e=q.querySelector(".abbreviated");i.addClass(e,"hidden");var t=q.querySelector(".unabbreviated");i.removeClass(t,"hidden")}function h(e,t){return require(["trjs!members/memberOverlay"],function(n){n.initMemberOverlay(e,t,t.getAttribute("data-overlay-id"),"Answers","user_name_photo"),r.trackEvent(y,"click","show_reviewer_info_window")}),!1}var q=e.element,y="faq";return{voteUp:l,voteDown:s,deleteClick:u,confirmDeleteClick:v,cancelDeleteClick:f,iapVote:m,unabbreviateContent:p,initMemberOverlay:h}})});
define("hotels/HRContentBlockUtils",["ta/prwidgets","utils/classnameUtils","utils/objutils"],function(e,t,i){function n(e,i){var n=!t.hasClass(e,u)||i,o=e&&e.querySelector(".block_body_bottom"),d=o&&o.querySelector(".inner");o&&d&&(o.style.height=n?d.offsetHeight+"px":0,t.toggleClass(e,u,n))}function o(e){delete c[e]}function d(t,d,r){var l=t&&document.getElementById(t.id);if(l)if(c[t.id])(r||n)(l);else{if(c[t.id]===!1)return;c[t.id]=!1,t.requestAJAXPlacement(function(i){var d=l.querySelector(".block_body_bottom .inner");d&&i?(c[t.id]=!0,d.innerHTML=i,e.initWidgets(d),require.defined("mobile/lite/image-loader")&&require("mobile/lite/image-loader").init(200,d),setTimeout(r||n,0,l)):o(t.id)},function(){o(t.id)},i.extend({"more_content_request":!0},d))}}function r(t,i,n){var d=t&&document.getElementById(t.id);d&&(i.updateContentRequest=!0,c[t.id]!==!1&&(c[t.id]=!1,t.requestAJAXPlacement(function(i){var r=d.querySelector(".block_body_top");r&&i?(c[t.id]=!0,r.innerHTML=i,e.initWidgets(r),n&&n(!0)):(o(t.id),n&&n(!1))},function(){o(t.id),n&&n(!1)},i)))}function l(d,r){var l=d&&document.getElementById(d.id);if(l)if(c[d.id])n(l,!0);else{if(c[d.id]===!1)return;c[d.id]=!1,d.requestAJAXPlacement(function(i){var r=l.querySelector(".block_body_bottom .inner");if(r&&i){delete c[d.id];var u=document.createElement("div");if(u.innerHTML=i,u=u.firstElementChild,r.appendChild(u),t.hasClass(u,"last_batch")){var s=l.querySelector(".block_footer");s&&(s.style.display="none")}e.initWidgets(r),setTimeout(n,0,l,!0)}else o(d.id)},function(){o(d.id)},i.extend({"more_content_request":!0},r))}}var u="expanded",c={};return{expandContent:d,updateContent:r,expandContentNoToggle:l,toggleSection:n}});
define("overlays/options/pinnable",["vanillajs","api-mod","ta/Core/TA.Event"],function(i,n,e){"use strict";return function(){function i(){if(c.pinned&&n.inDocument(c.container)&&!o){var i=c.invisibleBackdrop?"ui_backdrop":"ui_backdrop dark";o=n.createElement("div",{"class":i}),o.setAttribute("style","z-index:499"),n.addEvent(o,"click",function(){c.hide()}),c.domParent.appendChild(o)}}function t(n){c.pinned=!0,c.invisibleBackdrop=n,i()}var o,c=this;this.pinned=!1,this.invisibleBackdrop=!1,this.pin=t,this.on("show",function(){i(),e.on(c.sourceElement,"click",t)}),this.on("hide",function(){o&&(c.domParent.removeChild(o),o=void 0,e.off(c.sourceElement,"click",t))})}});
define("overlays/ux/elementToggle",["lib/jquery-amd"],function(n){"use strict";return function(t,e){e&&(e["on"+t.type]=null);var i=t.type||"click";return function(){n(this.sourceElement).on(i,function(n){n.stopPropagation(),this.isOpen()?"click"==i&&this.hide():this.show()}.bind(this))}}});
define("overlays/support/radio",["common/Radio"],function(n){"use strict";return{hide:function(o,i){return o||(o="overlays"),i||(i="shown"),function(){var t=this,u=n(o),e=function(n){n!=t&&t.hide()};this.on("show",function(){u.on(i,e)}).on("hide",function(){u.off(i,e)})}},announce:function(o,i,t){return i||(i="overlays"),t||(t="shown"),function(){var u=this,e=n(i);this.on("show",function(){e.emit(t,u,o)})}}}});
define("styleguide/overlays/Modal",["lib/jquery-amd","utils/responsive","overlays/Overlay","overlays/styles/default","overlays/styles/windowshade","overlays/position/autosize","overlays/position/conditional","overlays/position/center","overlays/position/fullscreen","overlays/options/repositionOnEvent","overlays/ux/elementToggle","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnDocClick","overlays/support/radio"],function(e,o,s,i,l,r,n,a,t,y,u,v,d,p){"use strict";return function(e,c){var h=[i(c,"ui_modal"),n(o.mobile,t(),a()),r(0),y(window,"resize"),p.hide(),p.announce(),Array.prototype.slice.call(arguments,2)];e&&h.push(u(e,c));var w=c&&c.getAttribute("data-sg-overlay")||"";return w.indexOf("nobackdrop")<0?h.push(l(),v):h.push(d),new s(c,h).show()}});
define("overlays/widgetoverlays",["ta","api-mod","overlays/Overlay","overlays/styles/popover","overlays/styles/modal","overlays/styles/dropdown","overlays/styles/windowshade","overlays/position","overlays/options/ajax","overlays/options/pinnable","overlays/options/closeOnWindowshadeClick","overlays/options/repositionOnEvent","styleguide/overlays/Modal"],function(e,i,n,r,t,o,a,s,l,v,d,m,u){"use strict";function p(e,i){var n=e.prwidget_ovl||(e.prwidget_ovl={key:i});return n.key!==i&&(n.showtimer&&(clearTimeout(n.showtimer),delete n.showtimer),n.overlay&&(n.overlay.destroy(),delete n.overlay),n.key=i),n}function c(){var n=this,r=n.prwidget_ovl;if(r&&(r.showtimer&&(clearTimeout(r.showtimer),delete r.showtimer),!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body)))){var t=r.overlay;!t||t.pinned||t.prw_leaveTimer||(t.prw_leaveTimer=setTimeout(function(){t.pinned||t.hide()},250))}}function y(){var e=this;e&&(e.prw_entered=!0,e.prw_leaveTimer&&(clearTimeout(e.prw_leaveTimer),delete e.prw_leaveTimer))}function w(){if(!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body))){var n=this;!n||n.pinned||n.prw_leaveTimer||(n.prw_leaveTimer=setTimeout(function(){n.pinned||n.hide()},250))}}function h(e,n){var r=!e.pinned&&y.bind(e),t=!e.pinned&&w.bind(e),o=function(){r&&i.removeEvent(e.container,"mouseenter",r),t&&i.removeEvent(e.container,"mouseleave",t),e.off("hide",o),delete n.overlay};r&&i.addEvent(e.container,"mouseenter",r),t&&i.addEvent(e.container,"mouseleave",t),e.on("hide",o)}function f(e,i){var n=i.url||"/OverlayWidgetAjax?Mode="+encodeURIComponent(e);return"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),n}function g(e,t,o,a,d){var m=p(e,o);if(m.showtimer&&(clearTimeout(m.showtimer),delete m.showtimer),!m.overlay){var u=(d.position||"wideside").split(" ").filter(function(e){return!!e.length}),c=u.shift();if("wideside"===c)try{var y=i.getPosition(e).left,w=i.getSize(e).x,g=i.getSize(document.body).x;c=y>g-y-w?"leftEvenInRtl":"rightEvenInRtl"}catch(e){c="right"}var T=""|d.classes,_=f(o,d);d.reqParams=a,d.inlineResourceId=o,d.isWidget=!0;var x=[r(e,c,T,""),l(_,d),s[c](u,!1),v];d.mixins&&d.mixins.length>0&&x.push.apply(x,d.mixins);var E=new n(e,x);"click"===t&&E.pin(d.invisibleBackdrop),E.show(),m.overlay=E,h(E,m),d.onLoad&&E.on("contentsUpdated",d.onLoad)}}function T(e,i,r){r=r||{};var o=(r.position||"center").trim().split(" ")[0],v=f(e,r);r.reqParams=i,r.inlineResourceId=e,r.isWidget=!0;var u=[t(null,null,r.classes),l(v,r),s[o](void 0,!0),a(),d,m(window,"resize")];r.mixins&&r.mixins.length>0&&u.push.apply(u,r.mixins);var p=null;r.sourceElement&&(p=r.sourceElement);var c=new n(p,u);return c.show(),c}function _(e,i,n){n=n||{};var r=f(e,n);n.reqParams=i,n.inlineResourceId=e,n.isWidget=!0;var t=[l(r,n)];return n.mixins&&n.mixins.length>0&&t.push.apply(t,n.mixins),u(null,n.sourceElement||null,t)}function x(e,n,r,t,o){e=e||window.event,n=n||e.currentTarget;var a=e&&e.type||"click";e&&i.stopEvent(e);var s=p(n,r);if("click"===a)s.overlay||g(n,a,r,t,o);else{if(s.overlay)return s.overlay.prw_leaveTimer&&(clearTimeout(s.overlay.prw_leaveTimer),delete s.overlay.prw_leaveTimer),!1;if(s.showtimer)return!1;s.hasLeaveHandler||(i.removeEvent(n,"mouseleave",c),i.addEvent(n,"mouseleave",c),s.hasLeaveHandler=!0),s.showtimer=setTimeout(function(){g(n,a,r,t,o)},o.delay||300)}return!1}function E(e,r,t,a,v){e=e||window.event,r=r||e.currentTarget,e&&i.stopEvent(e),v=v||{};var d=(v.position||"below").trim().split(" ")[0],m=f(t,v);v.reqParams=a,v.inlineResourceId=t,v.isWidget=!0;var u=[o(r,d,v.classes,null,v.containerStyles,v.elementType||"div"),l(m,v),s[d](void 0,!0)];v.mixins&&v.mixins.length>0&&u.push.apply(u,v.mixins);var p=new n(r,u);return p.show(),p}return{triggerFlyout:x,showLightbox:T,showDropdown:E,showStyleguideModal:_}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_qa_resp","handlers",["handlers"]);t(["placement","vanillajs","hotels/HRContentBlockUtils","ta/util/ReCaptcha","ta/util/GeeTest","common/trackingStreams","ajax-request","overlays/widgetoverlays","ta/Core/TA.Event","utils/classnameUtils","ta/util/Element"],function(e,t,n,r,a,o,i,s,l,u,c){function d(){var e=S.querySelector(".askQuestionForm");u.removeClass(e,"hidden");var t=S.querySelector(".topicText");t&&t.focus(),o.trackEvent(_,"click","ask_a_question"),o.trackEvent("content_submission|question","start_submission","POI|Hotel")}function v(){var e=S.querySelector(".askQuestionForm");u.addClass(e,"hidden")}function f(){var e=S.querySelector(".topicText");if(!e.value.length)return void e.focus();var t={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(t))m();else{var n={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:m};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,t){e.showRegOverlay(null,null,t.mobile(),n)})}}),!1}function h(e){return e?e.value:""}function m(){var e=S.querySelector(".askQuestionForm");if(e){var t=e.querySelector(".topicText").value,n=!!e.querySelector("[name=optin]:checked"),s={act:n?"ats":"at",topicText:t,detail:e.detail.value,pid:-1,optIn:n,altsessid:e.altsessid.value,token:e.token.value,"g-recaptcha-response":h(e.querySelector(".recaptcha_input")),geetest_challenge:h(e.geetest_challenge),geetest_validate:h(e.geetest_validate),geetest_seccode:h(e.geetest_seccode),redirect:!0},l=e.querySelector(".formSubmit");u.addClass(l,"loading");var c=function(e){r.resetAll(),a.resetAll(),p(e)||(S.querySelector(".topicText").value="",window.location=e),u.removeClass(l,"loading")},d=function(e){if(r.resetAll(),a.resetAll(),null!==e){var t=p(e);t||o.error("Unexpected Error submitting question",e)}u.removeClass(l,"loading")};i("/AnswersAjax",{method:"POST",url:"MetaPlacementAjax",dataType:"html",data:s,evalScripts:!0,trackEvent:{module:"answers_faq_question_crud",action:"answers_faq_create_question",context:s.detail,value:0,noninteraction:!1}}).then(c,d)}}function p(e){var t=null;try{t=JSON.parse(e)}catch(e){return!1}if(t&&t.ALERT&&(t.errors=[t.ALERT]),t&&t.errors&&t.errors.length>0){var n=S.querySelector(".errors");n.innerHTML="";for(var r=0;r<t.errors.length;r++){var a=document.createElement("li");a.innerHTML=t.errors[r],n.appendChild(a)}u.removeClass(n,"hidden")}return!0}function q(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=S.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function g(e){s.showLightbox("QA_POSTING_GUIDELINES",{locationId:e},{})}var S=document.getElementById(e.id),_="faq";return l.on("paginationChanged",function(t){document.getElementById(e.id).contains(t)&&(l.fireEvent("TabHeader_clickTab",document.getElementById("TABS_ANSWERS")),n.updateContent(e,{"offset":t.getAttribute("data-offset")},function(){l.fireEvent("qaListUpdated")}))}),l.on("qaQuestionDeleted",q),l.on("qaLastQuestionDeleted",d),l.queueForLoad(function(){var t=S.querySelector(".shouldUpdateOnLoad");t&&t.getAttribute("data-should-update")&&n.updateContent(e,{"offset":"0"})}),c.trackWhenScrolledIntoView("#"+e.id,["faq","in_view"]),{moreClick:function(){n.expandContent(e)},askQuestionClick:d,submitAskQuestion:f,cancelAskQuestion:v,moveCaptchaHere:q,initPostingGuidelinesOverlay:g}})});
require(["ta/p13n/placements"],function(t){var i=t.define.bind(t,"location_reviews_container_resp","handler",["handler"]);i(["placement","lib/jquery-amd","overlays/widgetoverlays","common/trackingStreams"],function(t,i,e,n){function r(){a?n.trackEvent(u,"click_left_arrow",a):h?n.trackEvent(u,"click_right_arrow",h):n.trackEvent(u,"supplier_review_scroll",l().join()),a=null,h=null}function o(){return d[0].scrollWidth-d.scrollLeft()<=Math.ceil(d.width())}function l(){var t=d.width(),e=[];return i(".reviewContainer:visible").each(function(){var n=i(this).offset().left-d.offset().left,r=n+i(this).width();n>=0&&r<=t&&e.push(parseInt(i(this).attr("id").split("_").pop())+1)}),e}function c(t){var e=t.offset().top,r=e+t.outerHeight(),o=i(window).scrollTop(),l=o+i(window).height();r>o&&e<l&&(g||(g=!0,n.trackEvent(u,f)))}function s(){i(".reviewTitle").each(function(){for(var t=i(this)[0].innerHTML.split(" ");i(this)[0].scrollHeight>i(this)[0].offsetHeight;)t.pop(),i(this)[0].innerHTML=t.join(" ")+"..."}),i(".reviewText").each(function(){for(var t=i(this)[0].innerHTML.split(" ");i(this)[0].scrollHeight>i(this)[0].offsetHeight;)t.pop(),i(this)[0].innerHTML=t.join(" ")+"..."})}var a,h,u="SupplierTrustModule",f="ExpABTestEligible:272",p=i(".tourOperatorInfoContainer"),d=i(".tourOperatorReviews"),v=i("#left-button"),w=i("#right-button");s(),v.hide();var _=i(".reviewContainer").width()+33;v.click(function(){w.show(),d.stop().animate({scrollLeft:"-="+_+"px"},"fast",function(){a=l()[0],ta.throttle(function(){r()},"SupplierTrustModule.interaction",100)})}),w.click(function(){v.show(),d.stop().animate({scrollLeft:"+="+_+"px"},"fast",function(){h=l()[l().length-1],ta.throttle(function(){r()},"SupplierTrustModule.interaction",100)})}),d.scroll(function(){d.scrollLeft()<=0?v.hide():w.show(),o()?w.hide():d.scrollLeft()>0&&v.show(),ta.throttle(function(){r()},"SupplierTrustModule.interaction",100)}),i(".reviewReadMore").click(function(){n.trackEvent(u,"click_read_more",parseInt(i(this).parents(".reviewContainer").attr("id").split("_").pop())+1);var t=i(this).attr("id").split("_").pop();e.showLightbox("EXPANDED_ATTRACTION_REVIEWS_RESP",{loadingContent:"",reviewId:t},{classes:"centerwidth"})});var g=!1;i(window).scroll(function(){c(p.is(":visible")?p:i(".ratings_and_types"))}),i(document).on("click",".ui_close_x",function(){n.trackEvent(u,"click_close")})})});
define("common/metric-recorder",["babel/babel-helpers","ajax-request"],function(e,r){return function(e){return r({"method":"POST","url":"/MetricsAjax","x-requested-by":require("page-model").JS_SECURITY_TOKEN,"data":"metricsData="+encodeURIComponent(JSON.stringify(e))})}});
define("utils/uuid",["babel/babel-helpers"],function(x){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var n=16*Math.random()|0,e="x"===x?n:3&n|8;return e.toString(16)})}});
define("hotels/tracking/timing",["babel/babel-helpers","common/metric-recorder","utils/uuid","ta/Core/TA.PageVisibility"],function(e,r,n,t){function i(){a||(a=!0,t.addBlurListener(function(){return o={}}))}function u(e,t){if(!a)return function(){return Promise.resolve()};var i=n();o[i]=!0;var u=Date.now();return function(){if(!o[i])return Promise.resolve();delete o[i];var n=Date.now()-u;return r([{name:e,value:n,labels:[t]}])}}var a=!1,o={};return{enable:i,start:u}});
define("members/memberOverlay",["utils/stopevent","overlays/widgetoverlays","common/trackingStreams","utils/responsive","amdloaders","hotels/tracking/timing","common/Radio"],function(e,r,t,i,n,o,a){function m(a,m,s,d,c){if(a&&("click"===a.type||"mouseenter"===a.type||"mouseover"===a.type)){var l=i.mobile();if(l&&"click"!==a.type)return!1;"click"===a.type&&e(a);for(var v="",u="",f="",p=!1,w=!1,b=s.split("-"),y=0;y<b.length;y++){var g=b[y];g.match(/\bUID_([0-9A-F]+)\b/)?v=RegExp.$1:g.match(/\bSRC_(\d+)\b/)?u=RegExp.$1:g.match(/\bCATID_(\d+)\b/)?f=RegExp.$1:g.match("FUS")?p=!0:g.match("PATT")&&(w=!0)}var h="";if("undefined"!=typeof window.footprintGet&&(h=window.footprintGet()),l){var _=p?"https://www.tripadvisor.com":"";return window.location.href=_+"/MemberProfile-a_uid."+v,!1}var E="/MemberOverlay?Mode=owa&uid="+v+"&c="+f+"&src="+u+"&fus="+p+"&partner="+w+"&LsoId="+h,k=o.start("member_load",require("page-model").LOC_ID);return r.triggerFlyout(a,m,"MEMBER_OVERLAY",n.getLoadedFilesParams(),{url:E,mixins:[function(){d&&c&&t.trackEvent(d,"show_reviewer_info_window",c)}],invisibleBackdrop:!0,onLoad:k}),!1}}function s(e,r,t,i,n){return!r[d]&&(r[d]=!0,r.addEventListener("click",function(e){m(e||window.event,this,t,i,n)}),r.addEventListener("mouseenter",function(e){m(e||window.event,this,t,i,n)}),e&&m(e,r,t,i,n),!1)}var d="members_memberOverlay_init";return a("memberOverlay").on("initMemberOverlay",s),{initMemberOverlay:s}});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"reviews_member_info_resp","handlers",["handlers"]);r(["widget","members/memberOverlay","common/trackingStreams"],function(e,r,n){function i(e,n){return r.initMemberOverlay(e,n,n.id,"Reviews","user_name_photo"),!1}function t(){n.trackEvent("Reviews","click","user_name_name_click")}return{initMemberOverlay:i,usernameClick:t}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_text_summary_hsx","handlers",["handlers"]);t(["widget","lib/jquery-amd","common/Radio"],function(e,t,i){function r(){t(e.element).trigger("review:expand",[e.element,o])}function n(){t(e.element).trigger("review:collapse",[e.element,o])}function a(){i("member_growth_interstitial").emit("fire",function(){r()})}var l=t(e.element).closest(".reviewSelector"),o=Number(l.attr("data-reviewId"));return{clickExpand:r,clickCollapse:n,fireRegistrationInterstitial:a}})});
define("overlays/options/disablePageScroll",["vanillajs"],function(o){"use strict";return function(){function o(){e=document.body.style.position,document.body.style.position="absolute",document.body.style.overflow="hidden",document.body.style.width="100%"}function t(){document.body.style.position=e,document.body.style.overflow="auto",document.body.style.width="auto"}var e;this.on("show",o),this.on("hide",t)}});
require(["ta/prwidgets"],function(e){var o=e.define.bind(e,"reviews_google_translate_button_hsx","handlers",["handlers"]);o(["widget","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","overlays/options/disablePageScroll"],function(e,o,r,t,a,n,l,s,i,y){function v(v){var d=v.getAttribute("data-url");ta.util.cookie.setPIDCookie(16009),e.require(["trcss!src/build/common/translation_overlay"],function(){c.overlay&&c.overlay.hide(),c.overlay=new o(v,[r(v,"center",""),t.center([0,0]),l,y,a,n,s(),i(d)]),c.overlay.container.style.maxWidth="90%",c.overlay.container.style.width="800px",c.overlay.container.style.maxHeight=.8*window.innerHeight+"500px",c.overlay.container.style.overflowY="scroll",c.overlay.show()})}var c=this;return{open:v}}.bind({}))});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_mt_header_hsx","handlers",["handlers"]);i(["widget","ta/util/Cookie"],function(e,i){function t(e,t){return"true"===t.value?i.setPIDCookie(25173):"false"===t.value&&i.setPIDCookie(25172),t.form.elements[0].value=window.location.href,t.form.submit(),!1}return{clickSubmit:t}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_mt_footer_hsx","handlers",["deferred/mtReview","handlers"]);t(["widget","api-mod","overlays/uiOverlay","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/autoReposition","overlays/options/closeOnEscape","overlays/options/ajax","utils/ajax","overlays/styles/windowshade","ta/Core/TA.Store","common/trackingStreams"],function(e,t,r,i,a,n,o,l,s,d,v,y,c,u,f,m){function p(e){g.editOverlay?g.editOverlay.updateContent("/MachineTranslationEdit?r="+e):(g.editOverlay=new i(null,[a(null,"ui_modal mtedit_overlay"),n(o.mobile,l(),s()),d,v,u(),y("/MachineTranslationEdit?r="+e)]),f.store("translationEditOverlay",g.editOverlay),g.editOverlay.on("contentLoaded",function(){try{var e=document.getElementById("mtedit_mt"),t=document.getElementById("mtedit_english");if(e&&t){var r=e.querySelector(".mtedit_text");r.style.height=t.clientHeight+e.offsetTop-r.offsetTop+"px"}g.editOverlay.reposition()}catch(e){m.error(e,"openMTEdit:onLoad")}})),g.editOverlay.show()}function h(r,i,a){t.stopEvent(r),ta.servlet||(ta.servlet={}),ta.servlet.Reviews?p(a):e.require(["trjs!deferred/mtReview"],function(e){ta.servlet.Reviews=e,p(a)})}function O(i,a){t.stopEvent(i),g.rateOverlay&&g.rateOverlay.hide();var n=t.find(".ratingList",a);n&&e.markMine(n),a.overlay=null,r(i,a),g.rateOverlay=t.retrieve(a,"overlay")}function w(r,i,a,n,o){if(n){var l=t.find(".mtRatingButton",e.element);l&&t.addClass(l,"hidden");var s=t.find(".thanksText",e.element);s&&t.removeClass(s,"hidden"),c("/RateUserReviewSlider?at=true&rateValue="+a+","+n+","+o,{})}g.rateOverlay&&g.rateOverlay.hide()}var g=this;return{clickEdit:h,clickRate:O,rateReview:w}}.bind({}))});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_vote_line_hsx","handlers",["deferred/clicks","handlers"]);t(["widget","overlays/uiOverlay","vanillajs"],function(e,t){function r(e,r){t(e,r)}function i(e,r){r.getAttribute("data-first")||(ta.trackEventOnPage("Reviews","respond_to_review","hover"),r.setAttribute("data-first",1)),t(e,r)}return{hoverReport:r,respondLinkMouseover:i}})});
define("overlays/options/closeOnEmit",["babel/babel-helpers"],function(n){"use strict";return function(n,e,o){return function(){var t=this,i=function(){o&&!o.apply(void 0,arguments)||t.hide("on-event")};this.on("show",function(){return n.on(e,i)}).on("hide",function(){return n.off(e,i)})}}});
define("photoviewer/tracking",["babel/babel-helpers","common/trackingStreams","ta/Core/TA.FireEvent","lib/jquery-amd","utils/responsive","utils/throttle","page-model"],function(i,e,t,o,n,r,c){"use strict";function l(i,t,o){e.trackEvent(i,t,o,Q)}function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_(i)&&e.trackEvent(S,i,t,Q)}function d(i){e.trackEvent(S,i,"",Q)}function _(i){var e=void 0;if(i.includes("grid_view"))e=M;else{if(!i.includes("detail_view"))return!1;e=K}return o(U).hasClass(e)}function v(){Y=o(window).height(),X=o(window).width(),o(window).off("resize",Z).on("resize",Z)}function u(){o(window).off("resize",Z)}function w(){n.desktop()&&t.fireEvent("galNavClick"),l(S,D,null)}function k(){l(S,P,null,Q)}function s(){l(S,H,null,Q)}function h(i){var e=i?"detail_view_show_nav_click":"detail_view_hide_nav_click";l(S,e,null,Q)}function f(i){l(S,i,B,Q)}function p(i){l(S,i,B,Q)}function g(){l(S,R,null,Q)}function m(){l(S,F,null,Q)}function C(){n.desktop()&&l(S,G,null,Q)}function b(){l(S,I,null)}function T(){n.mobile()&&t.fireEvent("galThumbClick")}function A(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,V,i+"|"+e+"|"+t+"|"+o)}function E(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,x,i+"|"+e+"|"+o+"|"+r),n.desktop()&&t.fireEvent("galThumbClick")}function y(i,e,t){var n=o(e).closest(U).hasClass(K),r=o(e).hasClass(J),c=n?"detail":"grid",a=r?"dropdown_open":"dropdown_select";l(S,""+c+L[t],a+"_"+i)}function z(i,e,t,o){l(S,N,i+"|"+e+"|"+t+"|"+o)}var S="photoviewer",D="detail_view_image_arrow_click",P="detail_view_gallery_click",R="detail_view_caption_review_click",F="detail_view_caption_attribution_url_click",G="detail_view_desktop_image_click",H="detail_view_photostrip_arrow_click",I="detail_view_image_swipe_click",V="grid_view_thumbnail_click",x="detail_view_photostrip_tile_click",N="helpful_vote_click",O="_view_album_click",j="_view_type_click",q="_view_category_click",B="dropdown_abandoned",L={"album":O,"type":j,"category":q},U=".photoviewerContainer",J="tabs_item",K="hero",M="grid",Q=c.LOC_ID,W=1e3,X=void 0,Y=void 0,Z=r(function(){setTimeout(function(){var i=o(window).width(),t=o(window).height();i===X&&t===Y||(e.trackEvent("screenSizeRecord","resize","s"+X+"x"+Y+"b"+i+"x"+t,""),X=i,Y=t)},W)},W);return{attachResizeTracker:v,detachResizeTracker:u,trackPhotoViewerEvent:l,trackPhotoViewerImpression:a,trackSimpleAction:d,recordBackToGalleryClick:k,recordCaptionReviewClick:g,recordCaptionAttributionUrlClick:m,recordPhotoStripArrowClick:s,recordGridDropdownAbandonment:f,recordAlbumDropdownAbandonment:p,recordHeroClickOnDesktop:C,recordNavArrowVisibilityChange:h,recordArrowClick:w,recordPhotoSwipe:b,recordFilmstripThumbClick:T,recordGridTileClick:A,recordHeroThumbClick:E,recordFilterItemClick:y,recordHelpfulClick:z}});
define("utils/HistoryManager",[],function(){"use strict";function t(){function t(){return(new Date).getTime()+""+Math.random()}function i(t){var i=t.state;if(!a&&i&&i.id){var e=i.id,s=n[e];s&&s(i.data)}}var n={},e={},a=!1;this.pushState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.pushState(i,e,a)},this.replaceState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.replaceState(i,e,a)},this.addCallback=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},this.removeCallback=function(t,i){if(e[t]){var n=e[t].indexOf(i);n>=0&&e[t].splice(n,1)}},this.doCallbacks=function(t){e[t]&&e[t].each(function(t){t()})},this.isSupported=function(){return"undefined"!=typeof history&&"pushState"in history},this.disableCallbacks=function(t){a=t},window.addEventListener("popstate",i)}return t});
define("commerce/offerclickEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("beforeClick","afterClick")});
define("photoviewer/loader",["babel/babel-helpers","lib/jquery-amd","page-model","overlays/Overlay","overlays/styles/modal","overlays/position/fullscreen","overlays/options/closeOnEmit","overlays/options/ajax","overlays/support/radio","overlays/options/closeOnEscape","common/trackingStreams","common/Radio","ta/Core/TA.FireEvent","ta/Core/TA.Store","photoviewer/tracking","utils/responsive","utils/HistoryManager","utils/urlutils","mixins/page-dates/pop-calendar","commerce/offerclickEvents"],function(e,o,t,n,i,r,a,d,l,s,c,p,u,v,h,f,w,m,g,b){"use strict";function y(e){var n=e,i=f.mobile()?2:f.desktop()?5:3;return n.heroMinWidth=o(window).width()-2*x,n.heroMinHeight=o(window).height()-2*x,n.gridItemMinWidth=n.heroMinWidth/i,n.updateType=n.updateType||"partial",n.placementRollUps="responsive-photo-viewer",n.albumid=e.albumid||e.albumId,n.puid=t.session.uid,n.geo=n.geo||t.GEO_ID,n.detail=n.detail||t.LOC_ID,n.geo&&n.detail?(e.albumViewMode||(n.albumid=n.albumid||P,n.filter=n.filter||T,e.ff||e.imageId?(n.albumViewMode="hero",n.ff=e.ff||e.imageId):e.panoId?n.albumViewMode="hero":n.albumViewMode="grid"),n.area="QC_Meta_Mini|Photo_Lightbox",window.pageServlet&&(n.metaReferer=window.pageServlet),n):(c.error(null,"photoviewer/loader.js:load missing required arguments"),!1)}function E(e){return"/DynamicPlacementAjax?"+o.param(y(e))}function I(){return A.contentElement?A.contentElement.id:""}function C(){if(A.contentElement){var e=A.contentElement.querySelector(".photoviewerContainer");e&&e.parentNode&&(A.contentElement=e.parentNode),A.contentElement.id||(A.contentElement.id="photo_viewer_default_id");var o=k();o&&o.clear(),p("responsive-photoviewer").trigger("content-loaded",A.contentElement.id)}}function k(){if(A){var e=A.contentElement.id;if(e)return p(e)}return null}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f="no_padding";if(e.currentHeroId=e.ff,A){var w=void 0,m=k();m&&(w=m.request("currentHeroId")),w&&(e.currentHeroId=w),A.updateContent(E(e),!0)}else A=new n(document.body,i(null,"",f),r(),s,a(b,"beforeClick",function(e){return e.isBooking}),d(E(e),{resources:[],noCache:!0,skipInvalidate:!0}),l.hide("responsive-photoviewer","close")),_(t,e),A.on("contentLoaded",C),A.on("contentsUnchanged",function(){p("responsive-photoviewer").trigger("contents-unchanged")}),A.on("data-targetEvent",u.fireEvent),A.on("hide",function(){p("responsive-photoviewer").trigger("overlay-hide"),h.trackSimpleAction("photoviewer_close_click"),h.detachResizeTracker(),j&&v.remove("suppressCalendarPop");var e=o("[data-datetype='CHECKIN']").get(0);g.shouldPop(e)&&g.popCalendar(e)}),A.on("show",function(){p("responsive-photoviewer").trigger("overlay-shown")});c||t||O(e),A.show()}function O(e){var t=e.aggregationId,n=e.albumid,i=e.ff,r=e.filter,a=e.panoId,d={aggregationId:t,albumid:n,filter:r};i&&(d.ff=i),a&&(d.panoId=a);var l=H+o.param(d);p("responsive-photoviewer").trigger("addHistory",{data:d},document.title,l,function(){return M(d,!1,!0)})}function _(e,o){var t=new w;if(t.isSupported()){if(e){var n=window.location.href;window.setTimeout(function(){if(n===window.location.href){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.replaceState(null,"",e),O(o)}},0)}p("responsive-photoviewer").on("addHistory",t.pushState);var i=!1;A.on("hide",function(){window.location.hash.indexOf(S)>=0&&(i=!0,t.disableCallbacks(!0),history.back())}),window.addEventListener("popstate",function(){window.location.hash.indexOf(S)>=0?i?history.back():A.show():(i=!1,t.disableCallbacks(!1),A.hide())})}}var x=20,S="#photos",H=S+";",T=7,P=101,A=void 0,j=!1;return o(function(){if(!v.retrieve("mediaviewer")){var e=window.location.hash;if(e.indexOf(S)>=0){v.retrieve("suppressCalendarPop")||(j=!0,v.store("suppressCalendarPop","true"));var o=void 0,t=e.indexOf(H)>=0&&e.substring(e.indexOf(H)+H.length,e.length);o=t&&t.length>0?m.getUrlQueryArgs("?"+t):y({}),o.updateType="full",M(o,!0)}}}),p("responsive-photoviewer").on("load",M),{load:M,buildUrl:E,getOverlayId:I}});
define("actions/openRespPhotoViewer",["common/trackingStreams","ta/util/Cookie","photoviewer/loader"],function(e,o,t){function i(i,n,a,r,l,p){e.trackEvent("photoviewer","click","btf_userphotos"),o.setPIDCookie(5042);var c={detail:a,geo:r,imageId:l,filter:p};l>0&&(c.ff=l),c.albumViewMode="hero",c.updateType="full",t.load(c)}function n(e){t.load(e)}return{open:i,openWithOptions:n}});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_review_resp","handlers",["handlers"]);i(["widget","lib/jquery-amd","ta/util/Cookie","common/trackingStreams","common/Radio"],function(e,i,t,n,r){function o(){i(e.element).trigger("review:expand",[e.element,m])}function l(){i(e.element).trigger("review:collapse",[e.element,m])}function c(r,o,l){n.trackEvent("Reviews","click","title",0,o.href),t.setPIDCookie(l),i(e.element).trigger("review:toggle",[e.element,m])}function a(){t.setPIDCookie(24687),n.trackEvent("Reviews","click","via_mobile_itunes"),window.open("/apps")}function s(e,i){n.setEvtCookie("Reviews","click","title",0,e),t.setPIDCookie(i)}function v(e,i){s(e,i),r("member_growth_interstitial").emit("fire",function(){window.location.href=e})}var w=i(".reviewSelector",e.element),m=Number(w.attr("data-reviewId"));return{clickExpand:o,clickCollapse:l,toggleReviewInline:c,viaMobileClick:a,reviewClick:s,fireRegistrationInterstitial:v}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_responsive_pagination","handlers",["handlers"]);t(["widget","ta/page","common/trackingStreams"],function(e,t,n){"use strict";function a(e,a){var i=a.getAttribute("href")||a.getAttribute("data-href");return i?void t.applyPaginationOffset(i,!0):void n.error("No href, data-href or data-page found in pagination element.","responsive_pagination paginate")}function i(e,t,a,i){n.trackEvent("Reviews","click",a,i)}return{paginate:a,trackClick:i}})});
define("sponsoredlisting/utils",["vanillajs"],function(t){"use strict";var n={};return n.isInViewport=function(t){var n=t.getBoundingClientRect(),i=document.documentElement;return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||i.clientHeight)&&n.right<=(window.innerWidth||i.clientWidth)},n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_reviews_list_resp","handlers",["handlers"]);t(["placement","lib/jquery-amd","overlays/ajaxUtil","ta/Core/TA.FireEvent","ta/prwidgets","ta/util/ajaxPreserves","common/trackingStreams","utils/urlDecoder","page-model","ta/util/Element","sponsoredlisting/utils","ta/Core/TA.Record","common/Radio"],function(e,t,n,i,o,r,a,d,c,s,u,l,v){function f(e){var t={acknowledged:!1,acknowledge:function(){this.acknowledged=!0}};v("restaurants-impressions").emit("restaurants-rr-fav-review-viewed-event",t),t.acknowledged!==!0&&setTimeout(function(){++e<1e3&&f(e)},100)}function p(e){var t=e.currentTarget||this;if(u.isInViewport(t)){f(0);var n="owners_favorite_review_displayed",i=c.LOC_ID;l.trackEventOnPage(c.session.pageServlet,n,i),k.removeEventListener("pageScroll",p),k.removeEventListener("ownerFavReviewLoadComplete",p)}}function g(){y=[],A={},P.find(".review-container[data-reviewId]").each(function(e,t){var n="true"===t.getAttribute("data-collapsed"),i="true"===t.getAttribute("data-deferred"),o=Number(t.getAttribute("data-reviewId")),r="true"===t.getAttribute("data-showMt"),a={elem:t,id:o,deferred:i,saved:!1,frozen:!n&&!i,expanded:!n&&!i,showMt:r};y.push(a),A[o]=a}),P.off("review:expand",S),P.on("review:expand",S),P.off("review:collapse",h),P.on("review:collapse",h),P.off("review:toggle",x),P.on("review:toggle",x),L()}function w(e){var n=A[e];if(n&&n.source&&!n.frozen){var i=n.source,r=n.elem;i.isLoading?t(r).addClass("listingLoading"):i[e]?(t(r).removeClass("listingLoading"),r.innerHTML=i[e],o.initWidgets(r)):(t(r).removeClass("listingLoading"),r.expandedSource===i&&(r.expandedSource=void 0,r.expanded=!1),r.collapsedSource===i&&(r.collapsedSource=void 0))}}function m(e,t){var n=A[e];n&&!n.frozen&&(!!n.expanded!=!!t||!t&&n.deferred)&&(n.expanded&&!n.expandedSource&&(n.expandedSource={},n.expandedSource[e]=n.elem.innerHTML),n.expanded||n.collapsedSource||n.defered||(n.collapsedSource={},n.collapsedSource[e]=n.elem.innerHTML),n.expanded=t,n.source=t?n.expandedSource:n.collapsedSource,t&&(n.wasExpanded=!0),w(e))}function E(e,n){if(!n.isBusy()&&e.isLoading){var i=document.createElement("div");t(i).html(n.data).children("[data-reviewListingId]").each(function(t,n){e[Number(n.getAttribute("data-reviewListingId"))]=n.innerHTML}),e.isLoading=!1,t.each(y,function(t,n){n.source===e&&w(n.id)})}}function S(e,o,r){var a=[],d=[],c=!1,s={},u=!1;if(t.each(y,function(e,t){c=c||t.id===r,!c||t.expanded||t.frozen||t.id!==r&&t.wasExpanded||(a.push(t.id),t.expandedSource||(t.expandedSource=s,d.push(t.id),0===e&&(u=!0)))}),d.length>0){var l=n.loadOverlayWidget("EXPANDED_HOTEL_REVIEWS_RESP",{loadingContent:"",noCache:!0,reqParams:{reviews:String(d),contextChoice:P.attr("data-contextChoice"),loadMtHeader:u}});s.isLoading=!0,l.on("update",E.bind({},s,l)),E(s,l)}return t.each(a,function(e,t){m(t,!0)}),I&&(I=!1,require(["trjs!ta/registration/RegOverlay"],function(t){t.show({type:"dummy"},e.target||o,{flow:"CORE_COMBINED",pid:39415,onSuccess:function(){}})})),i.fireEvent("ReviewExpanded"),!1}function h(e,t,n){m(n,!1)}function x(e,t,n){var i=A[n];i&&i.expanded?h(e,t,n):S(e,t,n)}function C(){return"true"===P.attr("data-loadDeferredExpanded")?"EXPANDED_HOTEL_REVIEWS_RESP":"COLLAPSED_HOTEL_REVIEWS_RESP"}function L(){var e=[],i=[],o={},r=P.attr("data-contextChoice"),a="true"===P.attr("data-forceReviewExpansion")?"true":"false",d=!1;if(t.each(y,function(t,n){n.deferred&&!n.frozen&&(n.collapsedSource=o,e.push(n.id),0===t&&(d=!0)),n.showMt&&i.push(n.id)}),e.length>0){var s=n.loadOverlayWidget(C(),{loadingContent:"",reqParams:{reviews:String(e),idxMtReviews:String(i),forceReviewExpansion:a,contextChoice:r,loadMtHeader:d}},c.session.pageServlet);o.isLoading=!0,s.on("update",E.bind({},o,s)),E(o,s)}t.each(e,function(e,t){m(t,!1)})}function _(e,t,n,i){n=d.decodeProductCode(n),a.trackEvent("tac_product_detail_reviews_click_offsite",n,"1"),d.goToCommerceLinkWithProductCode(i)}function R(n){r.setContentElement(M,n,!0),M=n,P=t("#"+e.id+" .listContainer"),o.initWidgets(M),O&&T(),g()}function T(e,t){O=!0,P.removeClass("hide-more-mobile")}var b=document.querySelectorAll(".ownerFavLabel");if(b){var k=b[0];k&&(window.addEventListener("scroll",function(e){var t;"function"==typeof window.CustomEvent?t=new CustomEvent("pageScroll"):(t=document.createEvent("CustomEvent"),t.initCustomEvent("pageScroll",!0,!0,null)),k.dispatchEvent(t)}),window.setTimeout(function(){k.addEventListener("pageScroll",p),k.addEventListener("ownerFavReviewLoadComplete",p)},0))}var P=t("#"+e.id+" .listContainer"),M=P[0],y=[],A={},I=!!P.children(".info[data-expansionSoftGate=true]")[0],O=!1;return g(),i.on("update-"+e.name,R),s.trackWhenScrolledIntoView("#"+e.id,["reviews","in_view"]),{trackExtraReviews:_,viewMore:T,goToCommerceLink:d.goToCommerceLinkWithProductCode}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"location_reviews_newer_reviews","handlers",["handlers"]);n(["placement","ta/util/Cookie"],function(e,n){function i(){n.setPIDCookie(3978)}return{setPid:i}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"masthead_h1","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent"],function(e,n){"use strict";function t(n){var t=document.getElementById(e.id);t&&(t.innerHTML=n.innerHTML)}var r="true"===e.params.trackInView;return r&&require(["trjs!ta/util/Element"],function(n){n.trackWhenScrolledIntoView("#"+e.id,["masthead","in_view"])}),n.on("update-"+e.name,t),{}})});
define("widget/saves",["page-model","ta/registration/RegEvents","utils/to-array","ajax-request"],function(t,e,a,r){"use strict";function n(e,n,d){var c;if(3===arguments.length)return c=a(document.querySelectorAll('.saves-widget-button[data-id="'+e+'"][data-type="'+n+'"]')),void c.forEach(function(t){s(t,d)});if(t.session.loggedIn){c=a(document.querySelectorAll(".saves-widget-button"));var o=[];c.forEach(function(t){o.push({reference_type:t.getAttribute("data-type"),reference_id:t.getAttribute("data-id"),reference_uid:t.getAttribute("data-id")})}),0!==o.length&&r({"url":"/data/1.0/trips/references","type":"POST","data":JSON.stringify({data:o}),"content-type":"application/json","x-requested-by":t.JS_SECURITY_TOKEN}).then(i.bind(null,c))}}function i(t,e){var a={};JSON.parse(e).data.forEach(function(t){a[t.reference_type]||(a[t.reference_type]=[]),a[t.reference_type].push(t.reference_id)}),t.forEach(function(t){var e=t.getAttribute("data-type"),r=t.getAttribute("data-id"),n=!!(a[e]&&a[e].indexOf(+r)>=0);s(t,n)})}function d(t,e){return t.classList.contains(e)?t:t.querySelector("."+e)}function s(t,e){var a=(t.getAttribute("data-type"),t.getAttribute("data-id"),t.getAttribute("data-icon-class")),r=t.getAttribute("data-text"),n=t.getAttribute("data-text-saved"),i=d(t,"saves-icon-locator");if(i&&(e?(i.classList.remove(a),i.classList.add(a+"-fill")):(i.classList.add(a),i.classList.remove(a+"-fill"))),r&&n){var s=d(t,"saves-text-locator");s&&(s.innerText=e?n:r)}}function c(){o||(e.on("success",n),"complete"===document.readyState||"interactive"===document.readyState||"loaded"===document.readyState?n():document.addEventListener("DOMContentLoaded",n),o=!0)}var o=!1;return c(),{init:c,updateSaveButtonsStatus:n}});
require(["ta/p13n/placements"],function(a){var e=a.define.bind(a,"resp_attraction_header","handlers",["handlers"]);e(["placement","lib/jquery-amd","ta/Core/TA.Record","utils/responsive","widget/saves"],function(a,e,n,t,i){function r(n,t){n.preventDefault(),e(".collapse","#"+a.id).removeClass("hidden"),e(t).addClass("hidden")}function o(a,e,t,i,r){n.setEvtCookie(t,"masthead",t+"_click",i,r),window.open(r,"_blank")}function c(a){t.mobile()?a.setAttribute("data-position","center"):a.setAttribute("data-position","right")}function s(e,t){for(var i=document.getElementById(a.id);t&&t!==i;){if("ratingContainer"===t.className){n.trackEventOnPage("reviews","masthead","reviews_click",0,!1);break}if(t.classList.contains("popIndex")){n.trackEventOnPage("pop index","masthead","attractions_click",0,!1);break}t=t.parentNode}}return e(".animal_tag","#"+a.id).on("click",function(){n.trackEventOnPage(a.params.animalTrackingPageProperty,a.params.animalTrackingPageActionPrefix+"_paw_button","")}),e("#ANIMAL_LEARN_MORE","#"+a.id).on("click",function(){n.setEvtCookie(a.params.animalTrackingPageProperty,a.params.animalTrackingPageActionPrefix+"_paw_portal","","",a.params.animalLearnMoreUrl),window.open(a.params.animalLearnMoreUrl,"_blank")}),i.init(),{track:s,onAttrShowMoreTagsClick:r,onAttractionLinkClick:o,setOverlayPosition:c}})});
define("tab_bar/TabBar",["lib/jquery-amd","api-mod","mixins/Events","utils/throttle"],function(t,i,n,e){"use strict";function o(o,r,s){function a(i,n){if(!d){i=t(i);var e=c.getAnchor(i),o=u.getElements();if(e.length&&!e.is(":visible")){var r=o.anchors,s=r.index(e);if(s>=0)for(;s<r.length&&!e.is(":visible");s++)e=r.eq(s);else e=t("[data-tab="+i.attr(g)+"]")}if(c.emit("beforeTabClick",i.get(0),e.get(0)),e.length){var a=n||b;d=!0,setTimeout(function(){d=!1},2*a);var l=function(){d=!1,c.emit("afterTabClick",i.get(0),t("[data-tab="+i.attr(g)+"]").get(0))},f=u.getScrollable(o.scrollWindow),h=u.getTopInScrollable(o.scrollWindow,e)-u.getClickOffset();f.stop?f.stop(!0,!0).animate({scrollTop:h},{duration:a,complete:l}):(window.scrollTo(0,h),l())}}}function l(){var i=t(this);i.is(":visible")&&a(i)}i.mixin(this,new n("init","uninit","test","redraw","beforeTabClick","afterTabClick")),function(){var t=this.emit;this.emit=function(){v=!0,t.apply(this,arguments),w=null,v=!1}}.bind(this)(),r=r||{};var c=this,u={},f={},h={},b=r.scrollSpeed||300,d=!1,g=r.tabAttr||"data-anchor",m=r.anchorAttr||"data-tab",w=null,v=!1;if(s)for(var p=0;p<s.length;p++)s[p]&&s[p].call(this,u);this.init=function(){var i=u.getElements();return this.uninit(),i.scrollWindow.on("scroll",T),t(window).on("resize orientationchange",k),i.anchors.each(function(i,n){n=t(n),f[n.attr(m)]=n}),i.tabs.each(function(i,n){n=t(n),h[n.attr(g)]=n}),i.tabs.on("click",l),setTimeout(this.emit.bind(this,"init"),1),setTimeout(k,1),this},this.uninit=function(){var i=u.getElements();i.scrollWindow.off("scroll",T),t(window).off("resize orientationchange",k),f={},d=!1,i.tabs.off("click",l),this.emit("uninit")},this.redraw=this.emit.bind(this,"redraw"),this.test=this.emit.bind(this,"test");var T=e(this.emit.bind(this,"test"),300);this.isScrolling=function(){return d},this.show=function(t,i){a.apply(null,arguments)},this.getAnchor=function(i){var n=i.substr?i:t(i).attr(g);return f[n]||t()},this.getTab=function(i){var n=i.substr?i:t(i).attr(m);return n in h?h[n].get(0):null};var k=function(){this.redraw(),this.test()}.bind(this);!function(){var i=o,n=r.clickOffset||0;u.getElements=function(){if(v&&w)return w;var n=t(i.tabBar),e={tabBar:n,scrollRegion:t(i.scrollRegion||"body"),scrollWindow:t(i.scrollWindow||window),content:i.content?t(i.content):t(".tb_content",n),tabs:i.tabs?t(i.tabs):t(".tb_tab",n)};if(i.anchors)e.anchors=t(i.anchors);else{var o=e.scrollRegion.attr(m);e.anchors=t(o?i.scrollRegion:null).add(t("["+m+"]",i.scrollRegion))}return v&&(w=e),e},u.getClickOffset=function(){return n},u.getAnchorAttr=function(){return m},u.getScrollable=function(i){return u.isWinOrBody(i)?t("html,body"):i},u.getTopInScrollable=function(i,n){return n=t(n),u.isWinOrBody(i)?n.offset().top:t(i).scrollTop()+n.position().top},u.isWinOrBody=function(t){return t.get(0)==window||t.get(0)==document.body}}()}return o});
define("tab_bar/ScrollPastBottom",["lib/jquery-amd"],function(t){"use strict";function i(){return function(i){var e,n=-1;return this.on("beforeTabClick",function(o,r){if(r){var c=i.getElements();e||(e=t("<div></div>").css("height",0),c.scrollRegion.append(e));var h=c.scrollRegion.height()-e.height(),l=h-i.getTopInScrollable(c.scrollWindow,r),s=c.scrollWindow.height()-l;n=-1,s>e.height()?e.css("height",s+"px"):n=Math.max(s,0)}}).on("afterTabClick",function(){n>=0&&e.css("height",n+"px")}),this}}return i});
define("tab_bar/MoreTab",["lib/jquery-amd"],function(e){"use strict";function t(t){return function(n){function i(n){var i=o||(t.tab?e(t.tab):e(".tb_more",n.tabBar));return{tab:i,content:t.content?e(t.content):e(".tb_more_content",i),dodge:t.dodge?e(t.dodge):e()}}function a(t,n){for(var i=0;i<t.length;i++){var a=e(t[i]);if(a.is(":visible")&&a.offset().top>n)return!0}return!1}function r(){var t=n.getElements(),a=i(t);a.content.is(":visible")&&a.content.css("display",""),e(window).off("click",r)}var o;t=t||{};var d=function(n){var i=e(n.dodge);if(i=i.add(n.tab),t.neverHide)for(var a=0;a<t.neverHide.length;a++){var r=this.getTab(t.neverHide[a]);r&&(i=i.add(r))}return i}.bind(this);this.on("redraw",function(){var r=n.getElements(),c=i(r),s=e(r.tabs).not(".hidden"),l=function(e){var t=s.index(e);t>=0&&s.splice(t,1)};if(o||(c.tab.addClass("hidden"),c.tab.before(c.content.children().detach()),l(c.tab)),t.neverHide)for(var b=0;b<t.neverHide.length;b++)l(this.getTab(t.neverHide[b]));for(var f=!1,g=r.tabs.filter(":visible"),v=e(g.length?g.get(0):r.tabs.get(0)),h=v.offset().top+v.height()/2,u=d(c);s.length&&(a(s.last(),h)||a(u,h));){var p=e(s.splice(-1,1));if(o){var m=v;g.length&&(g.get(g.length-1)==c.tab.get(0)?g.length>=2&&(m=e(g.get(g.length-2))):m=e(g.get(g.length-1))),m.after(c.tab),o=null,c=i(r)}c.content.prepend(p.detach()),c.tab.removeClass("hidden"),f=!0}f||o||(o=c.tab.detach())}).on("beforeTabClick",function(t){t=e(t);var a=n.getElements(),o=i(a);o.tab.get(0)==t.get(0)&&(o.content.is(":visible")?o.content.css("display",""):(o.content.css("display","block"),setTimeout(function(){e(window).on("click",r)},1)))})}}return t});
define("tab_bar/HighlightActiveTab",["lib/jquery-amd","api-mod","mixins/Events"],function(t,e,i){"use strict";function n(e){function n(e){for(var i=t(e.tabs.get(0));i.length&&i.get(0)!=e.tabBar.get(0);i=i.parent()){if("fixed"==i.css("position")||"absolute"==i.css("position"))return i.height();if("body"==i.prop("tagName").toLowerCase())break}return 0}e=e||{};var s=e.activeClassName||"current",o=e.offset||0,r="undefined"==typeof e.defaultToFirstTab||e.defaultToFirstTab;return function(a){i.extend(this,["activeChanged"]);var l=t(),f=t();this.getActiveTab=function(){return l.get(0)},this.on("uninit",function(){l.removeClass(s),l.empty()}).on("test",function(){var i,c=null,g=a.getElements(),u=g.tabBar.closest(g.scrollRegion).length>0,h=t(g.anchors.filter(":visible").get().reverse());if(u){var v,b,d;h.each(function(e,s){var r=!1,l=t(s),f=t(this.getTab(s));if(l.get(0)==document.body?r=!0:f.is(":visible")&&(void 0===v&&(v=a.isWinOrBody(g.scrollRegion),d=n(g)+o),v?(void 0===b&&(b=t(g.scrollWindow).scrollTop()),r=l.offset().top-d<=b):r=l.position().top-d<=0),r)return i=f,c=l,!1}.bind(this))}else h.each(function(e,n){var s=t(n);if(s.position().top<=0)return i=t(this.getTab(s.get(0))),c=s,!1}.bind(this));if(!i&&r){var p=g.tabs.filter(":visible");i=p.length?p.first():g.tabs.first()}if(i&&(i.length&&i.get(0)!=l.get(0)?(l.removeClass(s),i.addClass(s),this.emit("activeChanged",l.get(0),i.get(0)),l=i,f=c):!i.length&&l.length&&(l.removeClass(s),this.emit("activeChanged",l.get(0),null),l=t(),f=t())),e.scrollToTab){var m=l.position().left+t(g.content).scrollLeft();g.content.prop("scrollLeft",m)}})}}return n});
define("tab_bar/StickyBar",["lib/jquery-amd","api-mod","mixins/Events"],function(t,i,s){"use strict";function n(i,n){return function(e){function o(s){return i?t(i):t(".tb_stickyElt",s.tabBar)}function r(t){var i=t.tabBar.offset().top+(n.lastYOffset||0);return t.scrollWindow.scrollTop()>i}s.extend(this,["beforeSticky","afterSticky"]),n.stickyClass||(n.stickyClass="sticky");var a,c=!1,u=function(t){t.addClass(n.stickyClass).css({transition:"none",top:"-"+t.height()+"px"}),this.redraw(),this.test(),setTimeout(function(){t.css({transition:"",top:0})},1)}.bind(this),f=function(t){a=!0,t.css("top","-"+t.height()+"px"),setTimeout(function(){a=!1,t.removeClass(n.stickyClass).css({transition:"none",top:""}),this.redraw(),this.test()}.bind(this),n.transitionDuration)}.bind(this),h=function(){var t=e.getElements(),i=r(t),s=c!=i;s&&(this.emit("beforeSticky",i),c=i,n.transitionDuration?i?u(o(t)):a||f(o(t)):o(t).toggleClass(n.stickyClass,i),setTimeout(function(){this.emit("afterSticky",i)}.bind(this),n.transitionDuration))}.bind(this);this.on("test",h)}}return n});
define("tab_bar/CorrectLazyLoadOffset",["lib/jquery-amd"],function(t){"use strict";function e(e){var o="wheel mousewheel mousedown touchstart dragstart",n="keydown DOMMouseScroll",r=e?e.sort():[500,1e3,2e3];return function(e){return this.on("afterTabClick",function(l,c){function i(){u&&(a.off(o,i),t(document).off(n,i),u=!1)}function s(t){u&&(a.scrollTop(e.getTopInScrollable(f.scrollWindow,c)-d),t&&i())}var u,f=e.getElements(),a=t(f.scrollWindow),d=e.getClickOffset();a.on(o,i),t(document).on(n,i),u=!0;for(var h=0;h<r.length;h++)setTimeout(s.bind(this,h==r.length-1),r[h])}),this}}return e});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_flex_tab_bar","handlers",["handlers"]);t(["placement","tab_bar/TabBar","tab_bar/ScrollPastBottom","tab_bar/MoreTab","tab_bar/HighlightActiveTab","tab_bar/StickyBar","tab_bar/CorrectLazyLoadOffset","common/trackingStreams","ta/Core/TA.FireEvent"],function(e,t,a,r,n,i,o,c,s){function b(){var a=p.querySelector(".persistent_tabs_container"),r=p.querySelector(".persistent_tabs_header");g=new t({tabBar:a,content:a.querySelector(".tabs_pers_content"),tabs:".tabs_pers_item, .tabs_commerce_button"},{clickOffset:h},f(a,r)),g.init().on("activeChanged",function(e,t){if(!g.isScrolling()){var a=t.getAttribute("data-anchor")||"",r=a.toLowerCase().replace("tabs_","");c.trackEvent(r,"in_view")}_(t),s.fireEvent("tab_bar_active_change",t)}).on("beforeTabClick",function(e){e.classList.contains("tabs_more")?c.trackEvent("persistentheader","click","more"):c.trackEvent("persistentheader","click",e.getAttribute("data-track").toLowerCase().replace("tabs_",""))}).on("beforeSticky",function(t){t&&c.trackEvent("persistentheader","in_view");var a=(e.params.eventPrefix||"")+(t?"TabBarFixBegin":"TabBarUnFixBegin");s.fireEvent(a)}).on("redraw",function(){var e=p.querySelector(".tabs_pers_content .tabs_pers_item:not(.hidden)");e&&(a.className=a.className.replace(m,""))})}function l(){var e=p.querySelectorAll(".tabs_pers_item:not(.hidden)");Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("data-anchor");document.querySelector('[data-tab="'+t+'"]')||e.classList.add("hidden")})}function d(){s.on("TabHeader_clickTab",function(e,t){g.show(e,t?t:1)}),s.on("tabExpand_End",function(){_(g.getActiveTab())})}function _(t){var a=e.params.dealInactiveTab,r=e.params.dealInactiveClass,n=p.querySelector('[data-tab="'+a+'"]');if(a&&n){var i=t&&a===t.getAttribute("data-anchor");i&&r&&(i=!!n.querySelector("."+r));var o=p.querySelector(".tabBarOffer");o.classList.contains("hidden")!==i&&(o.classList.toggle("hidden"),g.redraw())}}function u(){var e=window.location.hash&&window.location.hash.substring(1);if(e){var t=document.getElementById("TABS_"+e);t&&g.show(t)}}function f(e,t){var c=".tabBarOffer",s=[a(),r({tab:".tabs_more",content:".tabs_more .tabs_more_content",dodge:e.querySelector(c)}),n({offset:h}),o()];return s.push(i(t,{stickyClass:"fixed",lastYOffset:h*-1,transitionDuration:150})),s}function v(){var e=p.querySelector(".persistent_tabs_header");e&&(l(),b(),d(),u())}var h=54,m=/ *\bhidden\b/,p=document.getElementById(e.id),g=null;v()})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"common_ad_resp_breakpoint","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/Core/TA.FireEvent","utils/throttle"],function(e,n,i,t){function a(){var t=n(".ad",e.element),a="none"!==t.css("display");if(r!==a){var d=t.find(".gptAd");d.toggleClass("inactive",!a),void 0!==r&&i.fireEvent("adSizeChanged"),r=a}}function d(){window.addEventListener("resize",t(a,100)),a()}var r;d()})});
define("utils/ScrollInContainer",["lib/jquery-amd","ta/Core/TA.Event","utils/throttle"],function(t,e,o){function i(i){function n(){var e=t(i.bottomAnchor);e.length||(A=!0)}function s(e,o){if(!A&&"undefined"!=typeof d){var n=l.height()-(h.offset().top-l.offset().top),s="fixed"===h.css("position")||"absolute"===h.css("position");if(s||!(n<=h.outerHeight(!0))){e=e||window.event;var r,p=i.topMargin+(t(i.topDodgeFixed).outerHeight()||0);r=i.topAnchor?t(i.topAnchor).offset().top+t(i.topAnchor).height():l.offset().top;var w,v=t(i.listingSelector).length,b=(l.height()+h.height())/2,y=t(window).scrollTop()+p,x=0,k=0;if(y>r){var z=t(i.bottomAnchor);if(z.length){if(x=z.offset().top,x-r<=h.height())return void h.css({position:"static",width:l.width()})}else x=r+l.height();x-=f(),y+h.height()>=x?(w="absolute",k=i.bottomMargin,k+=c?r+l.height()-x:a.height()+a.offset().top-(z.length?z.offset().top:0)):w="fixed"}else w="static";if(i.doubleRailTest&&v>=20&&y>b&&!S&&(ta.trackEventOnPage("DoubleRailAd","Impression","",1,!0),S=!0),w!==m||o||!e||"resize"===e.type){if(e&&"resize"===e.type&&"right"===i.stickySide){var M=a.width();g+=M-u,u=M}if(m=w,"fixed"===w)h.css({bottom:"auto",top:p,left:l.offset().left+d});else if("absolute"===w){var R=h.offset().left,D=l.offset().left;g=c?R-D:R-a.offset().left,h.css({bottom:k,top:"auto",left:g})}if(h.css({position:m,width:l.width()}),"center"===i.stickySide){var T=l.innerWidth()/2-h.width()/2;"fixed"===w&&(T+=l.offset().left),h.css("left",T)}}}}}function f(){var e=t(x),o=i.bottomMargin;return"Restaurant_Review"===window.pageServlet&&e.length>0&&(o+=750),o}function r(e){var i=Date.now();s(e);var n=Date.now()-i;n>w&&(b++,b>=v&&(t(window).off("scroll resize",r),t(window).on("scroll resize",o(s,300))))}var l,h,a,c,d,g,p,u,w=50,v=5,b=0,m="static",A=!1,y=!0,S=!1,x=".belowScrolingAd";i=t.extend({bottomMargin:0,topMargin:0,stickySide:"left",doubleRailTest:!1},i),this.init=function(f,w){var v=t(i.bottomAnchor);if(v.length){t(window).on("scroll",o(n,500)),l=t(f),h&&h.is(w)||(h=t(w),a=h.offsetParent()),m="",u=a.width();var b=h.width();if(y){y=!1;var A=h.offset().left,S=l.offset().left;d=A-S,c=a.is(l),g=c?A-S:A-a.offset().left,t(window).on("scroll resize",r),e.on("page-changes-pending",this.test.bind(this))}else{var x=p-b;x&&(d+=x,"right"===i.stickySide&&(g+=x))}p=b,s()}},this.test=function(){s(null,!0)}}return i});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_ad_wrapper","handlers",["handlers"]);t(["placement","ta/Core/TA.FireEvent","utils/ScrollInContainer"],function(e,t,n){function o(e){var t=document.getElementById(e.domId);t&&a.contains(t)&&i&&i.contains(t)&&d.offsetTop>c.offsetTop+c.offsetHeight&&s.init(i,c)}function r(){t.on("onAdRender",o),e.params.contentUpdatedEvent&&t.on(e.params.contentUpdatedEvent,s.test.bind(s))}var a=document.getElementById(e.id),i=a.querySelector(".ad_column_sticky"),c=i&&i.querySelector(".stickyAds"),d=a.querySelector(".bottom_anchor"),s=new n({topMargin:parseInt(e.params.topMargin,10)||24,bottomMargin:parseInt(e.params.bottomMargin,10)||18,stickySide:"center",topDodgeFixed:".persistent_tabs_header",topAnchor:a.querySelector(".top_anchor"),bottomAnchor:d}),p=a.querySelector(".hide-ad");if(p){var l=p.querySelector(".gptAd");l&&l.classList.add("inactive")}r()})});
define("utils/VisibilityCheckFunction",function(){function t(){return Element.prototype.getBoundingClientRect?Promise.resolve(function(t){if(!t)return!1;var n;try{n=t.getBoundingClientRect()}catch(t){return!1}return e(n,{top:0,left:0,bottom:Math.max(document.documentElement.clientHeight,window.innerHeight||0),right:Math.max(document.documentElement.clientWidth,window.innerWidth||0)})}):new Promise(function(t){require(["trjs!api-mod"],function(n){t(function(t){if(!t)return!1;var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=n.scrollTop(),u=r+o,h=n.scrollLeft(),c=h+i,f=n.getPosition(t);return e({width:t.offsetWidth,height:t.offsetHeight,top:f.top,left:f.left,bottom:f.top+t.offsetHeight,right:f.left+t.offsetWidth},{top:r,left:h,bottom:u,right:c})})})})}function e(t,e){return 0!==t.width&&0!==t.height&&(!(t.bottom<=e.top||t.top>=e.bottom)&&!(t.left>=e.right||t.right<=e.left))}function n(){return i}var i=t();return{getPromise:n}});
define("utils/VisibilityChecker",["utils/to-array","utils/is-element","utils/VisibilityCheckFunction"],function(e,t,r){function i(r,i,n){return null==n?i:t(n)?i.concat(n):"string"==typeof n?i.concat(e(r.querySelectorAll(n))):i}function n(e){var t=e.elements,r=e.context||document,n=e.callback,c=!1;if(!Array.isArray(t))throw new TypeError("VisibilityChecker must have an elements array");return function(){c||(c=!0,l.then(function(e){c=!1;var l=t.reduce(i.bind(null,r),[]).filter(e);if(l.length>0&&"function"==typeof n){var u=n(l);Array.isArray(u)&&(t=u)}}))}}var l=r.getPromise();return n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_nearby","handlers",["handlers"]);t(["babel/babel-helpers","placement","ta/prwidgets","mobile/lite/image-loader","ta/Core/TA.FireEvent","utils/VisibilityChecker","utils/throttle","utils/responsive","common/Radio","common/trackingStreams"],function(e,t,n,r,i,a,l,c,o,s){function d(){t.servletName.includes("Restaurant_Review")&&(s.trackEvent("Restaurant_Review","map_click_staticimage_nearby",t.location_id),p.trigger("open-trigger-clicked"),o("restaurants-interactions").emit("map-click-event")),s.trackEvent("nearby","click","open_float_map"),u.trigger("open-trigger-clicked")}function m(){require(["babel/babel-helpers","trjs!ta/p13n/placements-ajax"],function(e,i){return i.enableAutoRefresh(t,{allowUndated:t.params.allow_undated,customUpdater:function(e){var i=document.getElementById(t.id),a=document.createElement("div");a.innerHTML=e;var l=a.querySelector(".grids"),c=i.querySelector(".grids");l instanceof Element&&c instanceof Element&&(c.parentNode.replaceChild(l,c),n.initWidgets(l),r.init(20,l))}})})}var u=o("hr-map"),p=o("restaurant-detail-map"),b=a({elements:["#"+t.id],callback:function(){window.removeEventListener("scroll",v),s.trackEvent("nearby_hr","in_view"),m()}}),v=l(function(){return c.tablet()&&b()},20);return window.addEventListener("scroll",v),v(),r.init(20,document.getElementById(t.id)),{mapClick:d}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_photo_mosaic","handlers",["handlers"]);t(["placement","lib/jquery-amd","photoviewer/loader","ta/Core/TA.Record","common/Radio","ta/util/Element","ta/util/Cookie"],function(e,t,o,a,i,n,r){"use strict";function c(e){var t={detail:s,geo:h,updateType:"full",albumId:101,filter:7};e>0?(t.ff=e,t.baseMediaId=e,t.albumViewMode="hero",a.trackEventOnPage("Restaurant_Review","photo_click_hero",s,0,!1)):(t.albumViewMode="images",a.trackEventOnPage("Restaurant_Review","photo_click_see_all",s,0,!1)),o.load(t)}function d(){var e=t("img",".large_photo_wrapper").attr("data-mediaId");c(e)}function l(){f.trigger("open-trigger-clicked")}function p(e,t,o){o&&o>0&&r.setPIDCookie(o),window.location=t.href}function u(e,t,o){o&&o>0&&r.setPIDCookie(o),a.trackEventOnPage("WAR_button","WAR_click"),window.location=t.href}var _=t("#"+e.id),m=t(".photo_mosaic_info",_),s=parseInt(m.attr("data-location-id"))||-1,h=parseInt(m.attr("data-geo-id"))||-1,f=i("ar-map");t("[data-mediaid]",_).each(function(e,o){t(o).click(function(){c(t(this).attr("data-mediaid"))})});var w=["map_overlay_in_photo_mosaic","in_view"];return n.trackWhenScrolledIntoView(".map_container",w),n.trackWhenScrolledIntoView(".review_button",["WAR_button","WAR_impression"]),{openMap:l,clickPhoto:p,clickReview:u,openPhotoViewer:c,openPhotoViewerEntry:d}})});
define("cpm/BannerResizeHandler",["utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t){"use strict";function n(){i(),s||(window.addEventListener("resize",e(i,300)),s=!0)}function a(e){if(e&&e.getAttribute("data-size"))try{var r=JSON.parse(e.getAttribute("data-size")),n=[].concat.apply([],r);return n.indexOf(o)>-1}catch(e){t.error(e,"Error parsing banner ad size")}return!1}function i(){var e=document.querySelectorAll(".ppr_priv_header_banner_ad, .ppr_priv_footer_banner_ad, .ppr_priv_banner_ad, .ad_column_full");if(e.length)try{for(var n=r.mobile(),i=0;i<e.length;i++){for(var s=e[i],o=s.querySelectorAll(".gptAd"),d=!1,c=0;c<o.length;c++){var l=o[c];n===!a(l)?(d=!0,l.classList.remove("hidden"),l.classList.remove("inactive")):(l.classList.add("hidden"),l.classList.add("inactive"))}s.classList.toggle("hidden",!d)}}catch(e){t.error(e,"Error handling responsive header/footerbanners")}}var s=!1,o=728,d={};return d.init=n,d});
require(["ta/p13n/placements"],function(n){var e=n.define.bind(n,"footer_banner_ad","handlers",["handlers"]);e(["placement","cpm/BannerResizeHandler"],function(n,e){e.init()})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"ta_message_sensitive_issues_badge","handlers",["handlers"]);t(["placement","lib/jquery-amd"],function(e,t){"use strict";var e=t("#"+e.id),n=t(".ui_message_response",e),s=t(".truncate_to_limit",n),i=t(".toggle_limit",n);i.length>0&&i.on("click",function(){n.toggleClass("expanded"),s.toggleClass("truncate")})})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"ta_message_sensitive_issues_flag","handlers",["handlers"]);a(["ta/Core/TA.Record"],function(e){"use strict";function a(){e.trackEventOnPage("mediabadge_atf","mediabadge_atf_click")}return e.trackEventOnPage("mediabadge_atf","mediabadge_atf_view"),{trackMediaBadgeAtfClick:a}})});
