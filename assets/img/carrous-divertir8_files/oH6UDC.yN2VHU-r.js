(this.$WP=this.$WP||[]).push(["oH6UDC",(e,i)=>{"use strict";var n,a,t,d,l,o,s,r,m,u,c,k,v,g,N,p,b,f,S,F,h,y,I,_,C,A,P,V,L,T,D,R,O,M,E,w,j,x,z,W,U;function B(e){if(!e||e.loading||!e.locations)return{photoCount:0,albumList:[]};var{locations:[{photoCount:i,albums:n}]=[]}=e;return{photoCount:i,albumList:[{id:101,title:c("dmo_photos_all_photos"),photoCount:i},...n]}}var J={},H={};function q(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!H[i]&&(H[i]=!0,!0)}))}var $=({locationName:e,supplierCategory:i})=>a("div",{className:"_2B14J54x"},a(C,{photo:void 0,display:"inline",target:"_self",withBorder:!0,size:"small"}),a("div",{className:"_38eKOjvh"},a("div",{className:"_3oPynN1M"},a("span",{className:"_1kgDFNmt"},"STAFF"===i&&c("Photoviewer_staffPhotoCaption"),"OWNER"===i&&c("Photoviewer_mgmtPhotoCaption_v2",{0:""})),a("span",{className:"ARKZxbag"},e)))),Q=({locationId:e,photoId:i,contentLanguage:n,pageLanguage:d,children:l})=>{var o=n||"en";if(o===d)return null;var s=["toverlay",e,i,o=o.replace(/^zh/,"zh-"),d].join("-"),r=`/MachineTranslation?g=0&d=${e}&ff=${i}&page=caption&sl=${o}&tl=${d}`;return a(t,null,a(V,{name:s},l),a(L,{name:s},a(T,{url:r},({loading:e,data:i})=>e?a(D,null):a("div",{className:"_2u3SgWrq",dangerouslySetInnerHTML:{__html:i}}))))},Z=e=>a(U,e,e=>a("div",{className:"_3m5ScRBC"},a(A,{onClick:e,type:"secondary",size:"small"},c("google_translation")))),K=({offset:e,total:i,onPageChange:n,locationId:d,geoId:l,selectedAlbum:o,loggedInUserId:s,renderFullContent:r})=>a(u,{query:W,variables:{locationId:d,limit:5,offset:e,album:o,loggedInUserId:s,loggedIn:!!s},skip:!d||d<0},({loading:o,data:s})=>{if(o)return a(N,{numSections:5});var{photos:m,currentMember:u,totalCount:c}=function(e){if(!e||e.loading)return{photos:[],currentMember:void 0,totalCount:0};var{currentMember:i,locations:[{albums:[{totalCount:n,photos:a=[]}]=[]}]=[]}=e;return{photos:a,currentMember:i,totalCount:n}}(s);return a(t,null,m?m.map(e=>a(M,{key:e.id,photo:e,currentMember:u,locationId:d,geoId:l,renderFullContent:r})):null,a(p,{total:i||c,limit:5,offset:e,module:"photos",onClick:e=>n(e)}))}),X=(e,i,n,a,t,d,o)=>{i<0||e<0||(l(d,void 0===o?null:o),r({module:n,action:a,context:t,value:0,destinationUrl:"/PostPhotos"}),window.open(`/PostPhotos-g${e}-d${i}`))};return[()=>{(E=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"AlbumListQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"albumId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}},"defaultValue":{"kind":"IntValue","value":"101"},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photoCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"albums"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"albumIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"albumId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"title"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"totalCount"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":213}}')).__key=57211092363511,E.loc.source={body:"34087ed668f7"},O=class extends n{componentDidMount(){var{selectedAlbum:e,setSelectedAlbum:i,data:n}=this.props;if(n&&!n.loading){var{albumList:a}=B(n);if(106===e){var t=a.filter(({id:e})=>106===e)[0];if(!t||0===t.total){var d=a.filter(({id:e})=>107===e)[0];d&&d.totalCount>0?i(d):i(a.filter(({id:e})=>101===e)[0])}}}}shouldComponentUpdate(e){return e.selectedAlbum!==this.props.selectedAlbum||!e.data.loading&&this.props.data.loading}render(){var{selectedAlbum:e,setSelectedAlbum:i,data:n}=this.props,{albumList:t}=B(n),d=a("div",{className:"_3vRAcnMA"},c("Photoviewer_albumFilterHeader"));return n.loading?a("div",{className:"_3-CLxwp8"},d,a(g,{height:"125px",marginBottom:"8px"})):a("div",{className:"_3-CLxwp8"},d,a("div",{className:"_14bOGitZ"},t.map(n=>{var{id:t,title:d}=n;return a("span",{className:k("_11kKXklc",e===t?"_31ZN-HC8":"",{_1eNoCbNA:v("cx_brand_refresh_degreen")}),onClick:()=>i(n),key:t},d)})))}},w=m(E,{skip:({locationId:e})=>!e||e<0,options:({locationId:e,placeType:i})=>({variables:{locationId:e,albumId:"AIRLINE"===i||"CAR_RENTAL_OFFICE"===i?107:101}})})(O),(j=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"LRComm_PhotoSizes"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"PhotoSize"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isHorizontal"},"arguments":[],"directives":[]}]}}],"loc":{"start":0,"end":90}}')).__key=0x9fea57931bb8,j.loc.source={body:"9fea57931bb8"},(x=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"LRComm_MemberFields"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"MemberProfile"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"userId"},"name":{"kind":"Name","value":"id"},"arguments":[],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"static"},"arguments":[]}]},{"kind":"Field","name":{"kind":"Name","value":"isMe"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isVerified"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isFollowing"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"displayName"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"username"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"avatar"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_PhotoSizes"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":269}}')).__key=74053504260381,x.loc.source={body:"4359ecd0d91d"},x.definitions=x.definitions.concat(j.definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!J[i]&&(J[i]=!0,!0)}))),(z=JSON.parse('{"kind":"Document","definitions":[{"kind":"FragmentDefinition","name":{"kind":"Name","value":"LRComm_AdditionalNames"},"typeCondition":{"kind":"NamedType","name":{"kind":"Name","value":"LocationInformation"}},"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"normal"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longOnlyParent"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longParentAbbreviated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longOnlyParentAbbreviated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longParentStateAbbreviated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longOnlyParentStateAbbreviated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"geo"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"abbreviated"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"abbreviatedRaw"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"abbreviatedStateTerritory"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"abbreviatedStateTerritoryRaw"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":358}}')).__key=0xa7c63ebda7da,z.loc.source={body:"a7c63ebda7da"},(W=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PhotosQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"offset"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"limit"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"album"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"currentMember"},"name":{"kind":"Name","value":"memberProfile"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"userId"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"id"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedInUserId"}}}]}}],"directives":[{"kind":"Directive","name":{"kind":"Name","value":"include"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"if"},"value":{"kind":"Variable","name":{"kind":"Name","value":"loggedIn"}}}]}],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_MemberFields"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"albums"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"albumIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"album"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"totalCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"page"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"limit"},"value":{"kind":"Variable","name":{"kind":"Name","value":"limit"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"offset"},"value":{"kind":"Variable","name":{"kind":"Name","value":"offset"}}}]}},{"kind":"Argument","name":{"kind":"Name","value":"filter"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"supplierCategories"},"value":{"kind":"ListValue","values":[{"kind":"EnumValue","value":"TRAVELER"},{"kind":"EnumValue","value":"OWNER"},{"kind":"EnumValue","value":"STAFF"}]}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"caption"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"uploadDate"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"supplierCategory"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"location"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_AdditionalNames"},"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parent"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_AdditionalNames"},"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"route"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"absoluteUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"socialStatistics"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"followCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isFollowing"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isLiked"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isReposted"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isSaved"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"likeCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"repostCount"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"tripCount"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_PhotoSizes"},"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"userProfile"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"FragmentSpread","name":{"kind":"Name","value":"LRComm_MemberFields"},"directives":[]}]}}]}}]}}]}}]}}],"loc":{"start":0,"end":1295}}')).__key=0xa11b3bedb412,W.loc.source={body:"a11b3bedb412"},W.definitions=W.definitions.concat(q(x.definitions)),W.definitions=W.definitions.concat(q(j.definitions)),W.definitions=W.definitions.concat(q(z.definitions)),U=P(e=>({pageLanguage:R(e)}))(Q),(M=class extends d{render(){var e,{photo:i,currentMember:n,locationId:d,geoId:l,renderFullContent:o}=this.props,{id:s,caption:r,supplierCategory:m,lang:u,photoSizes:k,userProfile:g,route:N,socialStatistics:p}=i,C="TRAVELER"===m;e=C?g?g.displayName:c("traveler_photo"):c("OWNER"===m?"management_photo":"tripadvisor_photo");var A=C?{modalName:"repost_Photo_"+s,repostPreviewProps:{feedSectionItem:{object:Object.assign({},i,{__typename:"Photo"})},member:n,actor:g},actor:g,socialStatistics:p}:void 0;return a(_,{key:s},C?a(y,{objectEventType:"onFullPhoto",object:i,actor:g,member:n,isEmbedded:!1,renderMemberActions:o}):a($,{locationName:i.location.name,supplierCategory:m}),a("div",{className:"_1Dm3JWGD"},a("div",{className:"_4NPXSCqt",onClick:()=>{!function(e,i,n,a){var t={detail:e,geo:i,albumViewMode:"grid",updateType:"full",albumId:101,filter:7};a>0&&(t.ff=a,t.baseMediaId=a,t.albumViewMode="hero"),__non_webpack_require__(["trjs!actions/openRespPhotoViewer"],e=>{e.openWithOptions(t)})}(d,l,0,s)}},a(f,{sources:k,width:"100%",height:"300px",doNotRemoveImage:!0})),r&&a("div",{className:"_3iJXzMEe"},a(Z,{locationId:d,photoId:i.id,contentLanguage:u}),r)),a(t,null,a(I,{stats:p,socialRef:{type:"Photo",id:s},socialProofParams:{displayName:e,poiName:i.location.name}}),o&&a(S,null,a(F,{item:i}),a(h,null,v("social_ugc_share")&&C&&a(b,{url:""+N.url,itemType:"Photo",itemId:s,styleAsSocialAction:!0,alignEdge:"right",repostProps:A})))))}}).defaultProps={currentMember:null},K.defaultProps={loggedInUserId:null},e("default",class extends n{constructor(...e){super(...e),this.state={offset:0,selectedAlbum:0,total:0},this.onPageChange=({offset:e})=>this.setState({offset:e}),this.setSelectedAlbum=e=>{var{id:i,totalCount:n}=e,{selectedAlbum:a}=this.state;i!==a&&this.setState({offset:0,selectedAlbum:i,total:n})}}render(){var{offset:e,selectedAlbum:i,total:n}=this.state,{locationId:d,geoId:l,loggedInUserId:r,placeType:m}=this.props,u=i||("AIRLINE"===m||"CAR_RENTAL_OFFICE"===m?107:101);return a(o,{onVisible:()=>{s({module:"photos",action:"in_view"})}},i=>a("div",{ref:i},a(t,null,a(w,{locationId:d,selectedAlbum:u,setSelectedAlbum:this.setSelectedAlbum,placeType:m}),a(K,{locationId:d,geoId:l,selectedAlbum:u,onPageChange:this.onPageChange,loggedInUserId:r,offset:e,total:n,renderFullContent:this.props.isSelectedTab}))))}}),e("openAddPhoto",X)},[e=>(n=e.Component,a=e.createElement,t=e.Fragment,d=e.PureComponent),e=>l=e.setPIDCookie,e=>o=e.HasBeenVisible,e=>(s=e.default,r=e.trackEventCookie),e=>(m=e.graphql,u=e.Query),e=>c=e.localize,e=>k=e.default,e=>v=e.featureIsEnabled,e=>g=e.default,e=>N=e.FeedLoadingSkeleton,e=>p=e.default,e=>b=e.ShareCta,e=>f=e.ResponsiveImage,e=>(S=e.SocialActionBar,F=e.LikeAction,h=e.NestedSocialAction),e=>y=e.MemberEventOnObjectBlock,e=>I=e.default,e=>_=e.default,e=>C=e.Avatar,e=>A=e.default,e=>P=e.connect,e=>V=e.Opener,e=>L=e.Modal,e=>T=e.AjaxRequest,e=>D=e.LoadingSpinner,e=>R=e.contentLangFromState]]},["cDcdfi","_wYjwe","BLrxBS","Jk5sjx","MGkW-Q","535agn","jSLlaY","-i3PJS","Xi-2HZ","7LISht","Mqro46","ui0Mdg","KwOV1Z","zrL722","WWE3W5","Ac9jMZ","lQWUxH","Hgrhyo","PCbs_l","h74DsO","pT-O8u","HKQFPT","kBiZlJ","V08PS7","QmAjD5"]]);
