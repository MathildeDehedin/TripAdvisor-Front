(this.$WP=this.$WP||[]).push(["10hEZ1",(e,i)=>{"use strict";var t,n,a,r,s,o,d,l,p,m=e=>{var[i,n]=t({}),[a,r]=t({});return{serviceBasedTrackingEnabled:!0,itemImpressionIdStore:i,tabImpressionIdStore:a,shelfType:e,update:{setItemImpressionIdStore:e=>{n(e)},setTabImpressionIdStore:e=>{r(e)}}}},c=e=>e.product&&`shelf_${e.shelfIndex}_item_${e.product.placement}_Product_${e.product.productCode}`||e.attraction&&`shelf_${e.shelfIndex}_item_${e.attraction.placement}_Attraction_${e.attraction.id}`||e.category&&`shelf_${e.shelfIndex}_item_${e.category.itemIndex}_Category_${e.category.groupTagId}`||e.destination&&`shelf_${e.shelfIndex}_item_${e.destination.placement}_Destination_${e.destination.id}`||e.taxonomy&&`shelf_${e.shelfIndex}_item_0_Taxonomy_${e.taxonomy.id}`||"",u=()=>{var[,e]=s(d),[{page:i},{uid:t}]=a(o),{serviceBasedTrackingEnabled:n,itemImpressionIdStore:l,shelfType:m,update:{setItemImpressionIdStore:u}}=a(p);return r(a=>{if(n){var r=a.filter(e=>!l[c(e)]);if(r.length){var s=Object.assign({},l),o=((e,i,t,n)=>e.length>0?{experiencesShelfItems:{pageviewUid:i,servlet:t,shelfType:n,shelfItems:e.map(e=>(e=>{var i,t,n,a,r,s,o,d,l,p,m,c,u;return e.product&&{itemType:"Product",itemId:null==(i=e.product)?void 0:i.productCode,itemIdType:"ProductCode",name:null==(t=e.product)?void 0:t.title,url:null==(n=e.product)?void 0:n.url,imageUrl:null==(a=e.product)?void 0:a.imgUrl,position:null==(r=e.product)?void 0:r.placement,tabIndex:e.shelfIndex,tabId:null==(s=e.product)?void 0:s.tabId,rating:null==(o=e.product)?void 0:o.rating,reviewCount:null==(d=e.product)?void 0:d.reviewCount,price:null==(l=e.product)?void 0:l.fromPrice.replace(/[^\d.,\s]+/g,"").replace(",","."),currency:null==(p=e.product)?void 0:p.currency,productLabelTag:null==(m=e.product)||null==(c=m.productLabelTag)?void 0:c.labelType}||e.category&&{itemType:"Category",itemId:""+e.category.groupTagId,itemIdType:"CategoryId",name:e.category.title,url:e.category.link.url,imageUrl:e.category.imgUrl,position:e.category.itemIndex,tabIndex:e.shelfIndex,tabId:"BROWSE_BY_CATEGORY"}||e.attraction&&{itemType:"Attraction",itemId:""+e.attraction.id,itemIdType:"LocationId",name:e.attraction.name,url:e.attraction.detailUrl,position:e.attraction.placement,tabIndex:e.shelfIndex,rating:e.attraction.bubbleRating,reviewCount:e.attraction.numReviews}||e.destination&&{itemType:"Destination",itemId:""+e.destination.id,itemIdType:"GeoId",name:e.destination.name,url:e.destination.url,imageUrl:null==(u=e.destination.photo)?void 0:u.photoSizes[0].url,position:e.destination.placement,tabIndex:e.shelfIndex}||null})(e)).filter(Boolean)}}:null)(r,t,i,m);null!=o&&e({impressions:[o]}).then(e=>{var i,t,n=!e.error&&(null==e||null==(i=e.data)||null==(t=i.PostImpressions)?void 0:t[0]),a=e.operation.variables;if(n&&a){var r=(e=>{var i,t,n=null==(i=e.impressions)||null==(t=i[0])?void 0:t.experiencesShelfItems;return((null==n?void 0:n.shelfItems)||[]).map(e=>(e=>`shelf_${(null==e?void 0:e.tabIndex)||"0"}_item_${(null==e?void 0:e.position)||"0"}_${(null==e?void 0:e.itemType)||"0"}_${(null==e?void 0:e.itemId)||"0"}`)(e))})(a).reduce((e,i)=>Object.assign({},e,{[i]:n}),{});u(Object.assign({},s,{},r))}})}}},[e,n,l,u,t,i,m])},I=e=>{var[,i]=s(l),[{page:t},{uid:n}]=a(o),{serviceBasedTrackingEnabled:d,itemImpressionIdStore:m,shelfType:u}=a(p);return r(a=>{if(d){var r=m[c(e)];if(r){var s=((e,i,t,n,a,r)=>e.product&&{eventTimestampMs:0,pageUid:n,Experiences:{ShelfItemClick:{pageviewUid:n,actionPart:r,impressionId:a,servlet:t,shelfType:i,itemType:"Product",itemId:e.product.productCode,itemIdType:"ProductCode",position:e.product.placement,tabIndex:e.shelfIndex,tabId:e.product.tabId}}}||e.category&&{eventTimestampMs:0,pageUid:n,Experiences:{ShelfItemClick:{pageviewUid:n,actionPart:r,impressionId:a,servlet:t,shelfType:i,itemType:"Category",itemId:""+e.category.groupTagId,itemIdType:"CategoryId",position:e.category.itemIndex,tabIndex:e.shelfIndex,tabId:"BROWSE_BY_CATEGORY"}}}||e.attraction&&{eventTimestampMs:0,pageUid:n,Experiences:{ShelfItemClick:{pageviewUid:n,actionPart:r,impressionId:a,servlet:t,shelfType:i,itemType:"Attraction",itemId:""+e.attraction.id,itemIdType:"LocationId",position:e.attraction.placement,tabIndex:e.shelfIndex}}}||e.destination&&{eventTimestampMs:0,pageUid:n,Experiences:{ShelfItemClick:{pageviewUid:n,actionPart:r,impressionId:a,servlet:t,shelfType:i,itemType:"Destination",itemId:""+e.destination.id,itemIdType:"GeoId",position:e.destination.placement,tabIndex:e.shelfIndex}}})(e,u,t,n,r,a);s&&i({interactions:[s]})}}},[i,d,m,n,t,u,e])},v=(e,i)=>({itemType:"Tab",itemId:""+(e.trackingId||e.groupTagId||"0"),itemIdType:"CategoryId",tabIndex:i}),g=e=>"shelf_tab_"+e,f=()=>{var[,e]=s(d),[{page:i},{uid:t}]=a(o),{serviceBasedTrackingEnabled:n,tabImpressionIdStore:l,shelfType:m,update:{setTabImpressionIdStore:c}}=a(p);return r(a=>{if(n){var r=a.filter((e,i)=>!l[g(i)]);if(r.length>0){var s=Object.assign({},l),o=((e,i,t,n)=>e.length>0?{experiencesShelfTabs:{pageviewUid:i,servlet:t,shelfType:n,shelfTabs:e.map((e,i)=>v(e,i))}}:null)(r,t,i,m);null!=o&&e({impressions:[o]}).then(e=>{var i,t,n=!e.error&&(null==e||null==(i=e.data)||null==(t=i.PostImpressions)?void 0:t[0]),a=e.operation.variables;if(n&&a){var r=(e=>{var i,t,n=null==(i=e.impressions)||null==(t=i[0])?void 0:t.experiencesShelfTabs;return((null==n?void 0:n.shelfTabs)||[]).map(e=>{return"shelf_tab_"+((null==(i=e)?void 0:i.tabIndex)||"0");var i})})(a).reduce((e,i)=>Object.assign({},e,{[i]:n}),{});c(Object.assign({},s,{},r))}})}}},[e,n,l,c,t,i,m])},T=()=>{var[,e]=s(l),[{page:i},{uid:t}]=a(o),{serviceBasedTrackingEnabled:n,tabImpressionIdStore:d,shelfType:m}=a(p);return r((a,r)=>{if(n){var s=d[g(r)];if(s){var o=((e,i,t,n,a,r)=>({eventTimestampMs:0,pageUid:t,Experiences:{ShelfTabClick:Object.assign({pageviewUid:t,impressionId:n,servlet:a,shelfType:r},v(e,i))}}))(a,r,t,s,i,m);o&&e({interactions:[o]})}}},[e,n,d,t,i,m])},y=()=>{var[,e]=s(l),[{page:i},{uid:t}]=a(o),{serviceBasedTrackingEnabled:n,shelfType:d}=a(p);return r((a,r)=>{if(n){var s=((e,i,t,n,a)=>({eventTimestampMs:0,pageUid:t,Experiences:{ShelfShowMoreClick:Object.assign({pageviewUid:t,servlet:n,shelfType:a},v(e,i))}}))(a,r,t,i,d);e({interactions:[s]})}},[e,n,t,d,i])};return[()=>{(d=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogImpressions"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"impressions"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Impressions_ImpressionInput"}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"PostImpressions"},"name":{"kind":"Name","value":"Impressions_postImpressions"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"impressions"}}}],"directives":[]}]}}],"loc":{"start":0,"end":152}}')).__key=0x7ce03388fda1,d.loc.source={body:"7ce03388fda1"},(l=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractionV4"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"interactions"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Impressions_InteractionInput"}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"PostInteractions"},"name":{"kind":"Name","value":"Impressions_postInteractions"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"interactions"}}}],"directives":[]}]}}],"loc":{"start":0,"end":159}}')).__key=0x8a0621d91c80,l.loc.source={body:"8a0621d91c80"},p=n({serviceBasedTrackingEnabled:!1,itemImpressionIdStore:{},tabImpressionIdStore:{},shelfType:"",update:{setItemImpressionIdStore:()=>{},setTabImpressionIdStore:()=>{}}}),e({ShelfTrackingContext:p,useShelfItemClickLogger:I,useShelfItemsVisibleLogger:u,useShelfShowMoreClickLogger:y,useShelfTabClickLogger:T,useShelfTabsVisibleLogger:f,useShelfTrackingContext:m})},[e=>(t=e.useState,n=e.createContext,a=e.useContext,r=e.useCallback),e=>s=e.useMutation,e=>o=e.Route]]},["cDcdfi","5X2em-","2R4xv2"]]);
