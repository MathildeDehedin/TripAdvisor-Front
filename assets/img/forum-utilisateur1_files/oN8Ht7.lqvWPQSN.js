(this.$WP=this.$WP||[]).push(["oN8Ht7",(e,t)=>{"use strict";var a,i,r,n,o,s,d,h=[".jpg",".jpeg",".gif",".png"],l=[".mp4",".m4v",".mov"],u=e=>{var t;return e.forEach(e=>{t?t.width*t.height<e.width*e.height&&(t=e):t=e}),t},c=(e,t,a)=>{var i=Math.max(e,t);return Math.min(i,a)},g=e=>{var t="ta_video";return e&&("Home"===e.page?t="home_video":"Profile"===e.page&&(t="profile_video")),t},v=([e,t,a],i)=>{var r=e+(t?t/60:0)+(a?a/3600:0);return i<0?-r:r},m=(e,a)=>{var i=document.createElement("img");i.onload=function(){t("oN8Ht7/95Lu0z").then(e=>{e.getData(this,(function(){var t=e.getTag(this,"GPSLatitude"),i=e.getTag(this,"GPSLatitudeRef"),r=o.get(i),n=e.getTag(this,"GPSLongitude"),d=e.getTag(this,"GPSLongitudeRef"),h=s.get(d);if(t&&r&&n&&h){var l=v(t,r),u=v(n,h);a({latitude:l,longitude:u})}}))})};var r=document.createAttribute("src");r.value=e,i.setAttributeNode(r)},f=(e,t)=>{var a=new Image;a.onload=function(){t(new n(this.width,this.height))},a.src=e},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w=e=>{var t="",a="",i="",r="",n="",o="",s=0,d=[];do{t=p.indexOf(e.charAt(s++))<<2|(r=p.indexOf(e.charAt(s++)))>>4,a=(15&r)<<4|(n=p.indexOf(e.charAt(s++)))>>2,i=(3&n)<<6|(o=p.indexOf(e.charAt(s++))),d.push(t),64!==n&&d.push(a),64!==o&&d.push(i),t="",a="",i="",r="",n="",o=""}while(s<e.length);return d},k=(e,t,a)=>{var i=`data:${a};base64,`;if(!e.match(i))return t;var r=e.replace(i,"");if(/[^A-Za-z0-9+/=]/g.exec(r))return t;var n=(e=>{var t=0,a=[];do{if(255===e[t]&&218===e[t+1])break;if(255===e[t]&&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);a.push(r),t=i}}while(t<=e.length);return a})(w(r));return i+(e=>{var t="",a="",i="",r="",n="",o="",s="",d="",h=0;do{n=(a=e[h++])>>2,o=(3&a)<<4|(i=e[h++])>>4,s=(15&i)<<2|(r=e[h++])>>6,d=63&r,isNaN(i)?(s=64,d=64):isNaN(r)&&(d=64),t=`${t}${p.charAt(n)}${p.charAt(o)}${p.charAt(s)}${p.charAt(d)}`,a="",i="",r="",n="",o="",s="",d=""}while(h<e.length);return t})(((e,t)=>{var a,i,r,n,o,s,d=(a=e,i=(e=>{for(var t,a=0;a<e.length;a++)if(255===(t=e[a])[0]&&225===t[1])return t;return[]})(t),n=(r=w(a)).indexOf(255,3),o=r.slice(0,n),s=r.slice(n),o.concat(i).concat(s));return new Uint8Array(d)})(t.replace(i,""),n))},U=e=>{for(var t=atob(e.split(",")[1]),a=[],i=0;i<t.length;)a.push(t.charCodeAt(i)),i+=1;return new Uint8Array(a)},b=(e,t,a,i,r,n)=>{var o=document.createElement("canvas");return o.width=r,o.height=n,o.getContext("2d").drawImage(e,a,i,r,n,0,0,r,n),"image/png"===t?o.toDataURL():o.toDataURL("image/jpeg")},y=(e,t,a,i)=>{var r=new Image;r.onload=()=>{var e=document.createElement("canvas");e.width=90===Math.abs(t%180)?r.height:r.width,e.height=90===Math.abs(t%180)?r.width:r.height;var n=e.getContext("2d");n.save(),n.translate(e.width/2,e.height/2),n.rotate(t*Math.PI/180),n.drawImage(r,-r.width/2,-r.height/2),n.restore(),i(e.toDataURL(a))},r.src=e},A=(e,t)=>{var a=new Image;a.onload=()=>{var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var i=e.getContext("2d");i.drawImage(a,0,0),i.save(),t(e.toDataURL())},a.src=e},N=e=>1===e?0:8===e?270:3===e?180:6===e?90:0,R=(e,t,a)=>{var i=new FileReader;i.onload=()=>{if(t&&("CHROME"===t.family&&t.majorVersion>=81||"SAFARI"===t.family))return a(-1);if(!(i.result instanceof ArrayBuffer))return a(-1);var e=new DataView(i.result);if(65496!==e.getUint16(0,!1))return a(-2);for(var r=e.byteLength,n=2;n<r;){if(e.getUint16(n+2,!1)<=8)return a(-1);var o=e.getUint16(n,!1);if(n+=2,65505===o){if(n+=2,1165519206!==e.getUint32(n,!1))return a(-1);var s=18761===e.getUint16(n+=6,!1);n+=e.getUint32(n+4,s);var d=e.getUint16(n,s);n+=2;for(var h=0;h<d;h++)if(274===e.getUint16(n+12*h,s))return a(e.getUint16(n+12*h+8,s))}else{if(65280!=(65280&o))break;n+=e.getUint16(n,!1)}}return a(-1)},i.readAsArrayBuffer(e)},L=(e,t,a)=>{R(e,t,t=>{var r=N(t);if(0===r)a(URL.createObjectURL(e));else{var n=new FileReader;n.onload=()=>{var t=n.result&&n.result.toString()||"",o=e.type,s=URL.createObjectURL(e);y(s,r,o,e=>{URL.revokeObjectURL(s);var r=e;try{r=k(t,r,o)}catch(e){i.warn("Cannot restore exif:",e)}var n=new Blob([U(r)],{type:o});a(URL.createObjectURL(n))})},n.readAsDataURL(e)}})},x=(e,t,a,i)=>{var r=new FileReader;r.onload=()=>{var e=r.result&&r.result.toString()||"",n=k(e,t,a);i(n)},r.readAsDataURL(e)},S=(e,t,a,r,n)=>{e?fetch(e,{method:"GET",credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e}).then(e=>e.blob()).then(e=>{R(e,r,i=>{var r=N(i);0===r?x(e,t,a,n):y(t,-r,a,t=>{x(e,t,a,n)})})}).catch(e=>{i.warn("Cannot restore exif:",e),n(t)}):n(t)},D=e=>h.includes(a(e))?"photo":l.includes(a(e))?"video":"unknown",I=(e,t,a,i,r)=>{t>a?r():setTimeout(()=>{i.query({query:d,variables:{id:e},fetchPolicy:"network-only"}).then(n=>{if(n.data&&n.data.photos&&n.data.photos[0]){var{statuses:o}=n.data.photos[0];o&&0!==o.length&&!o.includes("UPLOADING")?r():I(e,t+1,a,i,r)}else I(e,t+1,a,i,r)})},1e3)};return[()=>{e("Point",r=class{constructor(e,t){this.x=void 0,this.y=void 0,this.distanceFrom=e=>Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2),this.x=e,this.y=t}}),e("Dimension",n=class{constructor(e,t){this.width=void 0,this.height=void 0,this.equals=e=>e&&this.width===e.width&&this.height===e.height,this.aspectRatio=()=>this.width/this.height,this.width=e,this.height=t}}),o=new Map([["N",1],["S",-1]]),s=new Map([["E",1],["W",-1]]),(d=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"PhotoDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"id"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"photos"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"photoIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"id"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"statuses"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":127}}')).__key=0xbaf01ab562f7,d.loc.source={body:"baf01ab562f7"},e({Dimension:n,Point:r,base64ToUint8Array:U,boundNumber:c,checkMediaReady:I,cropImageToJpegUrl:b,getGeoPointFromExif:m,getImageDataURL:A,getImageDimensions:f,getSizeWithMostPixels:u,getVideoTrackingModule:g,mediaType:D,orientationValueToDegrees:N,photoOrientation:R,restoreExifAndRotateIfNeeded:S,rotateImageIfNeeded:L,supportedImageTypes:h,supportedVideoTypes:l})},[e=>a=e.fileExtentsion,e=>i=e.default]]},["V_I8wA","4LU1Ax"]]);
