(this.$WP=this.$WP||[]).push(["5dJy8s",(e,t)=>{"use strict";var o,i,n,a,s,l,r,d,c,u,h,p,m,g,v,f,C,N,S,y,I,_,w,b,O,z,j,P,M,R,L,A,B,k,D,x,E,F,T=({children:e})=>n("div",{className:"ui_column\n      is-12-mobile is-offset-0-mobile\n      is-12-tablet is-offset-0-tablet\n      is-4-desktop is-offset-8-desktop\n      is-3-widescreen is-offset-9-widescreen\n      _3a4RPHw_"},e),W=e=>{var t,o,i,n,a=e.photoSizes.length-1;return{type:"image.gallery",title:(t=e.location,o=e.userProfile,null!=(null==t?void 0:t.name)&&null!=(null==t?void 0:t.isGeo)&&null!=(null==o?void 0:o.displayName)&&(!1===t.isGeo&&null!=t.parent.additionalNames.long?i=h("social_opengraph_photo_title",{locationName:t.name,additionalLocationName:t.parent.additionalNames.long,userName:o.displayName}):null==t.placetype||null==t.parent.placetype?i=h("social_opengraph_photo_title_short",{locationName:t.additionalNames.long,userName:o.displayName}):null!=(null==t?void 0:t.name)&&null!=(null==t||null==(n=t.parent)?void 0:n.name)&&(i=h("social_opengraph_photo_title_short",{locationName:`${t.name}, ${t.parent.name}`,userName:o.displayName}))),i||""),description:null!=e.caption?""+e.caption:"",url:e.route.url,image:{url:""+e.photoSizes[a].url,width:e.photoSizes[a].width,height:e.photoSizes[a].height}}},U=e=>{if(null==(null==e?void 0:e.photoSizes)||0===(null==e?void 0:e.photoSizes.length))return!1;var t=e.photoSizes.length-1,o=e.photoSizes[t];return o.width/o.height>=1.1},G=e=>{if(null==(null==e?void 0:e.photoSizes)||0===(null==e?void 0:e.photoSizes.length))return!1;var t=e.photoSizes.length-1,o=e.photoSizes[t];return Math.abs(1-o.width/o.height)<=.1},H=e=>!G(e)&&!U(e),V=(e,t)=>(e=>e.every(G))(e)?t:(e=>e.every(U))(e)?t/4*3:(e=>e.every(H))(e)?t/3*4:t,Z=e=>{var t=`${e.metadata.__typename}_${e.metadata.id}`,{matches:o,to:i,close:r}=v({modal:t}),[d,h]=a(o),[p,y]=a("MOBILE"===e.viewportCategory?411:600),I=s(null);l(()=>{if(I.current&&"function"==typeof I.current.getBoundingClientRect){var e=I.current.getBoundingClientRect().width;y(e)}else m.error("Container ref is not properly set in FeedSectionPhotoCarousel")},[]);var _=()=>{r(),h(!1)};return e.photos&&0!==e.photos.length?n(f,null,({route:a})=>{var s,l;return n("div",{ref:I,className:"_26Z7iGCj"},(null==a?void 0:a.modal)===t?n(C,{openGraphInfo:W(e.photos[0])}):null,e.includeRoutedModal&&o&&d&&n(u,null,n(N,{header:n(T,null,n(S,{branding:"TA_GREEN"})),onClose:_,closeXColorVariant:"WHITE",isFullBleed:!0,bodyScroll:!1,fullscreenAlways:!0},n(F,{images:e.photos,actor:e.actor,deleteObject:e.deleteObject,untagObject:e.untagObject,showPOISavesIcon:!0,currentIndex:e.currentlyDisplayedIndex,onPhotoChange:e.onPhotoChange,viewportCategory:e.viewportCategory,additionalContent:e.additionalModalContent,socialStatisticsBar:e.socialStatisticsBar,socialActionBar:e.socialActionBar,overflowMenuObject:e.overflowMenuObject,overflowMenuObjectForType:e.overflowMenuObjectForType}))),n(g,{to:Object.assign({},i,{username:(null==e||null==(s=e.actorForUrl)?void 0:s.username)||(null==e||null==(l=e.actor)?void 0:l.username)}),href:null,onClick:t=>{h(!0),e.onCarouselClick&&e.onCarouselClick(t)},activeClassName:"",className:"_3FJy6Cip"},n(c,{photos:e.photos.map(e=>({id:e.id,photoSizes:e.photoSizes})),width:"100%",height:V(e.photos,p)+"px",displayIndex:e.currentlyDisplayedIndex,totalCount:e.photos.length,showIndicatorDots:e.photos.length>1,showProgress:e.photos.length>1,hideArrows:!0,noCta:!0,onPhotoChange:e.onPhotoChange,maxIndicatorDots:10,lazyLoadImages:!0})))}):null},X=({className:e,pois:t,limit:o=20})=>{var[i,s]=a(!1),l=j(t),r={left:0,top:0,bottom:0,right:100};return n("div",{className:"_3ie_aTFJ "+e},n(O,null,e=>n(B.Consumer,null,a=>n(k,{top:!1,bottom:!1,left:t.length>0,right:t.length>0,threshold:0,minDistance:0,snapToEdge:r,className:"_1HmUiZ_r _1YvlibvT",isActive:!a||a.isActive,onScroll:i?void 0:t=>{s(!0),e(t,"linkedPoiScroll")}},e=>n(A,{staggerDurationBy:"30",duration:400,maintainContainerHeight:!0,typeName:null,enterAnimation:"fade",leaveAnimation:"fade"},l.slice(0,o).map((o,i)=>n("div",{key:o.objectId},n("div",{ref:e(o.objectId),className:I("_2X5tM2jP",{_2RdXRsdL:0===i,_1gafur1D:i===t.length-1})},n("div",null,n(P,{poi:o,size:"large",borderRadius:"0",showSavesIcon:!0}))))))))))},$=({sponsorship:e,showUserProfile:t})=>{if(!e)return null;var{userProfile:o}=e;if(o&&t){var i,a={0:I("ui_link","_1ymeM1q8",{verified:o.isVerified}),1:null==o||null==(i=o.route)?void 0:i.url,2:D(x(o))};return n("div",{className:"_25c6msVG"},p(h("provided_by_username",a)))}return n("div",{className:"_25c6msVG"},h("discovery_sponsored_label"))},J=({topNote:e,header:t,content:o,socialStatisticsBar:i,socialActionBar:a,isSingleObject:s,pois:l,contentClass:d,clusterId:c,sponsorship:u})=>{var h=c?"_1lnkrc1b section":"ui_card section",p=Array.isArray(l)&&l[0]?l:[];return n("div",{className:I("nMewIgXP",s?h:"_3g3L2INz")},n(r,null,u&&n("div",{className:"_1nEWZ2cZ"},n($,{sponsorship:u})),e&&n("div",{className:"_1-CAG4lm"},e),n("div",{className:"_2MyXNIJV"},t),n("div",{className:I("f14S8Wzw",d)},o,p.length?n(J.Content,{fullWidth:!0},n(X,{pois:p,className:"_1NSvkLw1"})):null),i&&n("div",{className:"_2MyXNIJV"},i),a&&n("div",{className:"_2MyXNIJV"},a)))};return[()=>{e("SectionModal$1",E=class extends o{constructor(e){super(e),this.imageContainerRef=i(),this.state={imageContainerWidth:"MOBILE"===this.props.viewportCategory?411:600}}componentDidMount(){var e;(null==(e=this.imageContainerRef)?void 0:e.current)&&this.setState({imageContainerWidth:this.imageContainerRef.current.getBoundingClientRect().width})}render(){var e,{actor:t,images:o,deleteObject:i,untagObject:a,viewportCategory:s,showPOISavesIcon:l,additionalContent:r,socialStatisticsBar:d,socialActionBar:u}=this.props,h=o[this.props.currentIndex],p=(null==h?void 0:h.publishedDate)||(null==h?void 0:h.uploadDate),m=t&&!t.isMe?{FOLLOW:!0,UNTAG:!!b(h,this.props.loggedInUserId)}:{FOLLOW:!1,UNTAG:!!b(h,this.props.loggedInUserId)},v="MOBILE"===s,f="TABLET"===s,C=(null==h||null==(e=h.photoSizes)?void 0:e.length)&&Math.round(h.photoSizes[h.photoSizes.length-1].height/(h.photoSizes[h.photoSizes.length-1].width/100)),N=o.length>1,S=N&&n(c,{photos:o.map(e=>({id:e.id,photoSizes:e.photoSizes})),displayIndex:this.props.currentIndex,height:(()=>{var e=h.photoSizes.length-1;if((v||f)&&this.state.imageContainerWidth){var t=h.photoSizes[e].height/h.photoSizes[e].width;return this.state.imageContainerWidth*t+"px"}return v?"500px":f?"550px":"100%"})(),width:"100%",onPhotoChange:this.props.onPhotoChange,noCta:!0,totalCount:o.length,fitStrategy:"contain",showIndicatorDots:!0,maxIndicatorDots:10,showProgress:!0,hideArrows:!0}),y=!N&&n(w,v||f?{sources:h.photoSizes,width:"100%",height:"auto",padding:`0 0 ${C}%`,notLazy:!0}:{sources:h.photoSizes,width:"100%",height:"100%",fitStrategy:"contain",notLazy:!0});return n("div",{className:"ui_columns BLpvAd-I"},n("div",{className:"ui_column is-8 is-9-widescreen  is-8-desktop is-12-tablet is-12-mobile _2ZE8Z0RE",ref:this.imageContainerRef},N?S:y),n("div",{className:"ui_column is-4 is-3-widescreen is-4-desktop is-12-tablet is-12-mobile oP7XjY9i"},n("div",{className:"poiN5jMR"},n("div",{className:"a6hcgx-D"},n("div",{className:"_3Rf1S-Zl"},n(_,{photo:t.avatar,display:"inline",withBorder:!0}),n("span",{className:"yt3GsgqK"},n(O,null,e=>n(g,{to:{page:"Profile",username:t.username},className:I("_3QrLv0jM",{verified:t.isVerified}),onClick:o=>e(o,"userClick",{userId:t.userId})},t.displayName)),n("span",{className:"clpKh4Ie"},n(M,{dateStr:p})))),n("div",{className:"_3m0Hahsd"},n(L,{sectionObject:this.props.overflowMenuObject,sectionObjectForType:this.props.overflowMenuObjectForType,sectionActor:this.props.actor,deleteObject:i,untagObject:a,overrideItems:m}))),n("div",{className:"_1eagqF7-"},n(O,null,e=>n(R,{text:h.caption,socialReferences:h.socialReferences,useSpan:!0,onLinkReferenceClick:(o,i)=>{e(o,"linkReferenceClick",{authorUserId:t.userId,url:i})}}))),h.caption&&this.props.additionalContent&&n("div",{className:"-Cn2a_VO"}),r,d,u),(null==h?void 0:h.location)&&n(z,{pois:[h.location],showSavesIcon:l})))}}),E.defaultProps={deleteObject:null,untagObject:null,loggedInUserId:"",showPOISavesIcon:!1,currentIndex:0,additionalContent:null},F=y(e=>({viewportCategory:e.meta.device.viewportCategory,loggedInUserId:e.auth.loggedInUserId}))(E),J.Content=({children:e,fullWidth:t})=>n(r,null,d.map(e,e=>n("div",{className:I("rZtp3RDr",{_1RuUIMSG:t})},e))),J.Content.displayName="CardSection.Content",J.Content.defaultProps={fullWidth:!1},J.defaultProps={topNote:void 0,isSingleObject:!1,fullWidth:!1,classNames:"",pois:[],contentClass:"",clusterId:void 0},e({CardSection:J,FeedSectionPhotoCarousel:Z,SectionModal:F,SectionModalHeader:T,SponsoredCrust:$,getOpenGraphInfoFromPhoto:W})},[e=>(o=e.Component,i=e.createRef,n=e.createElement,a=e.useState,s=e.useRef,l=e.useEffect,r=e.Fragment,d=e.Children),e=>c=e.PhotoCarousel,e=>u=e.MountedClientOnly,e=>(h=e.localize,p=e.unescaped),e=>m=e.default,e=>(g=e.Link,v=e.useRouteState,f=e.RouteConsumer,C=e.HeadProperties),e=>N=e.ModalView,e=>S=e.BrandedHeader,e=>y=e.connect,e=>I=e.default,e=>_=e.Avatar,e=>w=e.ResponsiveImage,e=>b=e.DisplayUntagIcon,e=>O=e.InteractionLogger,e=>(z=e.POIObjectList,j=e.useViewModelForObjects,P=e.POIObject),e=>M=e.ContentDisplayDate,e=>R=e.Linkify,e=>L=e.SectionOverflowMenu,e=>A=e.default,e=>B=e.TabActiveContext,e=>k=e.ScrollAffordance,e=>D=e.EscapeHtml,e=>x=e.getDisplayName]]},["cDcdfi","IBpJWf","4Z07E2","535agn","4LU1Ax","N4pTU2","HKQFPT","6nM-E7","h74DsO","jSLlaY","Hgrhyo","KwOV1Z","zrL722","pZzSdK","Kzjbzq","OiNFvE","wn3KpT","ce1YGz","aR2tRQ","jCCr_L","REpc0H","miRpRf","3fnomI"]]);
