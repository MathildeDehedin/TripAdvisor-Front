(this.$WP=this.$WP||[]).push(["u-66yY/K6n6GC",(e,t)=>{"use strict";var n,o,i,a,s,c,l,r,d,u,p,m,_,g,b,v,T,w,h,I,C,f,R,y,k,S,L,x,D,P,N,F,O,A,E,U,q,M,W,V,B,H,j,Q,Y,X,G,J,Z,z,K,$,ee,te,ne,oe,ie,ae,se,ce,le,re,de,ue,pe,me,_e,ge,be,ve,Te,we,he,Ie,Ce,fe,Re,ye,ke,Se,Le,xe,De,Pe,Ne,Fe,Oe,Ae,Ee,Ue,qe,Me,We,Ve,Be,He,je,Qe,Ye,Xe,Ge,Je,Ze,ze,Ke,$e,et,tt,nt,ot,it,at,st,ct,lt,rt,dt,ut,pt,mt,_t,gt,bt={ROOT_FIELDS:[],LOCATION_FIELDS:[],REVIEW_LIST_FIELDS:[],REVIEW_FIELDS:[]},vt={header:e=>n(Fe,e),mainCol:e=>{var t,i,a,s;return n(o,null,n(Oe,e),n(Ae,e),(a=null==(t=e.location)?void 0:t.placeType,s=null==(i=e.review.location)?void 0:i.placeType,"ATTRACTION"===a&&"ACTIVITY"===s&&n(Ee,e)),e.review.alertStatus&&n("div",{className:"GWxro5ad"},n(Ne,null)),n(Ue,e),n(ze,e))}},Tt=e=>e.queryProps.review?n(pe,{key:e.queryProps.review.id},n(et,e)):null,wt=e=>[{name:r,module:"reviews",component:"ATTRACTION_POI"===e.placeType?ct:st,trackingEnabled:!1},{name:d,module:"faq",component:lt,trackingEnabled:!0}].map(({name:t,module:o,component:i,trackingEnabled:a})=>{var s=e.selectedTab===t;return s?n(m,{key:t},n(b,{onVisible:()=>{s&&((e,t)=>{e&&v({module:t,action:"in_view"})})(a,o)}},e=>n("div",{ref:e,className:_(s?"":"_2vYCVXuU"),"data-test-target":o+"-tab"},n(i,{isSelectedTab:s})))):g("rex_seo_ar_qa_content_exposed")?n("div",{className:"_2vYCVXuU"},n(i,{isSelectedTab:s})):null}),ht=(e,t,n,o)=>({module:e,action:t,context:n,dstServlet:o}),It=e=>"POI|Location"===e?40536:40543,Ct=e=>ge(e?"attractions_community_content_cta_finish_your_review":"attractions_community_content_cta_write_a_review"),ft=(e,t,o)=>n(h,null,({locationId:i,geoId:a,writeUserReviewUrl:s,hasDraftReview:c})=>n(T,{click:ht("contextual_cta_dropdown_review","click",o?e+"|LoggedIn":e,t?"UserReview":"UserReviewEdit"),element:"span"},n(I,{locationId:i,geoId:a,writeUserReviewUrl:s,className:_("_2pyM7HiD",{_1kkWBKk_:g("cx_brand_refresh_degreen")}),pid:It(e)},n(Ie,{name:"pencil-paper",className:"XcNlecq4"}),n("span",{className:"mOekL4PW"},Ct(c))))),Rt=e=>g("answers_attractions")?n(Re,{name:"community_qa_question_form"},t=>n(ye,{call:t},t=>n("span",{className:"_1bRcoDtW",onClick:()=>{l("ar-community-tab").emit("selectTab",d,!0),t(),v(ht("contextual_cta_dropdown_question","click",e,""))}},n("span",{className:_("SyDMXiRF",{_3JNnfTZI:g("cx_brand_refresh_degreen")})},n(Ie,{name:"forums",className:"_2DEh1VRs"}),n("span",{className:"JfPnH0WF"},ge("attractions_community_content_cta_ask_a_question")))))):null,yt=({locationId:e})=>n(T,{click:ht("owner_cta","owner_visit_mc_middle",e.toString(),"")},n("a",{href:"/ManagementCenter-d"+e},n(he,{type:"primary"},ge("restaurant_owners_visit_your_owner_mangement_center")))),kt=({dropDownOptions:e,trackingContext:t,isMobile:i,isLoggedIn:a})=>n(T,{click:ht("contextual_cta_dropdown","toggle",t,"")},n(rt,{below:!0,fullBleed:!0,local:!0,arrowType:"none",closeButton:!1,alignEdge:"right",contents:s=>n(o,null,Object.keys(e).map(o=>n("div",{className:"_1bRcoDtW",key:o,onClick:s},"Reviews"===o?e[o](t,i,a):e[o](t))))},(e,t,o,i)=>n(fe,{events:["onClick","onTouchStart"]},n("div",{ref:e,className:_("_3rGPLWMi",{_3JNnfTZI:g("cx_brand_refresh_degreen")}),onClick:i?o:t},n(Ie,{name:i?"caret-up":"caret-down"}))))),St=e=>{var t={Reviews:ft,Photos:t=>n("span",{className:_("SyDMXiRF",{_3JNnfTZI:g("cx_brand_refresh_degreen")}),onClick:()=>Ce(e.geoId,e.locationId,"contextual_cta_dropdown_photo","click",t,It(t),e.cookieDomain)},n(Ie,{name:"camera",className:"_2DEh1VRs"}),n("span",{className:"JfPnH0WF"},ge("attractions_community_content_cta_post_a_photo"))),Questions:Rt},i=({selectedTab:t})=>{return t&&t!==d?((e,t,i)=>n(h,null,({locationId:a,geoId:s,writeUserReviewUrl:c,hasDraftReview:l})=>n(o,null,n(T,{click:ht("contextual_cta_button_review","click",i?e+"|LoggedIn":e,t?"UserReview":"UserReviewEdit"),element:"span"},n(I,{locationId:a,geoId:s,writeUserReviewUrl:c,className:"ui_button primary war-button",pid:It(e)},Ct(l))))))(e.trackingContext,e.isMobile,e.isLoggedIn):(i=e.trackingContext,g("answers_attractions")?n(Re,{name:"community_qa_question_form"},e=>n(ye,{call:e},e=>n(he,{type:"primary",onClick:()=>{e(),v(ht("contextual_cta_button_question","click",i,""))}},ge("attractions_community_content_cta_ask_a_question")))):null);var i};return n(we,null,n(h,null,({loading:o,isActiveOwner:a,questionsCount:s,reviewsCount:c})=>o||0===s&&0===c||e.isClosed?null:a?n(yt,{locationId:e.locationId}):n("div",{className:"_3W6yB1_L"},n("div",{className:"_1eN13RvW"},n(i,{selectedTab:e.selectedTab}),n(kt,{dropDownOptions:t,trackingContext:e.trackingContext,isMobile:e.isMobile,isLoggedIn:e.isLoggedIn})))))},Lt=e=>{switch(e){case r:return ge("common_Reviews");case d:return ge("mobile_questions_answers");default:return""}},xt=e=>{switch(e){case r:return n(re,null);case d:return n(C,{visible:!0,openInNewWindow:!0});default:return null}},Dt=e=>n(me,{section:null,theme:"tabbed-top",joinable:!Pe.has(e.selectedTab)},n("div",{className:_("_3n8-XHcx")},n(_e,{text:n(o,null,Lt(e.selectedTab),xt(e.selectedTab)),noDivider:Pe.has(e.selectedTab)},"Reviews"===e.selectedTab?n(se,{locationId:e.locationId}):null,n(dt,{selectedTab:e.selectedTab,locationId:e.locationId,geoId:e.geoId,trackingContext:e.trackingContext,isMobile:e.isMobile,isLoggedIn:e.isLoggedIn})),n(ce,null),e.selectedTab===r&&n(le,{locationId:e.locationId}))),Pt=e=>n(h,null,t=>n(xe,Object.assign({},e,{context:t}),e.children)),Nt=e=>n(me,{section:"reviews",theme:"none"},n(ke,null,n(Pt,{setSelectedTab:e.setSelectedTab,selectedTab:e.selectedTab},t=>t.map(t=>n(Se,{active:t.tab===e.selectedTab,key:t.tab,onClick:t.count>0?()=>e.setSelectedTab(t.tab,!0):()=>!1,className:_("_2-zZAhSq",t.count>0?null:"iLbbViF_")},n(Ie,{name:t.icon,className:_("_3HDPvvJK",t.count>0?null:"iLbbViF_")}),ve(t.label,t.count>0?"":"iLbbViF_")))))),Ft=e=>n(f,{locationId:e.locationId,hasDraftReview:e.hasDraftReview},n(Nt,{selectedTab:e.selectedTab,setSelectedTab:e.setSelectedTab}),n(Dt,{locationId:e.locationId,geoId:e.geoId,selectedTab:e.selectedTab,trackingContext:e.trackingContext,isMobile:e.isMobile,isLoggedIn:e.isLoggedIn})),Ot=e=>n(f,{locationId:e.locationId,hasDraftReview:e.hasDraftReview},n(h,null,({loading:t,isActiveOwner:o,questionsCount:i,reviewsCount:a})=>{var s=e.selectedTab===d?i:a;return t||o||s>=5&&0!==a?null:n("div",{className:_("_3h-UWioB","ui_columns",0===a&&0===i?"_3zeg8Kob":"")},n(pt,{trackingContext:e.trackingContext,isMobile:e.isMobile,isLoggedIn:e.isLoggedIn}),n(mt,{trackingContext:e.trackingContext}),n(_t,{trackingContext:e.trackingContext}))}));return[()=>{Pe=new Set(["Questions"]),Ne=de.onUsage(()=>t("tTXiRz"),"default"),Fe=k(bt),Oe=S(bt),Ae=L(bt),Ee=x(bt),Ue=D(bt),qe=P(bt),Me=N(bt),We=F(bt),Ve=O(bt),Be=A(bt),He=E(bt),je=U(bt,{header:e=>n(He,e)}),Qe=q(bt),Ye=M(bt),Xe=W(bt),Ge=V(bt),Je=B(bt),Ze=ue(bt),ze=H(bt,{children:(e,t)=>t?n(o,null,n(Me,e),n(We,e),n(Be,e),n(qe,e),n(Ve,e),n(Je,e),n(Ke,e),n(Ge,e),n(Ze,e),n(je,e),n(Xe,e)):n(o,null,n(Je,e),n("div",{className:"_27JpaCjl"},n(Me,e),n(Ke,e)),n(Ze,e),n(je,e))},!0),Ke=j(bt),$e=Q(bt,Object.assign({},vt,{photos:e=>n(Ye,e)})),et=Q(bt,Object.assign({},vt,{photos:e=>n(Qe,e)})),tt=[{name:"ReviewRatingFilter",content:Z,computeFilterSettings:z},{name:"TravelTypeFilter",content:K,computeFilterSettings:$},{name:"TravelTimeFilter",content:ee,computeFilterSettings:te},{name:"LanguageFilter",content:ne,tabletWidth:3,computeFilterSettings:oe},{name:"HealthAndSafetyFilter",content:ie,tabletWidth:6,computeFilterSettings:ae}],nt=i(Tt,(e,t)=>{var n,o;return(null==(n=e.queryProps.review)?void 0:n.id)===(null==(o=t.queryProps.review)?void 0:o.id)}),ot=Y(bt,{review:e=>{var t;return(null==(t=e.queryProps.review)?void 0:t.id)?n(nt,{key:e.queryProps.review.id,queryProps:e.queryProps}):null},reviewFilters:e=>n(o,null,n(X,Object.assign({},e,{filters:tt})),n(G,e)),listFooter:e=>n(u,e)}),it=J(bt,{review:e=>n(pe,{key:e.queryProps.review.id},n($e,e)),reviewFilters:e=>n(o,null,n(X,Object.assign({},e,{filters:tt})),n(G,e)),listFooter:e=>n(u,e)}),at=g("rex_seo_ar_community_content_review_count_10")?10:5,st=R(bt,e=>n(b,{onVisible:()=>{v({module:"reviews",action:"in_view",context:"Supplier"})}},t=>n("div",{ref:t},n(it,e))),at),ct=((e,t,o,i)=>g("update_photo_ui_on_grouping_tabs")?y(bt,e=>n(b,{onVisible:()=>{v({module:"reviews",action:"in_view",context:"POI"})}},t=>n("div",{ref:t},n(ot,e)))):R(bt,e=>n(b,{onVisible:()=>{v({module:"reviews",action:"in_view",context:"POI"})}},t=>n("div",{ref:t},n(it,e))),e))(at),lt=w,rt=de.onUsage(()=>t("eDFcUX"),"default"),dt=Te(e=>({cookieDomain:e.meta.cookieDomain}))(St),xe=class extends a{constructor(...e){super(...e),this.state={defaultTabCheckCompleted:!1}}componentDidMount(){this.state.defaultTabCheckCompleted||this.defaultTabCheck()}defaultTabCheck(){var{loading:e,hasNoContent:t,questionsCount:n,reviewsCount:o}=this.props.context;e||(this.setState({defaultTabCheckCompleted:!0}),!t&&0===o&&n>0&&this.props.setSelectedTab(d))}render(){var{loading:e,questionsCount:t,reviewsCount:o}=this.props.context,{setSelectedTab:i,selectedTab:a,children:s}=this.props;if(0===t&&0===o)return null;if(e)return n(Le,{height:"120px"});var c={onTabClick:i,selectedTab:a},l=[Object.assign({tab:r,icon:"pencil-paper",count:o,label:ge("hr_community_tab_reviews",{countClass:"_1yuvE2vR",typeClass:"pZzTY-B7",count:be.formatNumber("integer",o)})},c),Object.assign({tab:d,icon:"forums",count:t,label:ge("attractions_community_tab_questions",{countClass:"_1yuvE2vR",typeClass:"pZzTY-B7",count:be.formatNumber("integer",t)})},c)];return s(g("answers_attractions")?l:l.filter(e=>"Questions"!==e.tab))}},ut=c((e,t)=>(ce.stage(e,t),(e,t)=>t))(Ft),pt=de.onUsage(()=>t("u-66yY/lMnnDW"),"default"),mt=de.onUsage(()=>t("u-66yY/U9qXIe"),"default"),_t=de.onUsage(()=>t("u-66yY/UE2xhX"),"default"),De=class extends s{constructor(e){super(e),this.setSelectedTab=e=>{this.setState({selectedTab:e})},this.state={selectedTab:r}}componentDidMount(){l("ar-community-tab").on("selectTab",this.setSelectedTab)}render(){var e,t,i=(e=this.props.placeType,t=this.props.isSupplier,"ACTIVITY"===e?"Product|Location":(e=>e?"Supplier|Location":"POI|Location")(t));return n(o,null,n(ut,{locationId:this.props.locationId,geoId:this.props.geoId,hasDraftReview:this.props.hasDraftReview,selectedTab:this.state.selectedTab,setSelectedTab:this.setSelectedTab,trackingContext:i,isMobile:this.props.isMobile,isLoggedIn:this.props.isLoggedIn}),n(p,{value:{obfuscatedViatorCommerceLink:this.props.obfuscatedViatorCommerceLink}},n(wt,{selectedTab:this.state.selectedTab,placeType:this.props.isSupplier?"ATTRACTION_SUPPLIER":this.props.placeType})),n(Ot,{selectedTab:this.state.selectedTab,locationId:this.props.locationId,hasDraftReview:this.props.hasDraftReview,trackingContext:i,isMobile:this.props.isMobile,isLoggedIn:this.props.isLoggedIn}))}},gt=c((e,t)=>{ut.stage(e,t);var n,o=e.route.detail,i=o&&"/data/1.0/attractions/products/activity/"+o,a=(n=e.route.page,["AttractionProductDetail","MobileAttractionProductDetail","AttractionProductReview","MobileAttractionProductReview"].some(e=>n.startsWith(e))),s=!!i&&a&&t(i),c=t("/data/1.0/draftreviews/hasDraft/"+(e.page.detailId||1));return()=>{var t;return{obfuscatedViatorCommerceLink:s?null==(t=s.get().data)?void 0:t.obfuscatedViatorCommerceLink:null,placeType:s?"ACTIVITY":"ATTRACTION_POI",hasDraftReview:!!c.get().data,locationId:e.page.detailId,geoId:e.page.geoId,isMobile:"MOBILE"===e.meta.device.viewportCategory,isLoggedIn:e.auth.isMember}}})(De),e({C:gt,U:"UserReview",a:ht,b:"UserReviewEdit",c:"click",g:It})},[e=>(n=e.createElement,o=e.Fragment,i=e.memo,a=e.Component,s=e.PureComponent),e=>c=e.bind,e=>l=e.default,e=>(r=e.REVIEWS_TAB,d=e.QUESTIONS_TAB),e=>(u=e.default,p=e.AttractionProductInformationProvider),e=>m=e.ErrorBoundary,e=>_=e.default,e=>g=e.featureIsEnabled,e=>b=e.HasBeenVisible,e=>(v=e.default,T=e.Track),e=>(w=e.QuestionsTabContent,h=e.CommunityContentConsumer,I=e.WARButton,C=e.SeeAllQuestionsLink,f=e.CommunityContentProvider),e=>(R=e.connectLocationReviewQuery,y=e.connectLocationReviewScrollQuery,k=e.connectHeader,S=e.connectRatingLine,L=e.connectReviewTitle,x=e.connectProductAttribution,D=e.connectGoogleTranslateButton,P=e.connectInlineRoomTip,N=e.connectEventDate,F=e.connectEventDetails,O=e.connectAdditionalRatings,A=e.connectTripType,E=e.connectGoogleTranslateResponseButton,U=e.connectOwnerResponse,q=e.connectPhotosCarousel,M=e.connectInlinePhotos,W=e.connectResponseDisclaimerFooter,V=e.connectDisclaimerFooter,B=e.connectAttributionFooter,H=e.connectExpando,j=e.connectMTFooter,Q=e.connectReview,Y=e.connectReviewScroll,X=e.ReviewFilters,G=e.SearchBox,J=e.connectReviewList,Z=e.ReviewRatingFilter,z=e.getRatingSelections,K=e.TravelTypeFilter,$=e.getSegmentSelections,ee=e.TravelTimeFilter,te=e.getTimeSelections,ne=e.LanguageFilter,oe=e.getLanguageSelections,ie=e.HealthAndSafetyFilter,ae=e.getHealthAndSafetySelections,se=e.PointsCampaign,ce=e.SensitiveIssuesBadge,le=e.ConnectionReviewsCTA,re=e.ReviewControlNotice),e=>de=e.component,e=>ue=e.connectToReviewListing,e=>pe=e.default,e=>(me=e.Section,_e=e.ComplexHeader),e=>(ge=e.localize,be=e.globalize,ve=e.unescaped),e=>Te=e.connect,e=>we=e.HideOnReadonly,e=>he=e.default,e=>Ie=e.Icon,e=>Ce=e.openAddPhoto,e=>fe=e.default,e=>Re=e.Opener,e=>ye=e.AuthGated,e=>(ke=e.GroupingTabs,Se=e.GroupingTab),e=>Le=e.default]]},["cDcdfi","RiHMo-","l6BSGt","5otRbQ","AlYTtk","nIW_Rw","jSLlaY","-i3PJS","BLrxBS","Jk5sjx","4OEir5","QmAjD5","pLbCP4","T9pBQS","lQWUxH","JDHrGa","535agn","h74DsO","9wfvtu","PCbs_l","_qQcW3","oH6UDC","_cZwhS","pT-O8u","ptEueE","roCOIO","Xi-2HZ"]]);
