(this.$WP=this.$WP||[]).push(["wU942v",(e,t)=>{"use strict";var a,r,i,n,o,_,l,s,d,u,g=["Restaurant_Review","Attraction_Review","Hotel_Review"],c=()=>{var e,t,a=null==(e=window)||null==(t=e.navigator)?void 0:t.connection;return a?[a.effectiveType||"unknown",a.type||"unknown"]:["unknown","unknown"]},v=()=>{if(n("hard_gate_excl_disable_domain_direct")||n("ml_hard_gate_master")||n("ml_hard_gate_dt"))return!1;var e=i.get("firstEntryServlet");return"Home"===e||"Tourism"===e||"MobileTourism"===e},m=e=>{var t=i.get("sponsoredListingIdClicked");return n("ungate_sponsored_listing_clicks")&&t&&t===e},w=e=>{var t=s();return a(()=>{((e,t)=>{var{action:a,totalViews:r,name:i,servlet:o}=t,s=_.includes(o)&&!n("desktop_soft_gate_on_page_view"),[d,u]=c(),g=l(),v=[a];s&&v.push("hotels"),r&&v.push(r),e({module:s?i+"_hotels":i,action:v.join("_"),context:`${o||"unknown"}|${d}|${u}|${g.toString()}`})})(t,e),e.fn&&e.fn()},[e,t])},h=()=>i.get("mlShouldGate"),k=()=>i.get("requiredLoginPagesViewed")||[],p=(e,t)=>k().some(a=>a.servlet===e&&a.pageId===t),f=(e,t)=>{if(!p(e,t)){var a=k();a.push({servlet:e,pageId:t}),i.set("requiredLoginPagesViewed",a,18e5)}},E=()=>i.get("restaurantBookingClickedIds")||[],R=e=>{var t=E();return t.splice(t.indexOf(e),1),i.set("restaurantBookingClickedIds",t,18e5),t},S=(e,t,a)=>{if(!o.includes(t)||!n("ungate_restaurant_booking_clicks"))return!1;var r=n("restaurant_booking_click_ungates_single"),i=n("restaurant_booking_click_ungates_all"),_=n("select_restaurants_booking_click_ungates"),l=E(),s="Restaurant_Review"===t&&l.includes(e);_&&e&&s&&!a&&(l=R(e),s=!1);var d=_&&r&&s&&"Restaurant_Review"===t&&a;return l.length>0&&(s||d||i)},C=e=>{if(n("ungate_restaurant_booking_clicks")){var t=i.get("restaurantBookingClickedIds")||[];t.push(e),i.set("restaurantBookingClickedIds",t,18e5)}},I=e=>{var t,a,r,i,n,o,_;switch(e.meta.initialServletName){case"ShowTopic":case"MobileShowTopic":return null==(t=e.route)?void 0:t.ft;case"Profile":return null==(a=e.route)?void 0:a.username;case"ShowUserReviews":case"MobileShowUserReviews":return null==(r=e.route)?void 0:r.src;case"FAQ_Answers":case"MobileFAQ_Answers":return null==(i=e.route)?void 0:i.t;case"Trips":return null==(n=e.route)?void 0:n.tripId;default:return(null==(o=e.page)?void 0:o.detailId)||(null==(_=e.page)?void 0:_.geoId)}},P=(e,t,a,r,i,n)=>{var o=[e.toString(),t];o.push(a||0===a?a:"unknown"),o.push((!!r).toString()),n({module:i,action:"gating_ml_model_decision",context:o.join("|")})},T=e=>{if(!n("review_detail_hard_gate_master_dt"))return k().length;var t=k();return(n("review_detail_hard_gate_dt_other_servlets")?t.filter(e=>!g.includes(e.servlet)):t.filter(t=>t.servlet===e)).length},V=(e,t)=>{r(()=>{!e&&t&&i.set("requiredLoginActivated",(new Date).getTime())},[e,t])},b=()=>{var e=i.get("requiredLoginActivated");return e?new Date(e):null},A=(e,t,a,r,o,_,l="memx_mobile_hardgate_pageview")=>{if(d){var s=T(o),g=s>=1&&!a,c=h();return g&&null===c?(P(e,s+1,t,r,l,_),(e=>{var t=h(),a=null===t?e:!!t;return i.set("mlShouldGate",a,18e5),a})(e)):!!c}if(u){var v=(m=parseInt(i.get("mlHardGatePageViewCount"),10),w=isNaN(m)?1:m+1,i.set("mlHardGatePageViewCount",w,18e5),w);return P(e,v,t,r,l,_),!(!n("ml_hard_gate_targeting_logic")&&!n("ml_hard_gate_no_reqlo"))||e}var m,w;return!0};return[()=>{d=n("ml_hard_gate_model_v1")||n("ml_hard_gate_model_v2")||n("ml_hard_gate_model_v2_excl_hotels"),u=n("ml_hard_gate_model_v1_reevaluate_on_page_view")||n("ml_hard_gate_model_v2_reevaluate_on_page_view")||n("ml_hard_gate_dt_v1_master")||n("ml_hard_gate_dt_v2_master")||n("ml_hard_gate_dt_v3_master"),e({ML_PAGE_VIEWED_KEY:"mlHardGatePageViewCount",MODAL_NAME:"memx_mobile_hardgate_pageview",PAGE_COUNT_TRIGGER:2,PREVIOUSLY_VIEWED_PAGES_KEY:"requiredLoginPagesViewed",addPageToViewed:f,cameDomainDirect:v,findPageIdentifier:I,gatingEligibility:A,getConnectionType:c,getCurrentPageViewCount:T,getHardGateViewTimestamp:b,getPagesViewed:k,getRestaurantBookingClickedIds:E,isFromSponsoredClick:m,isUngatedByRestaurantBookingClick:S,pageHasBeenViewed:p,removeIdFromRestaurantBookingClickedIds:R,storeRestaurantBookingButtonClick:C,useHardGateViewRecord:V,useTrackAndDelegateCallback:w})},[e=>(a=e.useCallback,r=e.useEffect),e=>i=e.default,e=>n=e.featureIsEnabled,e=>(o=e.RESTAURANTS_SERVLETS,_=e.HOTEL_SERVLETS,l=e.isEligibleForOneTap),e=>s=e.useGARecorder]]},["cDcdfi","jaCyxS","-i3PJS","MWFqPp","fsml46"]]);
